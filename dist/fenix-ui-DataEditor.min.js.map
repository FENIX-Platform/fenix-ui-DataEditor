{"version":3,"sources":["webpack:///fenix-ui-DataEditor.min.js","webpack:///webpack/bootstrap b1f279a643278d4bb576","webpack:///./src/js/index.js","webpack:///external \"jquery\"","webpack:///./src/js/DataEditor/DataEdit.js","webpack:///./src/nls/labels.js","webpack:///./src/nls/en/labels.js","webpack:///./src/nls/fr/labels.js","webpack:///./src/js/DataEditor/simpleEditors/DataEditor.js","webpack:///external \"loglevel\"","webpack:///./src/js/DataEditor/simpleEditors/RowEditorPopup.js","webpack:///./src/js/DataEditor/simpleEditors/rE/RowEditorFactory.js","webpack:///./src/js/DataEditor/simpleEditors/rE/RowEditor_bool.js","webpack:///./src/js/DataEditor/simpleEditors/rE/RowEditor_base.js","webpack:///external \"bootstrap\"","webpack:///./src/js/DataEditor/simpleEditors/rE/RowEditor_code.js","webpack:///./src/js/DataEditor/simpleEditors/rE/RowEditor_date.js","webpack:///external \"eonasdan-bootstrap-datetimepicker\"","webpack:///./src/html/DataEditor/simpleEditors/RowEditorTime.html","webpack:///external \"moment\"","webpack:///./src/js/DataEditor/simpleEditors/rE/RowEditor_month.js","webpack:///./src/js/DataEditor/simpleEditors/rE/RowEditor_number.js","webpack:///./src/js/DataEditor/simpleEditors/rE/RowEditor_string.js","webpack:///./src/js/DataEditor/simpleEditors/rE/RowEditor_year.js","webpack:///./src/html/DataEditor/simpleEditors/DataEditor.html","webpack:///external \"amplify-pubsub\"","webpack:///./src/js/DataEditor/simpleEditors/ValidationResultsViewer.js","webpack:///./src/js/DataEditor/helpers/Data_Validator.js","webpack:///./src/js/DataEditor/helpers/CodelistUtils.js","webpack:///./src/html/DataEditor/DataEdit.html","webpack:///./src/js/DataEditor/helpers/CSV_To_Dataset.js","webpack:///./src/js/DataEditor/helpers/Validator_CSV.js","webpack:///./src/js/DataEditor/helpers/Validator_CSV_Errors.js","webpack:///./src/js/DataEditor/ColumnsMatch/ColumnsMatch.js","webpack:///./src/html/DataEditor/ColumnsMatch/ColumnsMatch.html"],"names":["define","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_8__","__WEBPACK_EXTERNAL_MODULE_13__","__WEBPACK_EXTERNAL_MODULE_16__","__WEBPACK_EXTERNAL_MODULE_18__","__WEBPACK_EXTERNAL_MODULE_25__","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","$","DataEdit","Csv2Dataset","ValidatorCSV","DataValidator","ColumnsMatch","init","containerID","config","callB","cfg","dataEdit","render","setColumns","columns","cLists","getColumns","getCodelists","getData","getDataWithoutValidation","setData","data","appendData","removeAllData","getColumnsWithDistincts","isEditable","editable","destroy","hasChanged","CSV_To_Dataset","a","b","Validator_CSV","Columns_Match","Data_Validator","apply","undefined","mlRes","DataEditor","ValidationResultsViewer","DataEditHTML","amplify","defConfig","e","dataEditorValueChanged","dataEditorRowAdded","dataEditorRowDeleted","this","extend","$container","dataEditor","$dataEditor","valResView","$valResView","cols","codelists","editEnabled","changed","prototype","container","html","find","doML","me","subscribe","updateValidationOnChange","on","args","newRow","updateValidation","val","valRes","validate","updateValRes","showValidationResults","evt","allData","length","hide","show","setValidationResults","getValidationResults","Error","uiEnabled","checkCodeColumnsAndCodelists","enabled","removeAttr","attr","i","dataType","cListId","domain","codes","idCodeList","version","col","dist","getColumnDistinct","values","d","push","code","timeList","idx","toRet","inArray","unsubscribe","off","i18nEn","i18nFr","en","fr","confirmDelete","unsavedData","nullKey","sameKeyVals","unknownCode","invalidYear","invalidMonth","invalidDate","invalidNumber","invalidBool","NAN","OutOfRange","Null","log","RowEditorPopup","DataEditorHTML","MLUtils","createTblRow","row","editControls","addLabelToData","lang","btnEdit","replace","btnDel","cListUID","getCodelistUid","lbl","getCodeLabel","convertCodelists","cl","metadata","convertCodes","recFlatten","node","list","convertCode","children","MLUtils_getAvailableLang","ml","toUpperCase","langs","level","title","widgetName","thButtons","EVT_VALUE_CHANGED","EVT_ROW_ADDED","EVT_ROW_DELETED","h","divDataGrid","divRowEditorPopup","btnEditRowCanc","btnEditRowOk","tblDataBody","tblDataHead","editButtonsClass","delButtonsClass","rowEditor","$cnt","$editWindow","$dataGrid","$tBody","toLowerCase","localStorage","getItem","_bindEvents","_doML","info","updateTableHeader","createTH","label","_showEditWindow","modal","reset","setRow","keyCode","rowEditOk","confirm","_unbindEvents","isValid","updateValidationHelp","getRow","uid","evtArgs","newData","publish","updateTable","console","tHead","append","rowId","res","deleteRow","index","splice","getRowByRowId","rows","cListUid","resetValidationResults","setRowColor","rowIdx","color","setCellColor","colId","setCellError","changeCellBackgroundColor","htmlCell","MLRes","reFactory","generateEditFiledId","YMin","YMax","decimalDigits","$window","editors","uidInEdit","oldVal","createStrucure","toAppend","$tbl","tBody","cnt","create","codelistUid","yMin","yMax","period","from","to","key","isMandatory","setValue","getValue","parseFloat","newVal","reBool","reCode","reDate","reMonth","reNumber","reString","reYear","RowEditorFactory","rowEditorBase","RowEditor_bool","parent","constructor","Object","$chk","error","prop","popover","mandatory","RowEditor_base","ERROR_NAN","ERROR_OUT_OF_RANGE","ERROR_NULL","errMSG","content","_getTitle","levels","optionCode","blanks","elemCode","elemClass","emptyEntryValue","emptyEntryLabel","RowEditor_code","$ddl","createEditor","toApp","datetimepicker","RowEditorTimeHTML","RowEditor_date","$datePicker","viewMode","locale","format","clear","substring","y","date","Date","dt","month","year","rowEditorDate","RowEditor_month","RowEditor_number","$txt","trim","isNaN","RowEditor_string","txt","RowEditor_year","$valResGrid","toAdd","dataIndex","clUtils","MSG_NULL_KEY","MSG_SAME_KEY_VALS","MSG_UNKNOWN_CODE","MSG_INVALID_YEAR","MSG_INVALID_MONTH","MSG_INVALID_DATE","MSG_INVALID_NUMBER","MSG_INVALID_BOOL","emptyKeyVals","checkEmptyKeyVals","duplicateKeyVals","checkDuplicateKeyVals","wrongDataTypes","checkWrongDataTypes","valueFlags","checkValueFlags","arrConcat","r1","r2","sameDimVals","row1","row2","checkRowDataTypes","dataRow","checkCode","checkYear","yearLimitFrom","yearValue","yearLimitTo","checkMonth","checkDate","checkNumber","checkBool","codelist","clU","findCodeInCodelist","isNumeric","toString","num","toCheck","dest","dataAppendCheck","dataOld","dataNew","o","n","dimValsCollision","dataOldIndex","dataNewIndex","dataMerge","mode","oldLen","found","copyRow","src","dst","CodelistUtils","isInNode","arr","separator","fSep","rSep","quot","head","stringsArr","_cleanEmptyCols","_removeEmptyCol","colIndex","r","stringArrToCol","stringArrToData","toStringArray","str","f","q","charAt","shift","pop","convert","csv","Err","nullOnEmpty","isInCodelist","dsdCols","csvCols","csvData","type","DSD_COLUMNS_NULL","CSV_COLUMNS_NULL","WRONG_COLUMN_COUNT","validateCodes","clId","unkCodes","checkCodes","UNKNOWN_CODES","columnId","codelistId","dsdCol","isIn","uCode","colsMatchHTML","findIndex","csvRowToRow","csvRow","csvOrder","maxRows","trDSD","trCSV","tblColMatch","rowDSD","rowCSV","$tblColMatch","$trDsd","$trCsv","dsd","MLUtils_getAvailableString","toSet","bindCsvHeadEvents","_updateView","getCsvCols","newOrder","_getColIndexes","getCsvData","j","maxRCount","_removeDataRows","$tdCsv","remove","tds","event","drop","allowDrop","drag","ev","originalEvent","dataTransfer","target","preventDefault","$toMoveDest","$cntDest","$toMoveSrc","$cntSrc","is"],"mappings":"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","file":"fenix-ui-DataEditor.min.js","sourcesContent":["define([\"jquery\",\"loglevel\",\"bootstrap\",\"eonasdan-bootstrap-datetimepicker\",\"moment\",\"amplify-pubsub\"], function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_25__) { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t    __webpack_require__(2),\r\n\t    __webpack_require__(3),\r\n\t    __webpack_require__(30),\r\n\t    __webpack_require__(31),\r\n\t    __webpack_require__(27),\r\n\t    __webpack_require__(33)\r\n\t\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, DataEdit, Csv2Dataset, ValidatorCSV, DataValidator, ColumnsMatch) {\r\n\t    var cfg = {};\r\n\t    var dataEdit;\r\n\t\r\n\t    function init(containerID, config, callB) {\r\n\t        cfg = config;\r\n\t        dataEdit = new DataEdit();\r\n\t        dataEdit.render($(containerID), cfg, callB);\r\n\t    }\r\n\t\r\n\t    function setColumns(columns, cLists, callB) {\r\n\t        dataEdit.setColumns(columns, cLists, callB);\r\n\t    }\r\n\t    function getColumns() { return dataEdit.getColumns(); }\r\n\t    function getCodelists() { return dataEdit.getCodelists(); }\r\n\t\r\n\t    function getData() { return dataEdit.getData(); }\r\n\t    function getDataWithoutValidation() { return dataEdit.getDataWithoutValidation(); }\r\n\t    function setData(data) { dataEdit.setData(data); }\r\n\t    function appendData(data) { dataEdit.appendData(data); }\r\n\t    function removeAllData() { dataEdit.removeAllData(); }\r\n\t    function getColumnsWithDistincts() { return dataEdit.getColumnsWithDistincts(); }\r\n\t\r\n\t    function isEditable(editable) {\r\n\t        if (typeof (editable) != 'undefined')\r\n\t            dataEdit.isEditable(editable);\r\n\t        else\r\n\t            return dataEdit.isEditable();\r\n\t    }\r\n\t    function destroy() {\r\n\t        if (dataEdit)\r\n\t            dataEdit.destroy();\r\n\t    }\r\n\t    function hasChanged() { return dataEdit.hasChanged(); }\r\n\t\r\n\t    function CSV_To_Dataset(a,b) {\r\n\t        return new Csv2Dataset(a,b);\r\n\t    }\r\n\t\r\n\t    function Validator_CSV() {\r\n\t        return ValidatorCSV;\r\n\t    }\r\n\t\r\n\t    function Columns_Match() {\r\n\t        return ColumnsMatch;\r\n\t    }\r\n\t\r\n\t    function Data_Validator() {\r\n\t        return new DataValidator();\r\n\t    }\r\n\t\r\n\t    return {\r\n\t        init: init,\r\n\t        setColumns: setColumns,\r\n\t        getColumns: getColumns,\r\n\t        getCodelists: getCodelists,\r\n\t        getData: getData,\r\n\t        getDataWithoutValidation: getDataWithoutValidation,\r\n\t        setData: setData,\r\n\t        appendData: appendData,\r\n\t        removeAllData: removeAllData,\r\n\t        getColumnsWithDistincts: getColumnsWithDistincts,\r\n\t        isEditable: isEditable,\r\n\t        destroy: destroy,\r\n\t        hasChanged: hasChanged,\r\n\t        CSV_To_Dataset: CSV_To_Dataset,\r\n\t        Validator_CSV: Validator_CSV,\r\n\t        Columns_Match: Columns_Match,\r\n\t        Data_Validator: Data_Validator\r\n\t    }\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t__webpack_require__(2),\r\n\t__webpack_require__(4),\r\n\t__webpack_require__(7),\r\n\t__webpack_require__(26),\r\n\t__webpack_require__(27),\r\n\t__webpack_require__(29),\r\n\t__webpack_require__(25)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, mlRes, DataEditor, ValidationResultsViewer, Data_Validator, DataEditHTML, amplify) {\r\n\t\r\n\t    var widgetName = \"DataEdit\";\r\n\t    var defConfig = {};\r\n\t    var e = {\r\n\t        dataEditorValueChanged: 'valueChanged.DataEditor.fenix',\r\n\t        dataEditorRowAdded: 'rowAdded.DataEditor.fenix',\r\n\t        dataEditorRowDeleted: 'rowDeleted.DataEditor.fenix'\r\n\t    };\r\n\t\r\n\t    var DataEdit = function (config) {\r\n\t        this.config = {};\r\n\t        $.extend(true, this.config, defConfig, config);\r\n\t\r\n\t        this.$container;\r\n\t\r\n\t        this.dataEditor;\r\n\t        this.$dataEditor;\r\n\t\r\n\t        this.valResView;\r\n\t        this.$valResView;\r\n\t\r\n\t        this.cols;\r\n\t        this.codelists;\r\n\t\r\n\t        this.editEnabled = true;\r\n\t        this.changed = false;\r\n\t    };\r\n\t\r\n\t    //Render - creation\r\n\t    DataEdit.prototype.render = function (container, config, callB) {\r\n\t        $.extend(true, this.config, config);\r\n\t\r\n\t        this.$container = container;\r\n\t        this.$container.html(DataEditHTML);\r\n\t\r\n\t        this.$dataEditor = this.$container.find('#divDataEditor');\r\n\t        this.dataEditor = new DataEditor();\r\n\t        this.dataEditor.render(this.$container.find('#divDataEdit'), this.config);\r\n\t\r\n\t        this.$valResView = this.$container.find('#divValRes');\r\n\t        this.valResView = new ValidationResultsViewer();\r\n\t        this.valResView.render(this.$valResView);\r\n\t\r\n\t        this.doML();\r\n\t\r\n\t        var me = this;\r\n\t\r\n\t        //Merge valueChanged, rowAdded and rowDeleted?\r\n\t        amplify.subscribe(e.dataEditorValueChanged, this, this.updateValidationOnChange);\r\n\t        amplify.subscribe(e.dataEditorRowAdded, this, this.updateValidationOnChange);\r\n\t        amplify.subscribe(e.dataEditorRowDeleted, this, this.updateValidationOnChange);\r\n\t\r\n\t        this.$dataEditor.find('#btnAddRow').on('click', function (args) { me.dataEditor.newRow(); });\r\n\t\r\n\t        if (callB)\r\n\t            callB();\r\n\t    }\r\n\t    //Validation\r\n\t    DataEdit.prototype.updateValidation = function (data) {\r\n\t        this.changed = true;\r\n\t        var val = new Data_Validator();\r\n\t        var valRes = val.validate(this.cols, this.codelists, data);\r\n\t        this.updateValRes(valRes);\r\n\t        this.dataEditor.showValidationResults(valRes);\r\n\t    };\r\n\t    DataEdit.prototype.updateValidationOnChange = function (evt) { this.updateValidation(evt.allData); };\r\n\t    DataEdit.prototype.updateValRes = function (valRes) {\r\n\t        if (!valRes)\r\n\t            this.$valResView.hide();\r\n\t        else if (valRes.length == 0)\r\n\t            this.$valResView.hide();\r\n\t        else {\r\n\t            this.$valResView.show();\r\n\t            this.valResView.setValidationResults(valRes);\r\n\t        }\r\n\t    };    \r\n\t\r\n\t    DataEdit.prototype.getValidationResults = function () {\r\n\t        var val = new Data_Validator();\r\n\t        return val.validate(this.cols, this.codelists, this.dataEditor.getData());\r\n\t    };\r\n\t    //END Validation\r\n\t\r\n\t    //Set columns and codelists\r\n\t    DataEdit.prototype.setColumns = function (columns, codelists, callB) {\r\n\t        this.cols = columns;\r\n\t        this.codelists = codelists;\r\n\t        if (!this.cols || this.cols.length == 0)\r\n\t            throw new Error(\"At least one column must be defined\");\r\n\t\r\n\t        this.uiEnabled(false);\r\n\t        checkCodeColumnsAndCodelists(this.cols, this.codelists);\r\n\t        this.dataEditor.setColumns(this.cols, this.codelists, callB);\r\n\t        this.uiEnabled(true);\r\n\t    };\r\n\t    DataEdit.prototype.getColumns = function () { return this.cols; };\r\n\t    DataEdit.prototype.getCodelists = function () { return this.codelists; };\r\n\t\r\n\t    DataEdit.prototype.uiEnabled = function (enabled) {\r\n\t        if (enabled) {\r\n\t            this.$dataEditor.find('#btnAddRow').removeAttr('disabled');\r\n\t            this.$dataEditor.removeAttr('disabled');\r\n\t        }\r\n\t        else {\r\n\t            this.$dataEditor.find('#btnAddRow').attr('disabled', 'disabled');\r\n\t            this.$dataEditor.attr('disabled', 'disabled');\r\n\t        }\r\n\t    };\r\n\t\r\n\t    var checkCodeColumnsAndCodelists = function (cols, cLists) {\r\n\t        //console.log(\"cLists\",cLists);\r\n\t        if (!cols) return;\r\n\t        for (var i = 0; i < cols.length; i++)\r\n\t            if (cols[i].dataType == 'code') {\r\n\t                if (!cLists)\r\n\t                    throw new Error(\"Codelist for the column \" + cols[i].id + \" missing\");\r\n\t                //TODO: extend to multiple codelists\r\n\t                var cListId = cols[i].domain.codes[0].idCodeList;\r\n\t\r\n\t                if (cols[i].domain.codes[0].version)\r\n\t                    cListId = cListId + \"|\" + cols[i].domain.codes[0].version;\r\n\t\r\n\t                if (!(cListId in cLists))\r\n\t                    throw new Error(\"Codelist '\"+cListId+\"' for the column '\"+cols[i].id+\"' missing\");\r\n\t            }\r\n\t    };\r\n\t\r\n\t    DataEdit.prototype.getData = function () {\r\n\t        var valRes = this.getValidationResults();\r\n\t\r\n\t        if (valRes == null || valRes.length == 0)\r\n\t            return this.dataEditor.getData();\r\n\t        else\r\n\t            return false;\r\n\t    };\r\n\t    DataEdit.prototype.getDataWithoutValidation = function () {\r\n\t        return this.dataEditor.getData();\r\n\t    };\r\n\t    DataEdit.prototype.setData = function (data) {\r\n\t        if (this.cols)\r\n\t            this.dataEditor.setData(data);\r\n\t        this.updateValidation(data);\r\n\t        this.changed = false;\r\n\t    };\r\n\t    /*DataEdit.prototype.appendData = function (data) {\r\n\t        if (this.cols)\r\n\t            this.dataEditor.appendData(data);\r\n\t        this.changed = true;\r\n\t        this.updateValidation(this.dataEditor.getData());\r\n\t    };*/\r\n\t    DataEdit.prototype.removeAllData = function () {\r\n\t        this.dataEditor.removeAllData();\r\n\t    };\r\n\t    DataEdit.prototype.hasChanged = function () {\r\n\t        return this.changed;\r\n\t    };\r\n\t\r\n\t    //Column Distincts\r\n\t    DataEdit.prototype.getColumnsWithDistincts = function () {\r\n\t        var data = this.dataEditor.getData();\r\n\t        for (var i = 0; i < this.cols.length; i++) {\r\n\t            var col = this.cols[i];\r\n\t            switch (col.dataType) {\r\n\t                case 'code':\r\n\t                case 'customCode':\r\n\t                    var dist = getColumnDistinct(data, i);\r\n\t                    if (dist) {\r\n\t                        //TODO: Allow multiple codelists\r\n\t                        col.values = { codes: [] };\r\n\t                        col.values.codes[0] = { idCodeList: col.domain.codes[0].idCodeList };\r\n\t                        if (col.domain.codes[0].version)\r\n\t                            col.values.codes[0].version = col.domain.codes[0].version;\r\n\t                        col.values.codes[0].codes = [];\r\n\t                        for (var d = 0; d < dist.length; d++) {\r\n\t                            col.values.codes[0].codes.push({ code: dist[d] });\r\n\t                        }\r\n\t                    }\r\n\t                    else col.values = null;\r\n\t                    break;\r\n\t                case 'date':\r\n\t                case 'month':\r\n\t                case 'year':\r\n\t                    var dist = getColumnDistinct(data, i);\r\n\t                    if (dist)\r\n\t                        col.values = { timeList: dist };\r\n\t                    else\r\n\t                        col.values = null;\r\n\t                    break;\r\n\t            }\r\n\t        }\r\n\t        return this.cols;\r\n\t    };\r\n\t\r\n\t    var getColumnDistinct = function (data, idx) {\r\n\t        var toRet = [];\r\n\t        if (!data)\r\n\t            return null;\r\n\t        for (var i = 0; i < data.length; i++)\r\n\t            if ($.inArray(data[i][idx], toRet) == -1)\r\n\t                toRet.push(data[i][idx]);\r\n\t        return toRet;\r\n\t    };\r\n\t    //End column Distincts\r\n\t\r\n\t    DataEdit.prototype.isEditable = function (editable) {\r\n\t        if (typeof (editable) != 'undefined') {\r\n\t            if (editable)\r\n\t                this.$dataEditor.find('#btnAddRow').show();\r\n\t            else\r\n\t                this.$dataEditor.find('#btnAddRow').hide();\r\n\t            this.editEnabled = editable;\r\n\t            this.dataEditor.isEditable(editable);\r\n\t        }\r\n\t        else\r\n\t            return this.editEnabled;\r\n\t    };\r\n\t    DataEdit.prototype.destroy = function () {\r\n\t        amplify.unsubscribe(e.dataEditorValueChanged, this.updateValidation);\r\n\t        amplify.unsubscribe(e.dataEditorRowAdded, this.updateValidation);\r\n\t        amplify.unsubscribe(e.dataEditorRowDeleted, this.updateValidation);\r\n\t        this.$dataEditor.find('#btnAddRow').off('click');\r\n\t        this.dataEditor.destroy();\r\n\t    };\r\n\t\r\n\t    //MultiLang\r\n\t    DataEdit.prototype.doML = function () {\r\n\t        this.$dataEditor.find('#btnAddRow').html(mlRes['add']);\r\n\t    };\r\n\t    //END Multilang\r\n\t\r\n\t    return DataEdit;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;if (false) {\r\n\t    var define = require('amdefine')(module);\r\n\t}\r\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(5),\r\n\t        __webpack_require__(6)\r\n\t    ], __WEBPACK_AMD_DEFINE_RESULT__ = function (i18nEn,i18nFr) {\r\n\t\r\n\t        'use strict';\r\n\t\r\n\t        return {\r\n\t\r\n\t            en: i18nEn,\r\n\t            fr: i18nFr\r\n\t\r\n\t        }\r\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/*global define*/\r\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\r\n\t\r\n\t    'use strict';\r\n\t\r\n\t    return  {\r\n\t        //\"ok\": \"Ok\",\r\n\t        //\"cancel\": \"Cancel\",\r\n\t        \"confirmDelete\": \"Delete?\",\r\n\t        \"unsavedData\": \"Some changes are unsaved, cancel anyway?\",\r\n\t        //\"yearInterval\": \"Year must be a number \",\r\n\t        //\"monthInterval\": \"Month must be a number (1..12)\",\r\n\t\r\n\t        \"nullKey\": \"Key fields cannot be empty\",\r\n\t        \"sameKeyVals\": \"Key fields cannot be duplicated\",\r\n\t        \"unknownCode\": \"Unknown code\",\r\n\t        \"invalidYear\": \"Year is not valid\",\r\n\t        \"invalidMonth\": \"Month is not valid\",\r\n\t        \"invalidDate\": \"Date is not valid\",\r\n\t        \"invalidNumber\": \"Number is not valid\",\r\n\t        \"invalidBool\": \"Boolean is not valid\",\r\n\t\r\n\t        \"NAN\": \"Value is not a number\",\r\n\t        \"OutOfRange\": \"Value is out of the allowed range\",\r\n\t        \"Null\": \"Value cannot be blank\"\r\n\t    }\r\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/*global define*/\r\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\r\n\t\r\n\t    'use strict';\r\n\t\r\n\t    return {\r\n\t\r\n\t        //\"ok\": \"Ok\",\r\n\t        //\"cancel\": \"Annuler\",\r\n\t        \"confirmDelete\": \"Supprimer?\",\r\n\t        \"unsavedData\": \"Certains changements n'ont pas été enregistrés, annuler quand même?\",\r\n\t        //\"yearInterval\": \"L'année doit être numérique\",\r\n\t        //\"monthInterval\": \"Le mois doit être numérique (1..12)\",\r\n\t\r\n\t        \"nullKey\": \"Les champs clés ne peuvent pas être vides\",\r\n\t        \"sameKeyVals\": \"Les champs clés ne peuvent pas être dupliqués\",\r\n\t        \"unknownCode\": \"Code inconnu\",\r\n\t        \"invalidYear\": \"L'année n'est pas valable\",\r\n\t        \"invalidMonth\": \"Le mois n'est pas valable\",\r\n\t        \"invalidDate\": \"La date n'est pas valable\",\r\n\t        \"invalidNumber\": \"Le nombre n'est pas valable\",\r\n\t        \"invalidBool\": \"Booléen n'est pas valable\",\r\n\t\r\n\t        \"NAN\": \"La valeur n'est pas numérique\",\r\n\t        \"OutOfRange\": \"La valeur est hors de la plage autorisée\",\r\n\t        \"Null\": \"La valeur ne peut pas être vide\"\r\n\t\r\n\t    }\r\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(8),\r\n\t        __webpack_require__(9),\r\n\t        __webpack_require__(23),\r\n\t        __webpack_require__(4),\r\n\t        __webpack_require__(24),\r\n\t        __webpack_require__(25),\r\n\t        __webpack_require__(13)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, log, RowEditorPopup, DataEditorHTML, mlRes, MLUtils, amplify) {\r\n\t        var widgetName = \"DataEditor\";\r\n\t\r\n\t        var defConfig = {\r\n\t            thButtons: \"<th>E</th><th>D</th>\"\r\n\t        };\r\n\t        var e = {\r\n\t            EVT_VALUE_CHANGED: 'valueChanged.' + widgetName + '.fenix',\r\n\t            EVT_ROW_ADDED: 'rowAdded.' + widgetName + '.fenix',\r\n\t            EVT_ROW_DELETED: 'rowDeleted.' + widgetName + '.fenix'\r\n\t        };\r\n\t        var h = {\r\n\t            divDataGrid: '#divDataGrid',\r\n\t            divRowEditorPopup: '#divRowEditorPopup',\r\n\t            btnEditRowCanc: '#btnEditRowCanc',\r\n\t            btnEditRowOk: '#btnEditRowOk',\r\n\t            tblDataBody: '#tblDataBody',\r\n\t            tblDataHead: '#tblDataHead',\r\n\t            editButtonsClass: 'bE',\r\n\t            delButtonsClass: 'bD'\r\n\t        };\r\n\t        var html = {\r\n\t            btnEdit: '<button type=\"button\" class=\"btn btn-default bE\" data-rid=%idx%><span class=\"glyphicon glyphicon-pencil\"></span></button>',\r\n\t            btnDel: '<button type=\"button\" class=\"btn btn-default bD\"data-rid=%idx%><span class=\"glyphicon glyphicon-trash\"></span></button>'\r\n\t        };\r\n\t\r\n\t        var COLOR_ERROR = \"error\";\r\n\t        var COLOR_DEFAULT = \"default\";\r\n\t\r\n\t        var DataEditor = function (config) {\r\n\t            this.config = {};\r\n\t            $.extend(true, this.config, config, defConfig);\r\n\t\r\n\t            this.rowEditor = new RowEditorPopup();\r\n\t\r\n\t            this.$cnt;\r\n\t            this.$editWindow;\r\n\t            this.$dataGrid;\r\n\t            this.cols;\r\n\t            this.codelists;\r\n\t            this.data = [];\r\n\t            this.$tBody;\r\n\t            this.editEnabled = true;\r\n\t\r\n\t            this.lang = 'EN';\r\n\t            this.lang = this.lang.toLowerCase();\r\n\t        };\r\n\t\r\n\t        //Render - creation\r\n\t        DataEditor.prototype.render = function (container, config, callB) {\r\n\t            $.extend(true, this.config, config);\r\n\t\r\n\t            this.$cnt = container;\r\n\t            this.$cnt.html(DataEditorHTML);\r\n\t            this.$dataGrid = this.$cnt.find(h.divDataGrid);\r\n\t\r\n\t            this.$editWindow = this.$cnt.find(h.divRowEditorPopup);\r\n\t            this.rowEditor.render(this.$editWindow);\r\n\t\r\n\t            if (localStorage.getItem('locale'))\r\n\t                this.lang = localStorage.getItem('locale');\r\n\t\r\n\t            /*\r\n\t            var me = this;\r\n\t            this.$cnt.find(h.btnEditRowCanc).on('click', function () {\r\n\t                me.$editWindow.modal('hide');\r\n\t            });\r\n\t            this.$cnt.find(h.btnEditRowOk).on('click', function () { me.rowEditOk(); });\r\n\t            this.$editWindow.on('hidden.bs.modal', function (e) {\r\n\t                me.rowEditor.reset();\r\n\t                me.$editWindow.off(\"keyup\");\r\n\t            });\r\n\t            */\r\n\t            this._bindEvents();\r\n\t            this.$tBody = this.$cnt.find(h.tblDataBody);\r\n\t\r\n\t            this._doML();\r\n\t            if (callB) callB();\r\n\t\r\n\t            log.info(\"DataEditor rendered\", this.config);\r\n\t        }\r\n\t\r\n\t        DataEditor.prototype.setColumns = function (cols, codelists, callB) {\r\n\t            this.cols = cols;\r\n\t            this.codelists = convertCodelists(codelists, this.lang);\r\n\t            if (!cols) {\r\n\t                return;\r\n\t            }\r\n\t            //The table\r\n\t            this.updateTableHeader();\r\n\t\r\n\t            //The row editor\r\n\t            this.rowEditor.setColumns(this.cols, this.codelists);\r\n\t            if (callB) callB();\r\n\t        };\r\n\t        var createTH = function (label) {\r\n\t            return '<th>' + label + '</th>';\r\n\t        };\r\n\t\r\n\t        DataEditor.prototype._showEditWindow = function (row) {\r\n\t            log.info(\"_showEditWindow\", row);\r\n\t            this.$editWindow.modal('show');\r\n\t            this.rowEditor.reset();\r\n\t            if (row)\r\n\t                this.rowEditor.setRow(row);\r\n\t\r\n\t            var me = this;\r\n\t            this.$editWindow.on(\"keyup\", function (evt) {\r\n\t                if (evt.keyCode == 13) {\r\n\t                    me.rowEditOk();\r\n\t                }\r\n\t            });\r\n\t        };\r\n\t\r\n\t        DataEditor.prototype._bindEvents = function () {\r\n\t            log.info(\"Data Editor - _bindEvents\");\r\n\t            var me = this;\r\n\t            this.$cnt.find(h.btnEditRowCanc).on('click', function () {\r\n\t                if (me.rowEditor.changed()) {\r\n\t                    if (!confirm(mlRes[me.lang]['unsavedData']))\r\n\t                        return;\r\n\t                }\r\n\t                me.$editWindow.modal('hide');\r\n\t            });\r\n\t            this.$cnt.find(h.btnEditRowOk).on('click', function () { me.rowEditOk(); });\r\n\t            this.$editWindow.on('hidden.bs.modal', function (e) {\r\n\t                me.rowEditor.reset();\r\n\t                me.$editWindow.off(\"keyup\");\r\n\t            });\r\n\t        };\r\n\t\r\n\t        DataEditor.prototype._unbindEvents = function () {\r\n\t            this.$cnt.find(h.btnEditRowCanc).off('click');\r\n\t            this.$cnt.find(h.btnEditRowOk).off('click');\r\n\t            this.$editWindow.off('hidden.bs.modal');\r\n\t            this.$tBody.find('.' + h.editButtonsClass).off('click');\r\n\t            this.$tBody.find('.' + h.delButtonsClass).off('click');\r\n\t        };\r\n\t\r\n\t        DataEditor.prototype.destroy = function () {\r\n\t            this._unbindEvents();\r\n\t            this.rowEditor.destroy();\r\n\t            this.$tBody.html('');\r\n\t        };\r\n\t\r\n\t        DataEditor.prototype.rowEditOk = function () {\r\n\t            if (!this.rowEditor.isValid()) {\r\n\t                this.rowEditor.updateValidationHelp();\r\n\t                return;\r\n\t            }\r\n\t            var row = this.rowEditor.getRow();\r\n\t            if (row.uid != -1) {//Edit\r\n\t                this.data[row.uid] = row.data;\r\n\t                var evtArgs = {};\r\n\t                evtArgs.newData = row.data;\r\n\t                evtArgs.allData = this.data;\r\n\t                amplify.publish(e.EVT_VALUE_CHANGED, evtArgs);\r\n\t            }\r\n\t            else {//New\r\n\t                this.data.push(row.data);\r\n\t\r\n\t                var evtArgs = {};\r\n\t                evtArgs.allData = this.data;\r\n\t                amplify.publish(e.EVT_ROW_ADDED, evtArgs);\r\n\t            }\r\n\t\r\n\t            //DO NOT UPDATE ALL THE TABLE!!!\r\n\t            this.updateTable();\r\n\t            this.$editWindow.modal('hide');\r\n\t        }\r\n\t\r\n\t        DataEditor.prototype.newRow = function () {\r\n\t            this._showEditWindow(null);\r\n\t        }\r\n\t\r\n\t        DataEditor.prototype.isEditable = function (editable) {\r\n\t            console.log(\"isEditable\",editable)\r\n\t            this.editEnabled = editable;\r\n\t            if (!this.cols)\r\n\t                return;\r\n\t            if (typeof (editable) == 'undefined')\r\n\t                return this.editEnabled;\r\n\t            this.updateTableHeader();\r\n\t            this.updateTable();\r\n\t        }\r\n\t\r\n\t        //DATA\r\n\t        DataEditor.prototype.setData = function (data) {\r\n\t            if (!this.cols)\r\n\t                throw new Error(\"Cannot set data without table structure, use setColumns before setData\");\r\n\t            if (!data)\r\n\t                return;\r\n\t            this.data = data;\r\n\t            this.updateTable();\r\n\t        };\r\n\t\r\n\t        DataEditor.prototype.removeAllData = function () {\r\n\t            this.data = [];\r\n\t            this.updateTable();\r\n\t        };\r\n\t        DataEditor.prototype.updateTableHeader = function () {\r\n\t\r\n\t            var tHead = this.$cnt.find(h.tblDataHead);\r\n\t            tHead.html('');\r\n\t            //tHead.append('<th style=\"display:none;\"></th>');\r\n\t            tHead.append('<th>#</th>');\r\n\t            for (var i = 0; i < this.cols.length; i++) {\r\n\t                //MLUtils get multilanguage string\r\n\t                tHead.append(createTH(this.cols[i].title[this.lang.toUpperCase()]));\r\n\t            }\r\n\t            if (this.editEnabled) tHead.append(this.config.thButtons);\r\n\t\r\n\t        };\r\n\t        DataEditor.prototype.updateTable = function () {\r\n\t            this.$tBody.html('');\r\n\t            if (!this.data)\r\n\t                return;\r\n\t            for (var i = 0; i < this.data.length; i++) {\r\n\t                this.$tBody.append(createTblRow(i, this.cols, this.codelists, this.data[i], this.editEnabled));\r\n\t            }\r\n\t            //Attach all the events\r\n\t            if (this.editEnabled) {\r\n\t                var me = this;\r\n\t                this.$tBody.find('.' + h.editButtonsClass).on('click', function () {\r\n\t                    var rowId = $(this).data('rid');\r\n\t                    me._showEditWindow({ uid: rowId, data: me.data[rowId] });\r\n\t                });\r\n\t                this.$tBody.find('.' + h.delButtonsClass).on('click', function () {\r\n\t                    var res = confirm(mlRes[this.lang]['confirmDelete']);\r\n\t                    if (!res)\r\n\t                        return;\r\n\t                    me.deleteRow($(this).data('rid'));\r\n\t                });\r\n\t            }\r\n\t        };\r\n\t        DataEditor.prototype.deleteRow = function (index) {\r\n\t            this.data.splice(index, 1);\r\n\t            this.updateTable();\r\n\t            amplify.publish(e.EVT_ROW_DELETED, this.data);\r\n\t        };\r\n\t        DataEditor.prototype.getRowByRowId = function (rowId) {\r\n\t            //Test which one is faster\r\n\t            /*return this.$tBody.find('tr td:first-child').filter(function () {\r\n\t                console.log($(this).html()==rowId);\r\n\t                return ($(this).html() == rowId);\r\n\t            }).closest('tr');*/\r\n\t\r\n\t            var rows = this.$tBody.find('tr');\r\n\t            for (var i = 0; i < rows.length; i++) {\r\n\t                if (rowId == $(rows[i]).find('td:first').html())\r\n\t                    return $(rows[i]);\r\n\t            };\r\n\t            return null;\r\n\t        };\r\n\t\r\n\t        function createTblRow(idx, cols, codelists, row, editControls) {\r\n\t\r\n\t            var toRet = '<tr>';\r\n\t            //toRet += '<td style=\"display:none;\">' + idx + '</td>'\r\n\t            toRet += '<td>' + idx + '</td>'\r\n\t            for (var i = 0; i < cols.length; i++) { //was row.lenght\r\n\t                toRet += '<td>';\r\n\t                if (row[i] === null)\r\n\t                    toRet += '';\r\n\t                else if (cols[i].dataType == 'code')\r\n\t                    toRet += addLabelToData(cols[i], codelists, row[i], this.lang);\r\n\t                else {\r\n\t                    toRet += row[i];\r\n\t                }\r\n\t                toRet += '</td>';\r\n\t            }\r\n\t            if (editControls) {\r\n\t                toRet += '<td>' + html.btnEdit.replace('%idx%', idx) + '</td>';\r\n\t                toRet += '<td>' + html.btnDel.replace('%idx%', idx) + '</td>';\r\n\t            }\r\n\t            toRet += '</tr>';\r\n\t            return toRet;\r\n\t        };\r\n\t        var getCodelistUid = function (domain) {\r\n\t            //Make it handle multiple codelsits\r\n\t            var cListUid = domain.codes[0].idCodeList;\r\n\t            if (domain.codes[0].version) cListUid += \"|\" + domain.codes[0].version;\r\n\t            return cListUid;\r\n\t        };\r\n\t        function addLabelToData(col, codelists, data) {\r\n\t            //TODO Make it handle multiple Codelists\r\n\t        //    console.log(\"addLabelToData\",col, codelists, data);\r\n\t            var cListUID = getCodelistUid(col.domain);\r\n\t        //    console.log(cListUID);\r\n\t            var lbl = getCodeLabel(codelists[cListUID].data, data);\r\n\t            if (lbl === null) return '';\r\n\t            return lbl;\r\n\t        };\r\n\t        var getCodeLabel = function (codes, code) {\r\n\t            if (!codes)\r\n\t                return null;\r\n\t            for (var i = 0; i < codes.length; i++)\r\n\t                if (codes[i].code == code)\r\n\t                    //return codes[i].title + \" [\" + code + \"]\";\r\n\t                    return codes[i].title;\r\n\t            return null;\r\n\t        };\r\n\t\r\n\t        DataEditor.prototype.getData = function () {\r\n\t            log.info(\"getData \", this.data)\r\n\t            return this.data;\r\n\t        }\r\n\t        //END Data\r\n\t\r\n\t\r\n\t        //Validation results\r\n\t        DataEditor.prototype.showValidationResults = function (valRes) {\r\n\t\r\n\t            /* this.resetValidationResults();\r\n\t             if (!valRes)\r\n\t                 return;\r\n\t             for (var i = 0; i < valRes.length; i++) {\r\n\t                 if (valRes[i].colId)\r\n\t                     this.setCellError(valRes[i].dataIndex, valRes[i].colId);\r\n\t                 else\r\n\t                     this.setRowError(valRes[i].dataIndex, valRes[i].colId);\r\n\t             }*/\r\n\t\r\n\t\r\n\t            /* this.resetValidationResults();\r\n\t        \r\n\t             if (!valRes)\r\n\t                 return;\r\n\t             for (var i = 0; i < valRes.length; i++) {\r\n\t                 if (valRes[i].colId)\r\n\t                     this.setCellColor(valRes[i].dataIndex, valRes[i].colId, COLOR_ERROR);\r\n\t                 else\r\n\t                     this.setRowColor(valRes[i].dataIndex, COLOR_ERROR);\r\n\t             }*/\r\n\t        }\r\n\t\r\n\t        DataEditor.prototype.resetValidationResults = function () {\r\n\t            /*var rowCount = this.$dataGrid.jqxGrid('getrows').length;\r\n\t            for (var i = 0; i < rowCount; i++)\r\n\t                this.setRowColor(i, COLOR_DEFAULT);*/\r\n\t        }\r\n\t\r\n\t        DataEditor.prototype.setRowColor = function (rowIdx, color) {\r\n\t            /*var cols = this.$dataGrid.jqxGrid('columns');\r\n\t        \r\n\t            for (var i = 0; i < cols.records.length; i++)\r\n\t                this.setCellColor(rowIdx, cols.records[i].datafield, color);*/\r\n\t        }\r\n\t\r\n\t        DataEditor.prototype.setCellColor = function (rowIdx, colId, color) {\r\n\t            /*var htmlRows = this.$dataGrid.find(\"div[role='row']\");\r\n\t            var htmlRow = htmlRows[rowIdx];\r\n\t            var colIdx = this.$dataGrid.jqxGrid('getcolumnindex', colId);\r\n\t            var tds = $(htmlRow).find(\"div[role='gridcell']\");\r\n\t            this.changeCellBackgroundColor(tds[colIdx], color);*/\r\n\t        }\r\n\t        DataEditor.prototype.setCellError = function (rowIdx, colId) {\r\n\t            /*var colIndex = -1;\r\n\t            for (var i = 0; i < this.cols.length; i++) {\r\n\t                if (colId == this.cols[i]) {\r\n\t                    colIndex = i;\r\n\t                }\r\n\t            }\r\n\t            var row = $tBody.find('td:first');\r\n\t            console.log(row);*/\r\n\t\r\n\t\r\n\t        };\r\n\t\r\n\t        DataEditor.prototype.changeCellBackgroundColor = function (htmlCell, color) {\r\n\t            /*if (color == COLOR_ERROR)\r\n\t                $(htmlCell).addClass(\"fx-red-cell\");\r\n\t            else if (color == COLOR_DEFAULT)\r\n\t                $(htmlCell).removeClass(\"fx-red-cell\");*/\r\n\t        }\r\n\t\r\n\t        //END Validation results\r\n\t\r\n\t        //Codelists helpers\r\n\t        function convertCodelists(codelists, lang) {\r\n\t            var toRet = {};\r\n\t            for (var cl in codelists) {\r\n\t                toRet[cl] = { metadata: {} };\r\n\t                toRet[cl].data = convertCodes(codelists[cl].data, lang);\r\n\t            }\r\n\t            return toRet;\r\n\t        }\r\n\t        //number of levels for a codelist is not always available.\r\n\t        //Always call the recursive flatten\r\n\t        function convertCodes(codes, lang) {\r\n\t            if (!codes)\r\n\t                return null;\r\n\t            var toRet = [];\r\n\t            recFlatten(codes, toRet, lang)\r\n\t            return toRet;\r\n\t        }\r\n\t        /*function convertCodes(levels, codes, lang) {\r\n\t            if (!codes)\r\n\t                return null;\r\n\t            var toRet = [];\r\n\t            if (levels == 1) {\r\n\t                for (var i = 0; i < codes.length; i++)\r\n\t                    toRet.push(convertCode(codes[i], lang));\r\n\t            }\r\n\t            else {\r\n\t                recFlatten(codes, toRet, lang)\r\n\t            }\r\n\t            return toRet;\r\n\t        }*/\r\n\t        function recFlatten(node, list, lang) {\r\n\t            if (!node)\r\n\t                return;\r\n\t            for (var i = 0; i < node.length; i++) {\r\n\t                list.push(convertCode(node[i], lang));\r\n\t                if (node[i].children)\r\n\t                    recFlatten(node[i].children, list);\r\n\t            }\r\n\t        }\r\n\t        function convertCode(code, lang) {\r\n\t\r\n\t            var MLUtils_getAvailableLang = function (ml, lang) {\r\n\t                if (!ml)\r\n\t                    return \"\";\r\n\t                if (!lang)\r\n\t                    lang = 'EN';\r\n\t                lang = lang.toUpperCase();\r\n\t                if (lang in ml)\r\n\t                    return lang;\r\n\t                if ('EN' in ml)\r\n\t                    return 'EN';\r\n\t                for (var langs in ml)\r\n\t                    return langs;\r\n\t            }\r\n\t\r\n\t            return {\r\n\t                level: code.level,\r\n\t                title: code.title[MLUtils_getAvailableLang(code.title,lang)] + \" [\" + code.code + \"]\",\r\n\t                code: code.code\r\n\t            };\r\n\t        }\r\n\t        //End Codelists helpers\r\n\t\r\n\t        DataEditor.prototype._doML = function () {\r\n\t        }\r\n\t\r\n\t        return DataEditor;\r\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(8),\r\n\t        __webpack_require__(4),\r\n\t        __webpack_require__(10)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, log, MLRes, reFactory) {\r\n\t    var widgetName = \"DataEditorPopup\";\r\n\t    var yMax = 3000;\r\n\t    var yMin = 0;\r\n\t\r\n\t    var defConfig = { YMin: 0, YMax: 3000, decimalDigits: 5 };\r\n\t    var reFactory = new reFactory();\r\n\t\r\n\t    var RowEditorPopup = function (config) {\r\n\t        this.config = {};\r\n\t        $.extend(true, this.config, defConfig, config);\r\n\t\r\n\t        this.$window;\r\n\t        this.cols;\r\n\t        this.codelists;\r\n\t\r\n\t        this.lang = 'EN';\r\n\t        if (localStorage.getItem('locale'))\r\n\t            this.lang = localStorage.getItem('locale');\r\n\t\r\n\t        this.lang = this.lang.toLowerCase();\r\n\t\r\n\t        this.editors = [];\r\n\t        this.uidInEdit = -1;\r\n\t\r\n\t        this.oldVal = null;\r\n\t    };\r\n\t\r\n\t    RowEditorPopup.prototype.render = function (container, config) {\r\n\t        $.extend(true, this.config, config);\r\n\t        this.$window = container;\r\n\t\r\n\t    }\r\n\t    RowEditorPopup.prototype.setColumns = function (cols, codelists) {\r\n\t        this.cols = cols;\r\n\t        this.codelists = codelists;\r\n\t        if (!cols) {\r\n\t            return;\r\n\t        }\r\n\t        this.createStrucure();\r\n\t    }\r\n\t\r\n\t    RowEditorPopup.prototype.createStrucure = function () {\r\n\t        this.editors = [];\r\n\t\r\n\t        var $tbl = this.$window.find('#tblRowEditor');\r\n\t        var tBody = $tbl.find('tbody');\r\n\t        var toAppend;\r\n\t        for (var i = 0; i < this.cols.length; i++) {\r\n\t            toAppend = '<tr>';\r\n\t            toAppend += '<td>' + this.cols[i].title[this.lang.toUpperCase()] + '</td>';\r\n\t            toAppend += '<td><div id=\"' + generateEditFiledId(this.cols[i].id) + '\"></div></td>';\r\n\t            toAppend += '</tr>';\r\n\t            tBody.append(toAppend);\r\n\t        }\r\n\t        for (var i = 0; i < this.cols.length; i++) {\r\n\t            var col = this.cols[i];\r\n\t            var cnt = tBody.find('#' + generateEditFiledId(col.id));\r\n\t            var cfg = null;\r\n\t            this.editors[i] = reFactory.create(col.dataType, cfg);\r\n\t\r\n\t            switch (col.dataType) {\r\n\t                case 'code':\r\n\t                    var codelistUid = col.domain.codes[0].idCodeList;\r\n\t                    if (col.domain.codes[0].version)\r\n\t                        codelistUid += \"|\" + col.domain.codes[0].version;\r\n\t                    this.editors[i].render(cnt, null, [this.codelists[codelistUid]]);\r\n\t                    break;\r\n\t                case 'customCode':\r\n\t                    //ADD custom code edit\r\n\t                    break;\r\n\t                case 'year':\r\n\t                    var yMin = this.config.YMin;\r\n\t                    var yMax = this.config.YMax;\r\n\t                    if (col.domain && col.domain.period) {\r\n\t                        yMin = col.domain.period.from;\r\n\t                        yMax = col.domain.period.to;\r\n\t                    }\r\n\t                    this.editors[i].render(cnt, { yMin: yMin, yMax: yMax });\r\n\t                    break;\r\n\t                case 'number':\r\n\t                case 'percentage':\r\n\t                    this.editors[i].render(cnt, { decimalDigits: this.config.decimalDigits });\r\n\t                    break;\r\n\t                case 'month':\r\n\t                case 'date':\r\n\t                case 'text':\r\n\t                case 'bool':\r\n\t                    this.editors[i].render(cnt, null);\r\n\t                    break;\r\n\t            }\r\n\t            if (col.key)\r\n\t                this.editors[i].isMandatory(true);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function generateEditFiledId(id) {\r\n\t        return 'trRowEdit_' + id;\r\n\t    }\r\n\t    RowEditorPopup.prototype.reset = function (row) {\r\n\t        log.info(\"RowEditorPopup - reset\", this.editors, this.cols.length)\r\n\t        this.uidInEdit = -1;\r\n\t        if (!this.cols) return;\r\n\t        for (var i = 0; i < this.cols.length; i++) {\r\n\t            this.editors[i].reset();\r\n\t        }\r\n\t        this.oldVal = null;\r\n\t    }\r\n\t\r\n\t    RowEditorPopup.prototype.updateValidationHelp = function () {\r\n\t        if (!this.cols)\r\n\t            return;\r\n\t        for (var i = 0; i < this.cols.length; i++) {\r\n\t            if (this.editors[i].updateValidationHelp)\r\n\t                this.editors[i].updateValidationHelp();\r\n\t        }\r\n\t    }\r\n\t\r\n\t    RowEditorPopup.prototype.isValid = function () {\r\n\t        for (var i = 0; i < this.cols.length; i++)\r\n\t            if (!this.editors[i].isValid())\r\n\t                return false;\r\n\t        return true;\r\n\t    }\r\n\t\r\n\t    RowEditorPopup.prototype.setRow = function (row) {\r\n\t        log.info(\"setRow\", row)\r\n\t        this.reset();\r\n\t        if (!this.cols)\r\n\t            throw new Error('cannot set row when columns are null');\r\n\t        this.oldVal = row;\r\n\t        if (row.uid != 'undefined')\r\n\t            this.uidInEdit = row.uid;\r\n\t        else\r\n\t            this.uidInEdit = -1;\r\n\t        for (var i = 0; i < this.cols.length; i++)\r\n\t            if (this.editors[i]) {\r\n\t                this.editors[i].setValue(row.data[i]);\r\n\t            }\r\n\t            else\r\n\t                throw new Error('Editor cannot be null for dataType ' + this.cols[i].dataType);\r\n\t    }\r\n\t    RowEditorPopup.prototype.getRow = function (row) {\r\n\t        if (!this.cols)\r\n\t            throw new Error('cannot get row when columns are null');\r\n\t        var toRet = { uid: this.uidInEdit, data: [] };\r\n\t        for (var i = 0; i < this.cols.length; i++) {\r\n\t            var val = this.editors[i].getValue();\r\n\t            if (!val)\r\n\t                toRet.data[i] = null;\r\n\t            else if (this.cols[i].dataType == 'number' || this.cols[i].dataType == 'percentage')\r\n\t                toRet.data[i] = parseFloat(val);\r\n\t            else\r\n\t                toRet.data[i] = val;\r\n\t        }\r\n\t        return toRet;\r\n\t    };\r\n\t\r\n\t    RowEditorPopup.prototype.changed = function () {\r\n\t        var newVal = this.getRow();\r\n\t\r\n\t        if (this.oldVal == null) {\r\n\t            for (var i = 0; i < this.cols.length; i++) {\r\n\t                if (newVal.data[i] != '')\r\n\t                    return true;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            for (var i = 0; i < this.cols.length; i++) {\r\n\t                if (newVal.data[i] != this.oldVal.data[i])\r\n\t                    return true;\r\n\t            }\r\n\t        }\r\n\t        return false;\r\n\t    };\r\n\t    RowEditorPopup.prototype.destroy = function () {\r\n\t        if (!this.cols)\r\n\t            return;\r\n\t        for (var i = 0; i < this.cols.length; i++)\r\n\t            this.editors[i].destroy();\r\n\t    }\r\n\t\r\n\t    return RowEditorPopup;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(11),\r\n\t        __webpack_require__(14),\r\n\t        __webpack_require__(15),\r\n\t        __webpack_require__(19),\r\n\t        __webpack_require__(20),\r\n\t        __webpack_require__(21),\r\n\t        __webpack_require__(22)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, reBool, reCode, reDate, reMonth, reNumber, reString, reYear) {\r\n\t    var defConfig = {};\r\n\t\r\n\t    var RowEditorFactory = function (config) {\r\n\t        this.config = {};\r\n\t        $.extend(true, this.config, defConfig, config);\r\n\t    };\r\n\t\r\n\t    RowEditorFactory.prototype.create = function (id, config) {\r\n\t        switch (id) {\r\n\t            case 'code':\r\n\t                return new reCode(config);\r\n\t                break;\r\n\t            case 'customCode':\r\n\t                //return new reCustomCode();\r\n\t                break;\r\n\t            case 'year':\r\n\t                return new reYear(config);\r\n\t                break;\r\n\t            case 'month':\r\n\t                return new reMonth(config);\r\n\t                break;\r\n\t            case 'date':\r\n\t                return new reDate(config);\r\n\t                break;\r\n\t            case 'number':\r\n\t            case 'percentage':\r\n\t                return new reNumber(config);\r\n\t                break;\r\n\t            case 'text':\r\n\t                return new reString(config);\r\n\t                break;\r\n\t            case 'bool':\r\n\t                return new reBool(config);\r\n\t                break;\r\n\t        }\r\n\t    }\r\n\t\r\n\t    return RowEditorFactory;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(4),\r\n\t        __webpack_require__(12),\r\n\t        __webpack_require__(13)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, mlRes, rowEditorBase) {\r\n\t    var defConfig = {};\r\n\t\r\n\t    var RowEditor_bool = function (config) {\r\n\t        this.parent.constructor.call(this, config);\r\n\t    };\r\n\t    RowEditor_bool.prototype = Object.create(rowEditorBase.prototype);\r\n\t    RowEditor_bool.prototype.constructor = RowEditor_bool;\r\n\t    RowEditor_bool.prototype.parent = rowEditorBase.prototype;\r\n\t\r\n\t    RowEditor_bool.prototype.render = function (container, config) {\r\n\t        $.extend(true, this.config, config);\r\n\t        this.$cnt = container;\r\n\t        var html = '<input type=\"checkbox\" />';\r\n\t        this.$cnt.html(html);\r\n\t        var me = this;\r\n\t        var $chk = this.$cnt.find('input');\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t        //WAIT for the CSS to be fixed and remove this\r\n\t        $chk.show();\r\n\t\r\n\t\r\n\t\r\n\t        $chk.on('click', function () { me.updateValidationHelp(); });\r\n\t    }\r\n\t    RowEditor_bool.prototype.destroy = function () { this.$cnt.find('input').off('click'); }\r\n\t\r\n\t    RowEditor_bool.prototype.updateValidationHelp = function () {\r\n\t        var error = this.validate();\r\n\t        this.parent.updateValidationHelp.call(this, error);\r\n\t    }\r\n\t    RowEditor_bool.prototype.reset = function () {\r\n\t        this.$cnt.find('input').prop('checked', false);\r\n\t        this.$cnt.popover('destroy');\r\n\t    }\r\n\t    RowEditor_bool.prototype.setValue = function (val) {\r\n\t        this.reset();\r\n\t        this.$cnt.find('input').prop('checked', val);\r\n\t    }\r\n\t    RowEditor_bool.prototype.getValue = function () {\r\n\t        return this.$cnt.find('input').prop('checked');\r\n\t    }\r\n\t    RowEditor_bool.prototype.isMandatory = function (m) {\r\n\t        if (m == 'undefined')\r\n\t            return this.mandatory;\r\n\t        this.mandatory = m;\r\n\t    }\r\n\t    RowEditor_bool.prototype.validate = function () {\r\n\t        /*var val = this.getValue();\r\n\t        var toRet = [];\r\n\t        if (this.mandatory && !val)\r\n\t            return this.ERROR_NULL;*/\r\n\t        return null;\r\n\t    }\r\n\t    RowEditor_bool.prototype.isValid = function () {\r\n\t        if (this.validate() == null)\r\n\t            return true;\r\n\t        return false;\r\n\t    }\r\n\t\r\n\t    return RowEditor_bool;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(4),\r\n\t        __webpack_require__(13)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, mlRes) {\r\n\t    var defConfig = {};\r\n\t\r\n\t    var RowEditor_base = function (config) {\r\n\t        this.config = {};\r\n\t        $.extend(true, this.config, defConfig, config);\r\n\t        this.$cnt;\r\n\t        this.mandatory = false;\r\n\t\r\n\t        this.ERROR_NAN = \"NAN\";\r\n\t        this.ERROR_OUT_OF_RANGE = \"OutOfRange\";\r\n\t        this.ERROR_NULL = \"Null\";\r\n\t    };\r\n\t    RowEditor_base.prototype.updateValidationHelp = function () {\r\n\t        var error = this.validate();\r\n\t        if (error == null) {\r\n\t            this.$cnt.popover('destroy');\r\n\t        }\r\n\t        else {\r\n\t            var errMSG = mlRes[error];\r\n\t            this.$cnt.popover({ container: this.$cnt, content: errMSG, html: true });\r\n\t            this.$cnt.popover('show');\r\n\t        }\r\n\t        /*if (error == null) {\r\n\t            this.$cnt.popover('destroy');\r\n\t        }\r\n\t        else {\r\n\t            var errMSG = mlRes[error];\r\n\t            this.$cnt.popover({ container: this.$cnt, content: errMSG, html: true });\r\n\t            this.$cnt.popover('show');\r\n\t        }*/\r\n\t    };\r\n\t    RowEditor_base.prototype.isMandatory = function (m) {\r\n\t        if (m == 'undefined')\r\n\t            return this.mandatory;\r\n\t        this.mandatory = m;\r\n\t    };\r\n\t    RowEditor_base.prototype.isValid = function () {\r\n\t        if (this.validate() == null)\r\n\t            return true;\r\n\t        return false;\r\n\t    }\r\n\t    return RowEditor_base;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(4),\r\n\t        __webpack_require__(12),\r\n\t        __webpack_require__(13)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, mlRes, rowEditorBase) {\r\n\t    var defConfig = {\r\n\t        elemCode: '<select class=\"%class%\"></select>',\r\n\t        elemClass: \"form-control\",\r\n\t        optionCode: '<span class=\"cl_lev%lev%\">%label%</span>',\r\n\t        emptyEntryValue: \"-\",\r\n\t        emptyEntryLabel: \"-\"\r\n\t    };\r\n\t\r\n\t    var RowEditor_code = function (config) {\r\n\t        this.parent.constructor.call(this, config);\r\n\t        $.extend(true, this.config, defConfig);\r\n\t        this.codelists;\r\n\t        this.$ddl;\r\n\t    }\r\n\t    RowEditor_code.prototype = Object.create(rowEditorBase.prototype);\r\n\t    RowEditor_code.prototype.constructor = RowEditor_code;\r\n\t    RowEditor_code.prototype.parent = rowEditorBase.prototype;\r\n\t\r\n\t    RowEditor_code.prototype.render = function (container, config, codelists) {\r\n\t        $.extend(true, this.config, config);\r\n\t        this.$cnt = container;\r\n\t        this.codelists = codelists;\r\n\t        this.createEditor();\r\n\t    }\r\n\t\r\n\t    RowEditor_code.prototype.createEditor = function () {\r\n\t        var e = defConfig.elemCode.replace('%class%', defConfig.elemClass);\r\n\t        this.$ddl = $(e);\r\n\t        //Err?\r\n\t        if (!this.codelists || !this.codelists[0] || !this.codelists[0].data)\r\n\t            return;\r\n\t        var toApp = $('<option></option>');\r\n\t        toApp.val(this.config.emptyEntryValue);\r\n\t        toApp.html(this.config.emptyEntryLabel);\r\n\t        this.$ddl.append(toApp);\r\n\t\r\n\t        for (var i = 0; i < this.codelists[0].data.length; i++) {\r\n\t            toApp = $('<option></option>').val(this.codelists[0].data[i].code);\r\n\t            toApp.html(_getTitle(this.codelists[0].metadata.levels, this.codelists[0].data[i].level, this.codelists[0].data[i].title));\r\n\t            this.$ddl.append(toApp);\r\n\t        }\r\n\t        this.$cnt.append(this.$ddl);\r\n\t        this._bindEvents();\r\n\t    };\r\n\t\r\n\t    function _getTitle(levels, level, label) {\r\n\t        if (levels == 0)\r\n\t            return title;\r\n\t        var toRet = defConfig.optionCode;\r\n\t        toRet = toRet.replace('%lev%', level);\r\n\t        var blanks = \"\";\r\n\t        switch (level) {\r\n\t            case 2:\r\n\t                blanks = \"&nbsp;\";\r\n\t                break;\r\n\t            case 3:\r\n\t                blanks = \"&nbsp;&nbsp;\";\r\n\t                break;\r\n\t            case 4:\r\n\t                blanks = \"&nbsp;&nbsp;&nbsp;\";\r\n\t                break;\r\n\t            default:\r\n\t                blanks = \"&nbsp;&nbsp;&nbsp;&nbsp;\";\r\n\t                break;\r\n\t        }\r\n\t        return toRet.replace('%label%', blanks + \"\" + label);\r\n\t    };\r\n\t\r\n\t    RowEditor_code.prototype._bindEvents = function () {\r\n\t        var me = this;\r\n\t        this.$cnt.on('select', function () { me.updateValidationHelp(); });\r\n\t    };\r\n\t    RowEditor_code.prototype._unbindEvents = function () {\r\n\t        this.$cnt.off('select');\r\n\t    };\r\n\t\r\n\t    RowEditor_code.prototype.destroy = function () {\r\n\t        this._unbindEvents();\r\n\t        //Is this needed???//this.$cnt.html('');\r\n\t        //this.$cnt.jqxComboBox('destroy');\r\n\t    }\r\n\t    RowEditor_code.prototype.updateValidationHelp = function () {\r\n\t        var error = this.validate();\r\n\t        this.parent.updateValidationHelp.call(this, error);\r\n\t    }\r\n\t    RowEditor_code.prototype.reset = function () {\r\n\t        this.$ddl.val(this.config.emptyEntryValue);\r\n\t        //this.$cnt.jqxComboBox('selectIndex', 0)\r\n\t        //this.$cnt.popover('destroy');\r\n\t    }\r\n\t    RowEditor_code.prototype.setValue = function (val) {\r\n\t        this.reset();\r\n\t        this.$ddl.val(val);\r\n\t        this.updateValidationHelp();\r\n\t    }\r\n\t    RowEditor_code.prototype.getValue = function () {\r\n\t        var toRet = this.$ddl.val();\r\n\t        if (toRet == this.config.emptyEntryValue)\r\n\t            return '';\r\n\t        return toRet;\r\n\t    }\r\n\t    /*RowEditor_code.prototype.getSelectedItem = function () {\r\n\t         //var item = this.$cnt.jqxComboBox('getSelectedItem');\r\n\t         //if (!item)\r\n\t         //    return null;\r\n\t         //return item;\r\n\t    }*/\r\n\t    RowEditor_code.prototype.isMandatory = function (m) {\r\n\t        if (m == 'undefined')\r\n\t            return this.mandatory;\r\n\t        this.mandatory = m;\r\n\t    }\r\n\t    RowEditor_code.prototype.validate = function () {\r\n\t        var val = this.getValue();\r\n\t        if (this.mandatory && !val)\r\n\t            return this.ERROR_NULL;\r\n\t        return null;\r\n\t    }\r\n\t    RowEditor_code.prototype.isValid = function () {\r\n\t        if (this.validate() == null)\r\n\t            return true;\r\n\t        return false;\r\n\t    }\r\n\t\r\n\t    return RowEditor_code;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t\r\n\t\r\n\t/*\r\n\tdefine([\r\n\t        'jquery',\r\n\t        'jqxall',\r\n\t        'i18n!fx-DataEditor/multiLang/DataEditor/nls/ML_DataEdit',\r\n\t        'fx-DataEditor/js/DataEditor/simpleEditors/rE/RowEditor_base',\r\n\t        'bootstrap'\r\n\t],\r\n\tfunction ($, jqx, mlRes, rowEditorBase) {\r\n\t    var defConfig = {};\r\n\t    var emptyEntryValue = \"-\";\r\n\t    var emptyEntryLabel = \"-\";\r\n\t\r\n\t    var RowEditor_code = function (config) {\r\n\t        this.parent.constructor.call(this, config);\r\n\t        this.codelists;\r\n\t    }\r\n\t    RowEditor_code.prototype = Object.create(rowEditorBase.prototype);\r\n\t    RowEditor_code.prototype.constructor = RowEditor_code;\r\n\t    RowEditor_code.prototype.parent = rowEditorBase.prototype;\r\n\t\r\n\t    RowEditor_code.prototype.render = function (container, config, codelists) {\r\n\t        $.extend(true, this.config, config);\r\n\t        this.$cnt = container;\r\n\t        this.codelists = codelists;\r\n\t        this.createEditor();\r\n\t    }\r\n\t    RowEditor_code.prototype.createEditor = function () {\r\n\t        //TODO make it handle multiple codelists\r\n\t        var codesSrc = {\r\n\t            localdata: this.codelists[0].data, datatype: 'array', datafields: [\r\n\t                { name: 'code', type: 'string' },\r\n\t                { name: 'title', type: 'string' },\r\n\t                { name: 'level', type: 'string' }\r\n\t            ]\r\n\t        };\r\n\t        var codesTextDataAdapter = new $.jqx.dataAdapter(codesSrc);\r\n\t\r\n\t        var me = this;\r\n\t        this.$cnt.jqxComboBox({\r\n\t            source: codesTextDataAdapter,\r\n\t            displayMember: 'title',\r\n\t            valueMember: 'code',\r\n\t            promptText: '',\r\n\t            autoComplete: true,\r\n\t            searchMode: 'containsignorecase',\r\n\t            renderer: function (index, label, value) {\r\n\t                if (me.codelists[0].metadata.levels == 1)\r\n\t                    return label;\r\n\t                if (me.codelists[0].data[index]) {\r\n\t                    switch (me.codelists[0].data[index].level) {\r\n\t                        case 1:\r\n\t                            return '<span class=\"cl_lev1\">' + label + '</span>';\r\n\t                            break;\r\n\t                        case 2:\r\n\t                            return '<span class=\"cl_lev2\">&nbsp;' + label + '</span>';\r\n\t                            break;\r\n\t                        case 3:\r\n\t                            return '<span class=\"cl_lev3\">&nbsp;&nbsp;' + label + '</span>';\r\n\t                            break;\r\n\t                        case 4:\r\n\t                            return '<span class=\"cl_lev4\">&nbsp;&nbsp;&nbsp;' + label + '</span>';\r\n\t                            break;\r\n\t                        default:\r\n\t                            return '<span class=\"cl_lev5\">&nbsp;&nbsp;&nbsp;&nbsp;' + label + '</span>';\r\n\t                            break;\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t        });\r\n\t\r\n\t        this.$cnt.jqxComboBox('insertAt', { label: emptyEntryLabel, value: emptyEntryValue }, 0);\r\n\t        this.$cnt.on('select', function () { me.updateValidationHelp(); });\r\n\t    }\r\n\t    RowEditor_code.prototype.destroy = function () {\r\n\t        this.$cnt.jqxComboBox('destroy');\r\n\t        this.$cnt.off('select');\r\n\t    }\r\n\t    RowEditor_code.prototype.updateValidationHelp = function () {\r\n\t        var error = this.validate();\r\n\t        this.parent.updateValidationHelp.call(this, error);\r\n\t    }\r\n\t    RowEditor_code.prototype.reset = function () {\r\n\t        this.$cnt.jqxComboBox('selectIndex', 0)\r\n\t        this.$cnt.popover('destroy');\r\n\t    }\r\n\t    RowEditor_code.prototype.setValue = function (val) {\r\n\t        this.reset();\r\n\t        if (!val)\r\n\t            val = emptyEntryValue;\r\n\t        var items = this.$cnt.jqxComboBox('getItems');\r\n\t        for (var i = 0; i < items.length; i++)\r\n\t            if (items[i].value == val) {\r\n\t                this.$cnt.jqxComboBox('selectIndex', i);\r\n\t            }\r\n\t        this.updateValidationHelp();\r\n\t    }\r\n\t    RowEditor_code.prototype.getValue = function () {\r\n\t        var item = this.$cnt.jqxComboBox('getSelectedItem');\r\n\t        if (!item)\r\n\t            return null;\r\n\t        if (item.value == emptyEntryValue)\r\n\t            return null;\r\n\t        return item.value;\r\n\t    }\r\n\t    RowEditor_code.prototype.getSelectedItem = function () {\r\n\t        var item = this.$cnt.jqxComboBox('getSelectedItem');\r\n\t        if (!item)\r\n\t            return null;\r\n\t        return item;\r\n\t    }\r\n\t    RowEditor_code.prototype.isMandatory = function (m) {\r\n\t        if (m == 'undefined')\r\n\t            return this.mandatory;\r\n\t        this.mandatory = m;\r\n\t    }\r\n\t    RowEditor_code.prototype.validate = function () {\r\n\t        var val = this.getValue();\r\n\t        if (this.mandatory && !val)\r\n\t            return this.ERROR_NULL;\r\n\t        return null;\r\n\t    }\r\n\t    RowEditor_code.prototype.isValid = function () {\r\n\t        if (this.validate() == null)\r\n\t            return true;\r\n\t        return false;\r\n\t    }\r\n\t\r\n\t    return RowEditor_code;\r\n\t});*/\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(16),\r\n\t        __webpack_require__(4),\r\n\t        __webpack_require__(12),\r\n\t        __webpack_require__(17),\r\n\t        __webpack_require__(18),\r\n\t        __webpack_require__(13)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, datetimepicker, mlRes, rowEditorBase, RowEditorTimeHTML) {\r\n\t    var defConfig = { yMin: 0, yMax: 3000 };\r\n\t    var h = {\r\n\t        inputTime: '#inputTime'\r\n\t    };\r\n\t\r\n\t    var RowEditor_date = function (config) {\r\n\t        this.parent.constructor.call(this, config);\r\n\t        $.extend(true, this.config, defConfig);\r\n\t        this.$datePicker;\r\n\t    };\r\n\t    RowEditor_date.prototype = Object.create(rowEditorBase.prototype);\r\n\t    RowEditor_date.prototype.constructor = rowEditorBase;\r\n\t    RowEditor_date.prototype.parent = rowEditorBase.prototype;\r\n\t\r\n\t    RowEditor_date.prototype.render = function (container, config) {\r\n\t        $.extend(true, this.config, config);\r\n\t        this.$cnt = container;\r\n\t        this.$cnt.html(RowEditorTimeHTML);\r\n\t\r\n\t        this.$datePicker = this.$cnt.find('#inputTime');\r\n\t        this.$datePicker.datetimepicker({ viewMode: 'days', locale: 'en', format: \"DD/MM/YYYY\" });\r\n\t        var me = this;\r\n\t        this.$cnt.on('change', function () { me.updateValidationHelp(); });\r\n\t    };\r\n\t    RowEditor_date.prototype.destroy = function () {\r\n\t        this.$datePicker.data(\"DateTimePicker\").destroy();\r\n\t        this.$datePicker.off('change');\r\n\t    };\r\n\t    /*RowEditor_date.prototype.updateValidationHelp = function () {\r\n\t        var error = this.validate();\r\n\t        this.parent.updateValidationHelp.call(this, error);\r\n\t    };*/\r\n\t\r\n\t    RowEditor_date.prototype.reset = function () {\r\n\t        this.$datePicker.data(\"DateTimePicker\").clear();\r\n\t        //this.$cnt.popover('destroy');\r\n\t    };\r\n\t    RowEditor_date.prototype.setValue = function (val) {\r\n\t        this.reset();\r\n\t        if (val) {\r\n\t            val = \"\" + val;\r\n\t            var d = val.substring(6, 8);\r\n\t            var m = val.substring(4, 6);\r\n\t            m = m - 1;\r\n\t            var y = val.substring(0, 4);\r\n\t            this.$datePicker.data('DateTimePicker').date(new Date(y, m, d));\r\n\t        }\r\n\t    };\r\n\t    RowEditor_date.prototype.getValue = function () {\r\n\t        var dt = this.$datePicker.data('DateTimePicker').date();\r\n\t        if (!dt)\r\n\t            return '';\r\n\t        var d = \"\" + dt.date();\r\n\t        var m = \"\" + (dt.month() + 1);\r\n\t        var y = \"\" + dt.year();\r\n\t        if (d.length == 1)\r\n\t            d = \"0\" + d;\r\n\t        if (m.length == 1)\r\n\t            m = \"0\" + m;\r\n\t        while (y.length < 4)\r\n\t            y = \"0\" + y;\r\n\t        return y + m + d;\r\n\t    };\r\n\t    /*RowEditor_date.prototype.isMandatory = function (m) {\r\n\t        if (m == 'undefined')\r\n\t            return this.mandatory;\r\n\t        this.mandatory = m;\r\n\t    }*/\r\n\t\r\n\t    RowEditor_date.prototype.validate = function () {\r\n\t        var val = this.getValue();\r\n\t        if (this.mandatory && !val)\r\n\t            return this.ERROR_NULL;\r\n\t        var y = val.substring(4, 8);\r\n\t        if (y < this.config.yMin) return this.ERROR_OUT_OF_RANGE;\r\n\t        if (y > this.config.yMax) return this.ERROR_OUT_OF_RANGE;\r\n\t        return null;\r\n\t    };\r\n\t    /*RowEditor_date.prototype.isValid = function () {\r\n\t        if (this.validate() == null)\r\n\t            return true;\r\n\t        return false;\r\n\t    }*/\r\n\t\r\n\t    return RowEditor_date;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t\r\n\t\r\n\t/*\r\n\tdefine([\r\n\t        'jquery',\r\n\t        'jqxall',\r\n\t        'i18n!fx-DataEditor/multiLang/DataEditor/nls/ML_DataEdit',\r\n\t        'fx-DataEditor/js/DataEditor/simpleEditors/rE/RowEditor_base',\r\n\t        'bootstrap'\r\n\t],\r\n\tfunction ($, jqx, mlRes, rowEditorBase) {\r\n\t    var defConfig = { yMin: 0, yMax: 3000 };\r\n\t\r\n\t    var RowEditor_date = function (config) {\r\n\t        this.parent.constructor.call(this, config);\r\n\t    };\r\n\t    RowEditor_date.prototype = Object.create(rowEditorBase.prototype);\r\n\t    RowEditor_date.prototype.constructor = RowEditor_date;\r\n\t    RowEditor_date.prototype.parent = rowEditorBase.prototype;\r\n\t\r\n\t    RowEditor_date.prototype.render = function (container, config) {\r\n\t        $.extend(true, this.config, config);\r\n\t        this.$cnt = container;\r\n\t\r\n\t        this.$cnt.jqxCalendar();\r\n\t        var me = this;\r\n\t        this.$cnt.on('change', function () { me.updateValidationHelp(); });\r\n\t    }\r\n\t    RowEditor_date.prototype.destroy = function () {\r\n\t        this.$cnt.jqxCalendar('destroy');\r\n\t        this.$cnt.off('change');\r\n\t    }\r\n\t    RowEditor_date.prototype.updateValidationHelp = function () {\r\n\t        var error = this.validate();\r\n\t        this.parent.updateValidationHelp.call(this, error);\r\n\t    }\r\n\t\r\n\t    RowEditor_date.prototype.reset = function () {\r\n\t        this.$cnt.jqxCalendar('clear');\r\n\t        this.$cnt.popover('destroy');\r\n\t    }\r\n\t    RowEditor_date.prototype.setValue = function (val) {\r\n\t        this.reset();\r\n\t        if (val) {\r\n\t            val = \"\" + val;\r\n\t            var d = val.substring(6, 8);\r\n\t            var m = val.substring(4, 6);\r\n\t            m = m - 1;\r\n\t            var y = val.substring(0, 4);\r\n\t            this.$cnt.jqxCalendar('setDate', new Date(y, m, d));\r\n\t        }\r\n\t\r\n\t    }\r\n\t    RowEditor_date.prototype.getValue = function () {\r\n\t        var dt = this.$cnt.jqxCalendar('getDate');\r\n\t        if (!dt)\r\n\t            return null;\r\n\t        var d = \"\" + dt.getDate();\r\n\t        var m = \"\" + (dt.getMonth() + 1);\r\n\t        var y = \"\" + dt.getFullYear();\r\n\t        if (d.length == 1)\r\n\t            d = \"0\" + d;\r\n\t        if (m.length == 1)\r\n\t            m = \"0\" + m;\r\n\t        while (y.length < 4)\r\n\t            y = \"0\" + y;\r\n\t        return y + m + d;\r\n\t    }\r\n\t    RowEditor_date.prototype.isMandatory = function (m) {\r\n\t        if (m == 'undefined')\r\n\t            return this.mandatory;\r\n\t        this.mandatory = m;\r\n\t    }\r\n\t\r\n\t    RowEditor_date.prototype.validate = function () {\r\n\t        var val = this.getValue();\r\n\t        if (this.mandatory && !val)\r\n\t            return this.ERROR_NULL;\r\n\t        var y = val.substring(4, 8);\r\n\t        if (y < this.config.yMin) return this.ERROR_OUT_OF_RANGE;\r\n\t        if (y > this.config.yMax) return this.ERROR_OUT_OF_RANGE;\r\n\t        return null;\r\n\t    }\r\n\t    RowEditor_date.prototype.isValid = function () {\r\n\t        if (this.validate() == null)\r\n\t            return true;\r\n\t        return false;\r\n\t    }\r\n\t\r\n\t    return RowEditor_date;\r\n\t});\r\n\t*/\r\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"input-group date\\\" id=inputTime> <input type=text class=form-control /> <span class=input-group-addon> <span class=\\\"glyphicon glyphicon-calendar\\\"></span> </span> </div>\";\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(4),\r\n\t        __webpack_require__(15),\r\n\t        __webpack_require__(13)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, mlRes, rowEditorDate) {\r\n\t    var defConfig = { yMin: 0, yMax: 3000 };\r\n\t\r\n\t    var RowEditor_month = function (config) {\r\n\t        this.parent.constructor.call(this, config);\r\n\t    };\r\n\t    RowEditor_month.prototype = Object.create(rowEditorDate.prototype);\r\n\t    RowEditor_month.prototype.constructor = rowEditorDate;\r\n\t    RowEditor_month.prototype.parent = rowEditorDate.prototype;\r\n\t\r\n\t    RowEditor_month.prototype.render = function (container, config) {\r\n\t        $.extend(true, this.config, config);\r\n\t        this.parent.render.call(this, container, config);\r\n\t        this.$datePicker.data(\"DateTimePicker\").format(\"MM/YYYY\");\r\n\t        this.$datePicker.data(\"DateTimePicker\").viewMode(\"months\");\r\n\t    };\r\n\t    RowEditor_month.prototype.setValue = function (val) {\r\n\t        this.reset();\r\n\t        if (val) {\r\n\t            var y = val.substring(0, 4) + \"\";\r\n\t            var m = val.substring(4, 6) + \"\";\r\n\t            m = m - 1;\r\n\t            this.$datePicker.data('DateTimePicker').date(new Date(y, m, 1));\r\n\t        }\r\n\t    };\r\n\t    RowEditor_month.prototype.getValue = function () {\r\n\t        var dt = this.$datePicker.data('DateTimePicker').date();\r\n\t        if (!dt)\r\n\t            return '';\r\n\t        var m = \"\" + (dt.month() + 1);\r\n\t        var y = \"\" + dt.year();\r\n\t        if (m.length == 1)\r\n\t            m = \"0\" + m;\r\n\t        while (y.length < 4)\r\n\t            y = \"0\" + y;\r\n\t        return y + m;\r\n\t    };\r\n\t    RowEditor_month.prototype.validate = function () {\r\n\t        var val = this.getValue();\r\n\t        if (this.mandatory && !val)\r\n\t            return this.ERROR_NULL;\r\n\t        if (!val)\r\n\t            return null;\r\n\t        var y = val.substring(0, 4);\r\n\t        var m = val.substring(4, 6);\r\n\t        if (this.mandatory && (m == '' || y == ''))\r\n\t            return this.ERROR_NULL;\r\n\t        if (y < this.config.yMin || y > this.config.yMax)\r\n\t            return this.ERROR_OUT_OF_RANGE;\r\n\t        if (m == '' && y == '') {\r\n\t            return null;\r\n\t        }\r\n\t    };\r\n\t    return RowEditor_month;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(4),\r\n\t        __webpack_require__(12),\r\n\t        __webpack_require__(13)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, mlRes, rowEditorBase) {\r\n\t    var defConfig = {\r\n\t        decimalDigits: 5,\r\n\t        html: '<input type=\"input\" class=\"form-control\">'\r\n\t    };\r\n\t\r\n\t    var RowEditor_number = function (config) {\r\n\t        this.parent.constructor.call(this, config);\r\n\t        $.extend(true, this.config, defConfig);\r\n\t        this.$cnt;\r\n\t        this.$txt;\r\n\t    };\r\n\t    RowEditor_number.prototype = Object.create(rowEditorBase.prototype);\r\n\t    RowEditor_number.prototype.constructor = RowEditor_number;\r\n\t    RowEditor_number.prototype.parent = rowEditorBase.prototype;\r\n\t\r\n\t    RowEditor_number.prototype.render = function (container, config) {\r\n\t        $.extend(true, this.config, config);\r\n\t        this.$cnt = container;\r\n\t        this.$cnt.html(this.config.html);\r\n\t        this.$txt = this.$cnt.find('input');\r\n\t        var me = this;\r\n\t        this.$cnt.on('valueChanged', function () { me.updateValidationHelp(); });\r\n\t    }\r\n\t    RowEditor_number.prototype.destroy = function () {\r\n\t        this.$cnt.off('valueChanged');\r\n\t    }\r\n\t    RowEditor_number.prototype.updateValidationHelp = function () {\r\n\t        var error = this.validate();\r\n\t        this.parent.updateValidationHelp.call(this, error);\r\n\t    }\r\n\t    RowEditor_number.prototype.reset = function () {\r\n\t        this.$txt.val('');\r\n\t        this.$cnt.popover('destroy');\r\n\t    }\r\n\t    RowEditor_number.prototype.setValue = function (val) {\r\n\t        this.reset();\r\n\t        this.$txt.val(val);\r\n\t    }\r\n\t    RowEditor_number.prototype.getValue = function () {\r\n\t        var toRet = this.$txt.val().trim();\r\n\t        return toRet;\r\n\t    }\r\n\t    RowEditor_number.prototype.isMandatory = function (m) {\r\n\t        if (m == 'undefined')\r\n\t            return this.mandatory;\r\n\t        this.mandatory = m;\r\n\t    }\r\n\t\r\n\t    RowEditor_number.prototype.validate = function () {\r\n\t        var val = this.getValue();\r\n\t        if (val != '') {\r\n\t            if (isNaN(val))\r\n\t                return this.ERROR_NAN;\r\n\t        }\r\n\t        else {\r\n\t            if (this.mandatory)\r\n\t                return this.ERROR_NULL;\r\n\t        }\r\n\t        return null;\r\n\t    }\r\n\t    RowEditor_number.prototype.isValid = function () {\r\n\t        if (this.validate() == null)\r\n\t            return true;\r\n\t        return false;\r\n\t    }\r\n\t\r\n\t    return RowEditor_number;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(4),\r\n\t        __webpack_require__(12),\r\n\t        __webpack_require__(13)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, mlRes, rowEditorBase) {\r\n\t    var defConfig = {\r\n\t        html: '<input type=\"text\" class=\"form-control\">'\r\n\t    };\r\n\t    var ERROR_NULL = \"Null\";\r\n\t\r\n\t    var RowEditor_string = function (config) {\r\n\t        this.parent.constructor.call(this, config, defConfig);\r\n\t        $.extend(true, this.config, defConfig);\r\n\t        this.$cnt;\r\n\t        this.txt;\r\n\t        //this.$cnt;\r\n\t    };\r\n\t    RowEditor_string.prototype = Object.create(rowEditorBase.prototype);\r\n\t    RowEditor_string.prototype.constructor = RowEditor_string;\r\n\t    RowEditor_string.prototype.parent = rowEditorBase.prototype;\r\n\t\r\n\t    RowEditor_string.prototype.render = function (container, config) {\r\n\t        $.extend(true, this.config, config);\r\n\t        this.$cnt = container;\r\n\t        this.$cnt.html(this.config.html);\r\n\t        this.txt = this.$cnt.find('input');\r\n\t        var me = this;\r\n\t        this.$cnt.on('valueChanged', function () { me.updateValidationHelp(); });\r\n\t    };\r\n\t    RowEditor_string.prototype.destroy = function () {\r\n\t        this.$cnt.off('valuechanged');\r\n\t    };\r\n\t    RowEditor_string.prototype.updateValidationHelp = function () {\r\n\t        var error = this.validate();\r\n\t        this.parent.updateValidationHelp.call(this, error);\r\n\t    };\r\n\t    RowEditor_string.prototype.reset = function () {\r\n\t        this.txt.val('');\r\n\t        this.$cnt.popover('destroy');\r\n\t    };\r\n\t    RowEditor_string.prototype.setValue = function (val) {\r\n\t        this.reset();\r\n\t        this.txt.val(val);\r\n\t    };\r\n\t    RowEditor_string.prototype.getValue = function () {\r\n\t        return this.txt.val().trim();\r\n\t    };\r\n\t    RowEditor_string.prototype.isMandatory = function (m) {\r\n\t        if (m == 'undefined')\r\n\t            return this.mandatory;\r\n\t        this.mandatory = m;\r\n\t    };\r\n\t    RowEditor_string.prototype.validate = function () {\r\n\t        var val = this.getValue();\r\n\t        if (this.mandatory && val.trim() == '')\r\n\t            return this.ERROR_NULL;\r\n\t        return null;\r\n\t    };\r\n\t    RowEditor_string.prototype.isValid = function () {\r\n\t        if (this.validate() == null)\r\n\t            return true;\r\n\t        return false;\r\n\t    };\r\n\t\r\n\t    return RowEditor_string;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(4),\r\n\t        __webpack_require__(15),\r\n\t        __webpack_require__(13)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, mlRes, rowEditorDate) {\r\n\t    var defConfig = { yMin: 0, yMax: 3000 };\r\n\t\r\n\t    var RowEditor_year = function (config) {\r\n\t        this.parent.constructor.call(this, config);\r\n\t    };\r\n\t    RowEditor_year.prototype = Object.create(rowEditorDate.prototype);\r\n\t    RowEditor_year.prototype.constructor = rowEditorDate;\r\n\t    RowEditor_year.prototype.parent = rowEditorDate.prototype;\r\n\t\r\n\t    RowEditor_year.prototype.render = function (container, config) {\r\n\t        $.extend(true, this.config, config);\r\n\t        this.parent.render.call(this, container, config);\r\n\t        this.$datePicker.data(\"DateTimePicker\").format(\"YYYY\");\r\n\t        this.$datePicker.data(\"DateTimePicker\").viewMode(\"years\");\r\n\t    };\r\n\t    RowEditor_year.prototype.setValue = function (val) {\r\n\t        this.reset();\r\n\t        if (val) {\r\n\t            this.$datePicker.data('DateTimePicker').date(new Date(val, 0, 1));\r\n\t        }\r\n\t    };\r\n\t    RowEditor_year.prototype.getValue = function () {\r\n\t        var dt = this.$datePicker.data('DateTimePicker').date();\r\n\t        if (!dt)\r\n\t            return '';\r\n\t        return \"\" + dt.year();\r\n\t    };\r\n\t    RowEditor_year.prototype.validate = function () {\r\n\t        var val = this.getValue();\r\n\t        if (this.mandatory && !val) \r\n\t            return this.ERROR_NULL;\r\n\t        if (!val)\r\n\t            return null;\r\n\t        if (val < this.config.yMin)\r\n\t            return this.ERROR_OUT_OF_RANGE;\r\n\t        if (val > this.config.yMax)\r\n\t            return this.ERROR_OUT_OF_RANGE;\r\n\t    };\r\n\t\r\n\t    return RowEditor_year;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=divRowEditorPopup class=modal data-backdrop=false> <div class=\\\"modal-dialog modal-lg\\\"> <div class=modal-content> <div class=modal-body> <table id=tblRowEditor> <tbody></tbody> </table> </div> <div class=modal-footer> <button id=btnEditRowCanc type=button class=\\\"btn btn-default\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></button> <button id=btnEditRowOk type=button class=\\\"btn btn-primary\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span></button> </div> </div> </div> </div> <div id=divDataGrid> <table id=tblData class=\\\"table table-bordered table-condensed\\\"> <thead> <tr id=tblDataHead></tr> </thead> <tbody id=tblDataBody></tbody> </table> </div>\";\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\t//Used to get the string in a multilanguage text structure\r\n\t//It returns:\r\n\t//The string for the langCode passed\r\n\t//If not found returns the EN string\r\n\t//If not found returns the first language available\r\n\tvar MLUtils_getAvailableString = function (ml, lang) {\r\n\t    var lCode = MLUtils_getAvailableLang(ml, lang);\r\n\t    if (lCode == \"\")\r\n\t        return \"\";\r\n\t    return ml[lCode];\r\n\t}\r\n\t\r\n\tvar MLUtils_getAvailableLang = function (ml, lang) {\r\n\t    if (!ml)\r\n\t        return \"\";\r\n\t    if (!lang)\r\n\t        lang = 'EN';\r\n\t    lang = lang.toUpperCase();\r\n\t    if (lang in ml)\r\n\t        return lang;\r\n\t    if ('EN' in ml)\r\n\t        return 'EN';\r\n\t    for (var langs in ml)\r\n\t        return langs;\r\n\t}\r\n\t\r\n\tvar MLUtils_getAllMultilanguageString = function (ml, divChar) {\r\n\t    if (!ml)\r\n\t        return \"\";\r\n\t    var toRet = \"\";\r\n\t    if (divChar == undefined)\r\n\t        divChar = \",\";\r\n\t    for (var k in ml)\r\n\t        if (toRet == \"\")\r\n\t            toRet = '[' + k + '] ' + ml[k];\r\n\t        else\r\n\t            toRet = toRet + divChar + '[' + k + '] ' + ml[k];\r\n\t    return toRet;\r\n\t}\r\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_25__;\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t__webpack_require__(2),\r\n\t __webpack_require__(4)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, mlRes) {\r\n\t\r\n\t\r\n\t    var ValidationResultsViewer = function () {\r\n\t        this.$valResGrid;\r\n\t    };\r\n\t\r\n\t    //Render - creation\r\n\t    ValidationResultsViewer.prototype.render = function (container) {\r\n\t        this.$valResGrid = container;\r\n\t        console.log(\"ValidationResultsViewer redered\");\r\n\t    }\r\n\t\r\n\t    ValidationResultsViewer.prototype.setValidationResults = function (valRes) {\r\n\t        this.$valResGrid.html();\r\n\t        if (!valRes)\r\n\t            return;\r\n\t        var toAdd = \"\";\r\n\t\r\n\t        toAdd = '<table><tbody>';\r\n\t\r\n\t        for (var i = 0; i < valRes.length; i++) {\r\n\t            toAdd += '<tr><td>';\r\n\t            toAdd += mlRes[valRes[i].error];\r\n\t            if (valRes[i].dataIndex)\r\n\t                toAdd += \" line: \" + valRes[i].dataIndex;\r\n\t            toAdd += '</tr></td>';\r\n\t            //toAdd += \"</br>\";\r\n\t        }\r\n\t        toAdd += '</table></tbody>';\r\n\t\r\n\t        this.$valResGrid.html(toAdd);\r\n\t    }\r\n\t\r\n\t    return ValidationResultsViewer;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(2),\r\n\t    __webpack_require__(28)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, clUtils) {\r\n\t\r\n\t        var MSG_NULL_KEY = 'nullKey';\r\n\t        var MSG_SAME_KEY_VALS = 'sameKeyVals';\r\n\t        var MSG_UNKNOWN_CODE = 'unknownCode';\r\n\t        var MSG_INVALID_YEAR = 'invalidYear';\r\n\t        var MSG_INVALID_MONTH = 'invalidMonth';\r\n\t        var MSG_INVALID_DATE = 'invalidDate';\r\n\t        var MSG_INVALID_NUMBER = 'invalidNumber';\r\n\t        var MSG_INVALID_BOOL = 'invalidBool';\r\n\t\r\n\t        //Columns/headers validation\r\n\t        function Data_Validator() { };\r\n\t\r\n\t        Data_Validator.prototype.validate = function (cols, codelists, data) {\r\n\t            var toRet = [];\r\n\t\r\n\t            var emptyKeyVals = this.checkEmptyKeyVals(cols, data);\r\n\t            var duplicateKeyVals = this.checkDuplicateKeyVals(cols, data);\r\n\t            var wrongDataTypes = this.checkWrongDataTypes(cols, codelists, data);\r\n\t            var valueFlags = this.checkValueFlags();\r\n\t\r\n\t            if (emptyKeyVals && emptyKeyVals.length > 0)\r\n\t                arrConcat(toRet, emptyKeyVals);\r\n\t            if (duplicateKeyVals && duplicateKeyVals.length > 0)\r\n\t                arrConcat(toRet, duplicateKeyVals);\r\n\t            if (wrongDataTypes && wrongDataTypes.length > 0)\r\n\t                arrConcat(toRet, wrongDataTypes);\r\n\t            if (valueFlags && valueFlags.length > 0)\r\n\t                arrConcat(toRet, valueFlags);\r\n\t\r\n\t            return toRet;\r\n\t        }\r\n\t\r\n\t        Data_Validator.prototype.checkEmptyKeyVals = function (cols, data) {\r\n\t            if (!cols || !data)\r\n\t                return null;\r\n\t            var toRet = [];\r\n\t            for (var i = 0; i < data.length; i++)\r\n\t                for (var c = 0; c < cols.length; c++) {\r\n\t                    if (cols[c].key) {\r\n\t                        if (!data[i][c])\r\n\t                            toRet.push({ error: MSG_NULL_KEY, colId: cols[c].id, dataIndex: i });\r\n\t                    }\r\n\t                }\r\n\t\r\n\t            return toRet;\r\n\t        }\r\n\t\r\n\t        Data_Validator.prototype.checkDuplicateKeyVals = function (cols, data) {\r\n\t            if (!cols || !data)\r\n\t                return null;\r\n\t\r\n\t            var toRet = [];\r\n\t\r\n\t            for (var r1 = 0; r1 < data.length - 1; r1++)\r\n\t                for (var r2 = r1 + 1; r2 < data.length; r2++)\r\n\t                    if (sameDimVals(data[r1], data[r2], cols)) {\r\n\t                        toRet.push({ error: MSG_SAME_KEY_VALS, dataIndex: r1 });\r\n\t                        toRet.push({ error: MSG_SAME_KEY_VALS, dataIndex: r2 });\r\n\t                    }\r\n\t\r\n\t            return toRet;\r\n\t        }\r\n\t\r\n\t        var sameDimVals = function (row1, row2, cols) {\r\n\t            for (var d = 0; d < cols.length; d++) {\r\n\t                if (cols[d].key)\r\n\t                    if (row1[d] != row2[d]) {\r\n\t                        return false;\r\n\t                    }\r\n\t            }\r\n\t            return true;\r\n\t        }\r\n\t\r\n\t        Data_Validator.prototype.checkWrongDataTypes = function (cols, codelists, data) {\r\n\t            if (!cols || !data)\r\n\t                return null;\r\n\t\r\n\t            var toRet = [];\r\n\t            for (var i = 0; i < data.length; i++) {\r\n\t                arrConcat(toRet, checkRowDataTypes(cols, codelists, data[i], i));\r\n\t            }\r\n\t            return toRet;\r\n\t\r\n\t            /*var colInfo = {};\r\n\t            for (var c = 0; c < cols.length; c++) \r\n\t\r\n\t                if (cols[c].dataType)\r\n\t                    colInfo[cols[c].id] = { dataType: cols[c].dataType, domain: cols[c].domain, codes: cols[c].codes };\r\n\t            }\r\n\t            var toRet = [];\r\n\t            for (var i = 0; i < data.length; i++) {\r\n\t                arrConcat(toRet, checkRowDataTypes(colInfo, data[i], i));\r\n\t            }\r\n\t            return toRet;*/\r\n\t        }\r\n\t\r\n\t        var checkRowDataTypes = function (cols, codelists, dataRow, rowIdx) {\r\n\t            var toRet = [];\r\n\t            for (var d = 0; d < cols.length; d++) {\r\n\t                switch (cols[d].dataType) {\r\n\t                    case 'code':\r\n\t                        var cListUID = cols[d].domain.codes[0].idCodeList;\r\n\t                        if (cols[d].domain.codes[0].version)\r\n\t                            cListUID = cListUID + \"|\" + cols[d].domain.codes[0].version;\r\n\t                        if (!checkCode(dataRow[d], codelists[cListUID]))\r\n\t                            toRet.push({ error: MSG_UNKNOWN_CODE, dataIndex: rowIdx, colId: cols[d].id });\r\n\t                        break;\r\n\t                    case 'year':\r\n\t                        if (!checkYear(dataRow[d]))\r\n\t                            toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: cols[d].id });\r\n\t                        else {\r\n\t                            if (cols[d].domain && cols[d].domain.period) {\r\n\t                                if (cols[d].domain.period.from)//Check from\r\n\t                                    if (dataRow[d] < cols[d].domain.period.from)\r\n\t                                        toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: cols[d].id, yearLimitFrom: cols[d].domain.period.from, yearValue: dataRow[d] });\r\n\t                                if (cols[d].domain.period.to) //Check to\r\n\t                                    if (dataRow[d] > cols[d].domain.period.to)\r\n\t                                        toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: cols[d].id, yearLimitTo: cols[d].domain.period.to, yearValue: dataRow[d] });\r\n\t                            }\r\n\t                        }\r\n\t                        break;\r\n\t                    case 'month':\r\n\t                        if (!checkMonth(dataRow[d]))\r\n\t                            toRet.push({ error: MSG_INVALID_MONTH, dataIndex: rowIdx, colId: cols[d].id });\r\n\t                        break;\r\n\t                    case 'date':\r\n\t                        if (!checkDate(dataRow[d]))\r\n\t                            toRet.push({ error: MSG_INVALID_DATE, dataIndex: rowIdx, colId: cols[d].id });\r\n\t                        break;\r\n\t                    case 'customCode':\r\n\t                        //TODO: Check custom code\r\n\t                        break;\r\n\t                    case 'number':\r\n\t                    case 'percentage':\r\n\t                        if (!checkNumber(dataRow[d]))\r\n\t                            toRet.push({ error: MSG_INVALID_NUMBER, dataIndex: rowIdx, colId: d });\r\n\t                        break;\r\n\t                    case 'bool':\r\n\t                        if (!checkBool(dataRow[d]))\r\n\t                            toRet.push({ error: MSG_INVALID_BOOL, dataIndex: rowIdx, colId: d });\r\n\t                        break;\r\n\t                }\r\n\t            }\r\n\t            return toRet;\r\n\t        }\r\n\t\r\n\t        /*var checkRowDataTypes = function (colInfo, dataRow, rowIdx) {\r\n\t            var toRet = [];\r\n\t            //for (var d in data) {\r\n\t            for (var d = 0; d < dataRow.length; d++) {\r\n\t                if (!colInfo[d])\r\n\t                    continue;\r\n\t\r\n\t                switch (colInfo[d].dataType) {\r\n\t                    case 'code':\r\n\t                        if (!checkCode(data[d], colInfo[d].codes))\r\n\t                            toRet.push({ error: MSG_UNKNOWN_CODE, dataIndex: rowIdx, colId: d });\r\n\t                        break;\r\n\t                    case 'year':\r\n\t                        if (!checkYear(data[d]))\r\n\t                            toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: d });\r\n\t                        else {\r\n\t                            if (colInfo[d].domain && colInfo[d].domain.period) {\r\n\t                                if (colInfo[d].domain.period.from)//Check from\r\n\t                                    if (data[d] < colInfo[d].domain.period.from)\r\n\t                                        toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: d, yearLimitFrom: colInfo[d].domain.period.from, yearValue: data[d] });\r\n\t                                if (colInfo[d].domain.period.to) //Check to\r\n\t                                    if (data[d] > colInfo[d].domain.period.to)\r\n\t                                        toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: d, yearLimitTo: colInfo[d].domain.period.to, yearValue: data[d] });\r\n\t                            }\r\n\t                        }\r\n\t                        break;\r\n\t                    case 'month':\r\n\t                        if (!checkMonth(data[d]))\r\n\t                            toRet.push({ error: MSG_INVALID_MONTH, dataIndex: rowIdx, colId: d });\r\n\t                        break;\r\n\t                    case 'date':\r\n\t                        if (!checkDate(data[d]))\r\n\t                            toRet.push({ error: MSG_INVALID_DATE, dataIndex: rowIdx, colId: d });\r\n\t                        break;\r\n\t                    case 'customCode':\r\n\t                        //TODO: Check custom code\r\n\t                        break;\r\n\t                    case 'number':\r\n\t                    case 'percentage':\r\n\t                        if (!checkNumber(data[d]))\r\n\t                            toRet.push({ error: MSG_INVALID_NUMBER, dataIndex: rowIdx, colId: d });\r\n\t                        break;\r\n\t                    case 'bool':\r\n\t                        if (!checkBool(data[d]))\r\n\t                            toRet.push({ error: MSG_INVALID_BOOL, dataIndex: rowIdx, colId: d });\r\n\t                        break;\r\n\t                }\r\n\t            }\r\n\t            return toRet;\r\n\t        }*/\r\n\t\r\n\t        var checkCode = function (code, codelist) {\r\n\t\r\n\t            var clU = new clUtils();\r\n\t            var code = clU.findCodeInCodelist(code, codelist);\r\n\t            if (code == null)\r\n\t                return false;\r\n\t            return true;\r\n\t\r\n\t            /*\r\n\t            if (!code)\r\n\t                return true;\r\n\t            if (!codelist)\r\n\t                return true;\r\n\t            if (isInCodelist(codelist, code))\r\n\t            {\r\n\t                return true;\r\n\t            }\r\n\t            for (var i = 0; i < codelist.data.length; i++)\r\n\t                if (code == codelist.data[i].code)\r\n\t                    return true;\r\n\t            return false;*/\r\n\t        }\r\n\t\r\n\t        var checkYear = function (year) {\r\n\t            if (!year)\r\n\t                return true;\r\n\t            if (!$.isNumeric(year))\r\n\t                return false;\r\n\t            if (year.toString().length != 4)\r\n\t                return false;\r\n\t            return true;\r\n\t        }\r\n\t\r\n\t        var checkMonth = function (month) {\r\n\t            if (!month)\r\n\t                return true;\r\n\t            if (!$.isNumeric(month))\r\n\t                return false;\r\n\t            if (month.toString().length != 6)\r\n\t                return false;\r\n\t            if (month.substring(4, 6) > 12 || month.substring(4, 6) < 1)\r\n\t                return false;\r\n\t            return true;\r\n\t        }\r\n\t\r\n\t        var checkDate = function (date) {\r\n\t            //ADD a true date format:\r\n\t            //could be done by creating a date object and then check if it matches the orginal date\r\n\t            if (!date)\r\n\t                return true;\r\n\t            if (!$.isNumeric(date))\r\n\t                return false;\r\n\t            if (date.toString().length != 8)\r\n\t                return false;\r\n\t            if (date.substring(4, 6) > 12 || date.substring(4, 6) < 1)\r\n\t                return false;\r\n\t\r\n\t            return true;\r\n\t        }\r\n\t\r\n\t\r\n\t        Data_Validator.prototype.checkValueFlags = function (cols, data) {\r\n\t            //TODO: Add configuration rulees for value - flags\r\n\t\r\n\t            /*var flagColId = \"\";\r\n\t             var valueColId = \"\";\r\n\t             for (var i = 0; i < cols.length; i++) {\r\n\t             if (cols[i].subject && cols[i].subject == 'flag')\r\n\t             flagColId = cols[i].id;\r\n\t             if (cols[i].subject && cols[i].subject == 'value')\r\n\t             valueColId = cols[i].id;\r\n\t             }\r\n\t\r\n\t             CONTINUE...\r\n\t             */\r\n\t        }\r\n\t\r\n\t        var checkNumber = function (num) {\r\n\t            if (!num)\r\n\t                return true;\r\n\t            if (num == \"\")\r\n\t                return true;\r\n\t            if ($.isNumeric(num))\r\n\t                return true;\r\n\t            return false;\r\n\t        }\r\n\t        var checkBool = function (toCheck) {\r\n\t            if (typeof (toCheck) == 'boolean')\r\n\t                return true;\r\n\t            if (typeof (toCheck) == 'string')\r\n\t                if (toCheck == 'true' || toCheck == 'false')\r\n\t                    return true;\r\n\t            if (typeof (toCheck) == 'number')\r\n\t                if (toCheck == 1 || toCheck == 0)\r\n\t                    return true;\r\n\t            return false;\r\n\t        }\r\n\t\r\n\t        var arrConcat = function (dest, toAdd) {\r\n\t            if (!dest)\r\n\t                dest = [];\r\n\t            if (toAdd)\r\n\t                for (var i = 0; i < toAdd.length; i++)\r\n\t                    dest.push(toAdd[i]);\r\n\t        }\r\n\t\r\n\t\r\n\t        /*Data append validation*/\r\n\t        Data_Validator.prototype.dataAppendCheck = function (cols, dataOld, dataNew) {\r\n\t            if (!cols || !dataOld || !dataNew)\r\n\t                return null;\r\n\t\r\n\t            var toRet = [];\r\n\t            for (var o = 0; o < dataOld.length; o++) {\r\n\t                for (n = 0; n < dataNew.length; n++) {\r\n\t                    var dimValsCollision = sameDimVals(dataOld[o], dataNew[n], cols);\r\n\t                    if (dimValsCollision) {\r\n\t                        //if (!sameData) {//If the rows have the same data ignore\r\n\t                        toRet.push({ dataOldIndex: o, dataNewIndex: n });\r\n\t                        //}\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            return toRet;\r\n\t        }\r\n\t        //checks if two rows have the same data fields (ignores the key columns)\r\n\t        //Enable that after removing the duplicated lines from the newData set\r\n\t        /*var sameData = function (cols, oldRow, newRow) {\r\n\t            for (var d = 0; d < cols.length; d++) {\r\n\t                if (!cols[d].key) {\r\n\t                    if (oldRow[d] != newRow[d])\r\n\t                        return false;\r\n\t                }\r\n\t            }\r\n\t            return true;\r\n\t        }*/\r\n\t\r\n\t        Data_Validator.prototype.dataMerge = function (cols, dataOld, dataNew, mode) {\r\n\t\r\n\t            var oldLen = dataOld.length; //To avoid the count to increase on push\r\n\t            for (var n = 0; n < dataNew.length; n++) {\r\n\t                var found = false;\r\n\t                for (var o = 0; o < oldLen; o++) {\r\n\t                    if (sameDimVals(dataOld[o], dataNew[n], cols)) {\r\n\t                        found = true;\r\n\t                        if (mode == 'keepOld') {\r\n\t                            //do nothing, skip the line\r\n\t                        }\r\n\t                        else if (mode == 'keepNew') {\r\n\t                            copyRow(dataNew[n], dataOld[o]);\r\n\t                        }\r\n\t                        //break;\r\n\t                    }\r\n\t                }\r\n\t                if (!found) {//Not found, add it.\r\n\t                    dataOld.push(dataNew[n]);\r\n\t                }\r\n\t            }\r\n\t\r\n\t            return dataOld;\r\n\t        }\r\n\t\r\n\t        var copyRow = function (src, dst) {\r\n\t            for (var i = 0; i < src.length; i++)\r\n\t                dst[i] = src[i];\r\n\t        }\r\n\t\r\n\t        return Data_Validator;\r\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function ($) {\r\n\t\r\n\t        function CodelistUtils() {\r\n\t        };\r\n\t\r\n\t        CodelistUtils.prototype.findCodeInCodelist = function (code, codelist) {\r\n\t            var found = isInNode(codelist.data, code);\r\n\t            return found;\r\n\t        }\r\n\t\r\n\t        function isInNode(arr, code) {\r\n\t            for (var i = 0; i < arr.length; i++) {\r\n\t                if (arr[i].code == code) {\r\n\t                    return arr[i];\r\n\t                }\r\n\t            }\r\n\t\r\n\t            var res = null;\r\n\t            for (i = 0; i < arr.length; i++) {\r\n\t                if (res != null)\r\n\t                    break;\r\n\t                if (arr[i].children) {\r\n\t                    res = isInNode(arr[i].children, code);\r\n\t                }\r\n\t            }\r\n\t\r\n\t            return res;\r\n\t        };\r\n\t\r\n\t        return CodelistUtils;\r\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=divValRes style=display:none> </div> <div id=divDataEditor> <div id=divDataEdit> </div> <div id=divDataGridBtns> <button id=btnAddRow type=button class=\\\"btn btn-default\\\"><span class=\\\"glyphicon glyphicon-plus\\\"></span></button> </div> </div> \";\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function ($) {\r\n\t    this.defConfig = {\r\n\t        'fSep': ',',\r\n\t        'rSep': '\\r\\n',\r\n\t        'quot': '\"',\r\n\t        'head': false,\r\n\t        'trim': true\r\n\t    }\r\n\t\r\n\t\r\n\t    function CSV_To_Dataset(config,separator) {\r\n\t        this.config = {\r\n\t            'fSep': separator,\r\n\t            'rSep': '\\r\\n',\r\n\t            'quot': '\"',\r\n\t            'head': false,\r\n\t            'trim': true\r\n\t        };\r\n\t        //defConfig.fSep = separator;\r\n\t        $.extend(true, this.config,/* defConfig,*/ config);\r\n\t        this.stringsArr;\r\n\t    };\r\n\t\r\n\t    CSV_To_Dataset.prototype.convert = function (csv) {\r\n\t        this.stringsArr = toStringArray(csv, this.config);\r\n\t        _cleanEmptyCols(this.stringsArr);\r\n\t    };\r\n\t    //Removes empty columns left by Excel\r\n\t    function _cleanEmptyCols(data) {\r\n\t        for (var c = data[0].length - 1; c >= 0 ; c--) {\r\n\t            if (data[0][c].trim() == \"\") {\r\n\t                _removeEmptyCol(data, c);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    function _removeEmptyCol(data, colIndex) {\r\n\t        for (var r = 0; r < data.length; r++) {\r\n\t            data[r].splice(colIndex, 1);\r\n\t        }\r\n\t    };\r\n\t    CSV_To_Dataset.prototype.getColumns = function () {\r\n\t        return stringArrToCol(this.stringsArr);\r\n\t    };\r\n\t    CSV_To_Dataset.prototype.getData = function () {\r\n\t        return stringArrToData(this.stringsArr);\r\n\t    };\r\n\t    function stringArrToCol(data) {\r\n\t        if (!data)\r\n\t            throw new Error(\"Nothing to parse\");\r\n\t        if (!data[0])\r\n\t            throw new Error(\"Nothing to parse\");\r\n\t\r\n\t        return data[0];\r\n\t    };\r\n\t    function stringArrToData(data) {\r\n\t        var toRet = [];\r\n\t        for (i = 1; i < data.length; i++)\r\n\t            toRet.push(data[i]);\r\n\t        return toRet;\r\n\t    };\r\n\t\r\n\t\r\n\t    //Convert a CSV to a multidimentional strings array\r\n\t    function toStringArray(str, o) {\r\n\t        var a = [['']];\r\n\t        for (var r = f = p = q = 0; p < str.length; p++) {\r\n\t            switch (c = str.charAt(p)) {\r\n\t                case o.quot:\r\n\t                    if (q && str.charAt(p + 1) == o.quot) {\r\n\t                        a[r][f] += o.quot;\r\n\t                        ++p;\r\n\t                    } else {\r\n\t                        q ^= 1;\r\n\t                    }\r\n\t                    break;\r\n\t                case o.fSep:\r\n\t                    if (!q) {\r\n\t                        if (o.trim) {\r\n\t                            a[r][f] = a[r][f].replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n\t                        }\r\n\t                        a[r][++f] = '';\r\n\t                    } else {\r\n\t                        a[r][f] += c;\r\n\t                    }\r\n\t                    break;\r\n\t                case o.rSep.charAt(0):\r\n\t                    if (!q && (!o.rSep.charAt(1) || (o.rSep.charAt(1) && o.rSep.charAt(1) == str.charAt(p + 1)))) {\r\n\t                        if (o.trim) {\r\n\t                            a[r][f] = a[r][f].replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n\t                        }\r\n\t                        a[++r] = [''];\r\n\t                        a[r][f = 0] = '';\r\n\t                        if (o.rSep.charAt(1)) {\r\n\t                            ++p;\r\n\t                        }\r\n\t                    } else {\r\n\t                        a[r][f] += c;\r\n\t                    }\r\n\t                    break;\r\n\t                default:\r\n\t                    a[r][f] += c;\r\n\t            }\r\n\t        }\r\n\t        if (o.head) {\r\n\t            a.shift()\r\n\t        }\r\n\t        if (a[a.length - 1].length < a[0].length) {\r\n\t            a.pop()\r\n\t        }\r\n\t        return a;\r\n\t    };\r\n\t\r\n\t    return CSV_To_Dataset;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(2),\r\n\t    __webpack_require__(32),\r\n\t    __webpack_require__(28)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, Err, clUtils) {\r\n\t\r\n\t        function Validator_CSV() { };\r\n\t\r\n\t        Validator_CSV.prototype.validate = function (dsdCols, codelists, csvCols, csvData) {\r\n\t            var toRet = [];\r\n\t\r\n\t            if (!dsdCols) {\r\n\t                toRet.push({ type: Err.DSD_COLUMNS_NULL });\r\n\t                return toRet;\r\n\t            }\r\n\t            if (!csvCols) {\r\n\t                toRet.push({ type: Err.CSV_COLUMNS_NULL });\r\n\t                return toRet;\r\n\t            }\r\n\t            if (dsdCols.length > csvCols.length) {\r\n\t                toRet.push({ type: Err.WRONG_COLUMN_COUNT });\r\n\t                return toRet;\r\n\t            }\r\n\t            /*for (var i = 0; i < dsdCols.length; i++) {\r\n\t                if (dsdCols[i].id != csvCols[i]) {\r\n\t                    toRet.push({ type: Err.WRONG_COLUMN_ID, index: i });\r\n\t                }\r\n\t            }*/\r\n\t\r\n\t            /*for (i = 0; i < dsdCols.length; i++) {\r\n\t                if (dsdCols[i].dataType == 'code') {\r\n\t                    var clId = dsdCols[i].domain.codes[0].idCodeList;\r\n\t                    if (dsdCols[i].domain.codes[0].version)\r\n\t                        clId += \"|\" + dsdCols[i].domain.codes[0].version;\r\n\t                    var unkCodes = this.checkCodes(dsdCols[i], codelists[clId], csvData, i);\r\n\t                    if (unkCodes.length > 0) {\r\n\t                        toRet.push({ type: Err.UNKNOWN_CODES, columnId: csvCols[i], codes: unkCodes, codelistId: clId });\r\n\t                    }\r\n\t                }\r\n\t            }*/\r\n\t\r\n\t            var row = 0;\r\n\t            for (i = 0; i < dsdCols.length; i++) {\r\n\t                if (nullOnEmpty(dsdCols[i].dataType)) {\r\n\t                    for (row = 0; row < csvData.length; row++) {\r\n\t                        if (csvData[row][i] == \"\") {\r\n\t                            csvData[row][i] = null;\r\n\t                        }\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            return toRet;\r\n\t        };\r\n\t\r\n\t        Validator_CSV.prototype.validateCodes = function (dsdCols, codelists, csvCols, csvData) {\r\n\t            var toRet = [];\r\n\t            if (csvData == null || csvData.length == 0)\r\n\t                return toRet;\r\n\t            if (csvCols == null || csvCols.length == 0)\r\n\t                return toRet;\r\n\t\r\n\t            for (i = 0; i < dsdCols.length; i++) {\r\n\t                if (dsdCols[i].dataType == 'code') {\r\n\t                    var clId = dsdCols[i].domain.codes[0].idCodeList;\r\n\t                    if (dsdCols[i].domain.codes[0].version)\r\n\t                        clId += \"|\" + dsdCols[i].domain.codes[0].version;\r\n\t\r\n\t                    var unkCodes = this.checkCodes(dsdCols[i], codelists[clId], csvData, i);\r\n\t                    if (unkCodes.length > 0) {\r\n\t                        toRet.push({ type: Err.UNKNOWN_CODES, columnId: csvCols[i], codes: unkCodes, codelistId: clId });\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            return toRet;\r\n\t        };\r\n\t\r\n\t        function nullOnEmpty(dataType) {\r\n\t            if (dataType == 'code')\r\n\t                return true;\r\n\t            if (dataType == 'number')\r\n\t                return true;\r\n\t            if (dataType == 'pecentage')\r\n\t                return true;\r\n\t            return false;\r\n\t        }\r\n\t\r\n\t        Validator_CSV.prototype.checkCodes = function (dsdCol, cl, csvData, index) {\r\n\t            var unkCodes = [];\r\n\t            for (var i = 0; i < csvData.length; i++) {\r\n\t                if (csvData[i][index]) {\r\n\t                    var isIn = isInCodelist(cl, csvData[i][index]);\r\n\t                    if (!isIn) {\r\n\t                        var uCode = csvData[i][index];\r\n\t                        if ($.inArray(uCode, unkCodes) == -1)\r\n\t                            unkCodes.push(uCode);\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            return unkCodes;\r\n\t        };\r\n\t\r\n\t        function isInCodelist(cl, code) {\r\n\t            var clU = new clUtils();\r\n\t            var found = clU.findCodeInCodelist(code, cl);\r\n\t            if (found == null)\r\n\t                return false;\r\n\t            return true;\r\n\t            /*var isIn = isInNode(cl.data, code);\r\n\t            return isIn;*/\r\n\t        };\r\n\t        \r\n\t        /*function isInNode(arr, code) {\r\n\t            for (var i = 0; i < arr.length; i++) {\r\n\t                if (arr[i].code == code) {\r\n\t                    return true;\r\n\t                }\r\n\t            }\r\n\t\r\n\t            var res = false;\r\n\t            for (i = 0; i < arr.length; i++)\r\n\t                if (arr[i].children)\r\n\t                    res = res || isInNode(arr[i].children, code);\r\n\t\r\n\t            return res;\r\n\t        };*/\r\n\t\r\n\t\r\n\t        return new Validator_CSV();\r\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\r\n\t        'use strict';\r\n\t        var e = {\r\n\t            //Col errors\r\n\t            DSD_COLUMNS_NULL: 'nullDSDCols',\r\n\t            CSV_COLUMNS_NULL: 'nullCsvCols',\r\n\t            WRONG_COLUMN_COUNT: 'wrongColumnCount',\r\n\t            //WRONG_COLUMN_ID: 'wrongColumnId',\r\n\t            UNKNOWN_CODES:'unknownCodes'\r\n\t        };\r\n\t        return e;\r\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t        __webpack_require__(2),\r\n\t        __webpack_require__(34),\r\n\t        __webpack_require__(24)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, colsMatchHTML, MLUtils) {\r\n\t        var widgetName = \"ColumnsMatch\";\r\n\t\r\n\t        var defConfig = {\r\n\t            maxRows: 5\r\n\t        };\r\n\t        var e = {\r\n\t            /*EVT_VALUE_CHANGED: 'valueChanged.' + widgetName + '.fenix',\r\n\t            EVT_ROW_ADDED: 'rowAdded.' + widgetName + '.fenix',\r\n\t            EVT_ROW_DELETED: 'rowDeleted.' + widgetName + '.fenix'*/\r\n\t        };\r\n\t        var h = {\r\n\t            trDSD: \"#trDSD\",\r\n\t            trCSV: \"#trCSV\",\r\n\t            tblColMatch: \"#tblColMatch\"\r\n\t        };\r\n\t        var html = {\r\n\t            rowDSD: '<td>%title%<br/>type: %type%</td>',\r\n\t            //rowCSV: '<td id=\"csvHead\" ondrop=\"this.drop(event)\" ondragover=\"this.allowDrop(event)\"><span id=\"%colId%\" draggable=\"true\" ondragstart=\"this.drag(event)\">%colId%</span></td>'\r\n\t            rowCSV: '<td class=\"csvHead\" style=\"cursor:move;\" draggable=\"true\"><div id=\"%colId%\" draggable=\"true\">%colId%</div></td>'\r\n\t        };\r\n\t\r\n\t        var ColumnsMatch = function (config) {\r\n\t            this.config = {};\r\n\t            $.extend(true, this.config, defConfig, config);\r\n\t            this.$cnt;\r\n\t\r\n\t            this.$tblColMatch;\r\n\t            this.$trDsd;\r\n\t            this.$trCsv;\r\n\t\r\n\t            this.dsd;\r\n\t            this.csvCols;\r\n\t            this.csvData;\r\n\t\r\n\t            this.lang = 'EN';\r\n\t        };\r\n\t\r\n\t        //Render - creation\r\n\t        ColumnsMatch.prototype.render = function (container, config, callB) {\r\n\t            $.extend(true, this.config, config);\r\n\t\r\n\t            this.$cnt = container;\r\n\t            this.$cnt.html(colsMatchHTML);\r\n\t\r\n\t            this.$tblColMatch = this.$cnt.find(h.tblColMatch);\r\n\t            this.$trDsd = this.$cnt.find(h.trDSD);\r\n\t            this.$trCsv = this.$cnt.find(h.trCSV);\r\n\t\r\n\t            this._bindEvents();\r\n\t\r\n\t            this._doML();\r\n\t            if (callB) callB();\r\n\t        }\r\n\t\r\n\t        ColumnsMatch.prototype.setData = function (dsd, csvCols, csvData) {\r\n\t            this.dsd = dsd;\r\n\t            this.csvCols = csvCols;\r\n\t            this.csvData = csvData;\r\n\t            var cols = dsd.columns;\r\n\t            this.$trDsd.html('');\r\n\t            this.$trCsv.html('');\r\n\t            if (!cols) return;\r\n\t            for (var i = 0; i < cols.length; i++) {\r\n\t                var title = MLUtils_getAvailableString(cols[i].title, this.lang);\r\n\t                var toSet = html.rowDSD.replace('%title%', title);\r\n\t                toSet = toSet.replace('%type%', cols[i].dataType);\r\n\t\r\n\t                this.$trDsd.append(toSet);\r\n\t            }\r\n\t\r\n\t            for (i = 0; i < csvCols.length; i++) {\r\n\t                toSet = html.rowCSV.replace('%colId%', csvCols[i]);\r\n\t                toSet = toSet.replace('%colId%', csvCols[i]);\r\n\t                this.$trCsv.append(toSet);\r\n\t                this.bindCsvHeadEvents();\r\n\t            }\r\n\t            this._updateView(this.csvCols, this.csvData);\r\n\t        }\r\n\t        ColumnsMatch.prototype.getCsvCols = function () {\r\n\t            var newOrder = this._getColIndexes(this.csvCols);\r\n\t            var toRet = [];\r\n\t            for (var i = 0; i < this.dsd.columns.length; i++) {\r\n\t                toRet[i] = this.csvCols[newOrder[i]];\r\n\t            }\r\n\t            return toRet;\r\n\t        }\r\n\t        ColumnsMatch.prototype.getCsvData = function () {\r\n\t            var newOrder = this._getColIndexes(this.csvCols);\r\n\t            var toRet = [];\r\n\t            for (var i = 0; i < this.csvData.length; i++) {\r\n\t                var row = [];\r\n\t                for (var j = 0; j < this.dsd.columns.length; j++) {\r\n\t                    row[j] = this.csvData[i][newOrder[j]];\r\n\t                }\r\n\t                toRet[i] = row;\r\n\t            }\r\n\t            return toRet;\r\n\t        }\r\n\t\r\n\t        ColumnsMatch.prototype._updateView = function (csvCols, csvData) {\r\n\t            var maxRCount = this.config.maxRows;\r\n\t            if (csvData.length < maxRCount) {\r\n\t                maxRCount = csvData.length\r\n\t            }\r\n\t            this._removeDataRows();\r\n\t            var idx = this._getColIndexes(csvCols);\r\n\t            var toAdd = \"\";\r\n\t            for (i = 0; i < maxRCount; i++) {\r\n\t                toAdd += \"<tr>\" + csvRowToRow(csvData[i], idx) + \"</tr>\";\r\n\t            }\r\n\t            toAdd += \"<tr>\";\r\n\t            for (i = 0; i < idx.length; i++) {\r\n\t                toAdd += \"<td>...</td>\";\r\n\t            }\r\n\t            toAdd += \"</tr>\";\r\n\t            this.$tblColMatch.append(toAdd);\r\n\t        }\r\n\t        ColumnsMatch.prototype._getColIndexes = function (csvCols) {\r\n\t            var $tdCsv = this.$trCsv.find('td');\r\n\t            var toRet = [];\r\n\t            for (var i = 0; i < $tdCsv.length; i++) {\r\n\t                var colId = $($tdCsv[i]).find('div')[0].id;\r\n\t                toRet[i] = findIndex(colId, csvCols);\r\n\t            }\r\n\t            return toRet;\r\n\t        }\r\n\t        ColumnsMatch.prototype._removeDataRows = function () {\r\n\t            var rows = this.$tblColMatch.find(\"tr\");\r\n\t            if (rows.length > 2) {\r\n\t                for (var i = 2; i < rows.length; i++) {\r\n\t                    rows[i].remove();\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        function findIndex(colId, cols) {\r\n\t            for (var i = 0; i < cols.length; i++) {\r\n\t                if (cols[i] == colId)\r\n\t                    return i;\r\n\t            }\r\n\t            return -1;\r\n\t        }\r\n\t        function csvRowToRow(csvRow, csvOrder) {\r\n\t            var toRet = \"\";\r\n\t            for (var i = 0; i < csvOrder.length; i++) {\r\n\t                toRet += \"<td>\";\r\n\t                toRet += csvRow[csvOrder[i]];\r\n\t                toRet += \"</td>\";\r\n\t            }\r\n\t            return toRet;\r\n\t        }\r\n\t\r\n\t        ColumnsMatch.prototype._bindEvents = function () { }\r\n\t\r\n\t        ColumnsMatch.prototype.bindCsvHeadEvents = function () {\r\n\t            var tds = this.$trCsv.find('.csvHead');\r\n\t            var me = this;\r\n\t            for (var i = 0; i < tds.length; i++) {\r\n\t                $(tds[i]).on('drop', function (event) { me.drop(event); });\r\n\t                $(tds[i]).on('dragover', me.allowDrop);\r\n\t                $(tds[i]).find('div').on('dragover', me.allowDrop);\r\n\t                $(tds[i]).find('div').on('dragstart', me.drag);\r\n\t            }\r\n\t        }\r\n\t        ColumnsMatch.prototype._doML = function () { }\r\n\t\r\n\t        ColumnsMatch.prototype.drag = function (ev) {\r\n\t            ev.originalEvent.dataTransfer.setData(\"text\", ev.target.id);\r\n\t        }\r\n\t        ColumnsMatch.prototype.allowDrop = function (ev) {\r\n\t            ev.preventDefault();\r\n\t        }\r\n\t        ColumnsMatch.prototype.drop = function (ev) {\r\n\t            ev.preventDefault();\r\n\t            var data = ev.originalEvent.dataTransfer.getData(\"text\");\r\n\t            /*\r\n\t            console.log($('#' + data));\r\n\t            console.log($(data));\r\n\t            console.log(data);\r\n\t            */\r\n\t            var $toMoveSrc = $('div#' + data);\r\n\t            var $cntSrc = $toMoveSrc.parent();\r\n\t\r\n\t            var $toMoveDest;\r\n\t            var $cntDest;\r\n\t            if ($(ev.target).is('div')) {\r\n\t                $toMoveDest = $(ev.target);\r\n\t                $cntDest = $toMoveDest.parent();\r\n\t            } else {\r\n\t                $cntDest = $(ev.target);\r\n\t                $toMoveDest = $cntDest.find('div');\r\n\t            }\r\n\t\r\n\t            $toMoveDest.remove();\r\n\t            $toMoveSrc.remove();\r\n\t            $cntDest.append($toMoveSrc);\r\n\t            $cntSrc.append($toMoveDest);\r\n\t\r\n\t            this._updateView(this.csvCols, this.csvData);\r\n\t            this.bindCsvHeadEvents();\r\n\t        }\r\n\t\r\n\t        return ColumnsMatch;\r\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 34 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<table id=tblColMatch class=\\\"table table-bordered\\\"> <tbody> <tr id=trDSD></tr> <tr id=trCSV></tr> </tbody> </table>\";\n\n/***/ }\n/******/ ])});;\n\n\n/** WEBPACK FOOTER **\n ** fenix-ui-DataEditor.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b1f279a643278d4bb576\n **/","define([\r\n    'jquery',\r\n    './DataEditor/DataEdit',\r\n    './DataEditor/helpers/CSV_To_Dataset',\r\n    './DataEditor/helpers/Validator_CSV',\r\n    './DataEditor/helpers/Data_Validator',\r\n    './DataEditor/ColumnsMatch/ColumnsMatch'\r\n\r\n], function ($, DataEdit, Csv2Dataset, ValidatorCSV, DataValidator, ColumnsMatch) {\r\n    var cfg = {};\r\n    var dataEdit;\r\n\r\n    function init(containerID, config, callB) {\r\n        cfg = config;\r\n        dataEdit = new DataEdit();\r\n        dataEdit.render($(containerID), cfg, callB);\r\n    }\r\n\r\n    function setColumns(columns, cLists, callB) {\r\n        dataEdit.setColumns(columns, cLists, callB);\r\n    }\r\n    function getColumns() { return dataEdit.getColumns(); }\r\n    function getCodelists() { return dataEdit.getCodelists(); }\r\n\r\n    function getData() { return dataEdit.getData(); }\r\n    function getDataWithoutValidation() { return dataEdit.getDataWithoutValidation(); }\r\n    function setData(data) { dataEdit.setData(data); }\r\n    function appendData(data) { dataEdit.appendData(data); }\r\n    function removeAllData() { dataEdit.removeAllData(); }\r\n    function getColumnsWithDistincts() { return dataEdit.getColumnsWithDistincts(); }\r\n\r\n    function isEditable(editable) {\r\n        if (typeof (editable) != 'undefined')\r\n            dataEdit.isEditable(editable);\r\n        else\r\n            return dataEdit.isEditable();\r\n    }\r\n    function destroy() {\r\n        if (dataEdit)\r\n            dataEdit.destroy();\r\n    }\r\n    function hasChanged() { return dataEdit.hasChanged(); }\r\n\r\n    function CSV_To_Dataset(a,b) {\r\n        return new Csv2Dataset(a,b);\r\n    }\r\n\r\n    function Validator_CSV() {\r\n        return ValidatorCSV;\r\n    }\r\n\r\n    function Columns_Match() {\r\n        return ColumnsMatch;\r\n    }\r\n\r\n    function Data_Validator() {\r\n        return new DataValidator();\r\n    }\r\n\r\n    return {\r\n        init: init,\r\n        setColumns: setColumns,\r\n        getColumns: getColumns,\r\n        getCodelists: getCodelists,\r\n        getData: getData,\r\n        getDataWithoutValidation: getDataWithoutValidation,\r\n        setData: setData,\r\n        appendData: appendData,\r\n        removeAllData: removeAllData,\r\n        getColumnsWithDistincts: getColumnsWithDistincts,\r\n        isEditable: isEditable,\r\n        destroy: destroy,\r\n        hasChanged: hasChanged,\r\n        CSV_To_Dataset: CSV_To_Dataset,\r\n        Validator_CSV: Validator_CSV,\r\n        Columns_Match: Columns_Match,\r\n        Data_Validator: Data_Validator\r\n    }\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/index.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 2\n ** module chunks = 0\n **/","define([\r\n'jquery',\r\n'../../nls/labels',\r\n'./simpleEditors/DataEditor',\r\n'./simpleEditors/ValidationResultsViewer',\r\n'./helpers/Data_Validator',\r\n'../../html/DataEditor/DataEdit.html',\r\n'amplify-pubsub'\r\n],\r\nfunction ($, mlRes, DataEditor, ValidationResultsViewer, Data_Validator, DataEditHTML, amplify) {\r\n\r\n    var widgetName = \"DataEdit\";\r\n    var defConfig = {};\r\n    var e = {\r\n        dataEditorValueChanged: 'valueChanged.DataEditor.fenix',\r\n        dataEditorRowAdded: 'rowAdded.DataEditor.fenix',\r\n        dataEditorRowDeleted: 'rowDeleted.DataEditor.fenix'\r\n    };\r\n\r\n    var DataEdit = function (config) {\r\n        this.config = {};\r\n        $.extend(true, this.config, defConfig, config);\r\n\r\n        this.$container;\r\n\r\n        this.dataEditor;\r\n        this.$dataEditor;\r\n\r\n        this.valResView;\r\n        this.$valResView;\r\n\r\n        this.cols;\r\n        this.codelists;\r\n\r\n        this.editEnabled = true;\r\n        this.changed = false;\r\n    };\r\n\r\n    //Render - creation\r\n    DataEdit.prototype.render = function (container, config, callB) {\r\n        $.extend(true, this.config, config);\r\n\r\n        this.$container = container;\r\n        this.$container.html(DataEditHTML);\r\n\r\n        this.$dataEditor = this.$container.find('#divDataEditor');\r\n        this.dataEditor = new DataEditor();\r\n        this.dataEditor.render(this.$container.find('#divDataEdit'), this.config);\r\n\r\n        this.$valResView = this.$container.find('#divValRes');\r\n        this.valResView = new ValidationResultsViewer();\r\n        this.valResView.render(this.$valResView);\r\n\r\n        this.doML();\r\n\r\n        var me = this;\r\n\r\n        //Merge valueChanged, rowAdded and rowDeleted?\r\n        amplify.subscribe(e.dataEditorValueChanged, this, this.updateValidationOnChange);\r\n        amplify.subscribe(e.dataEditorRowAdded, this, this.updateValidationOnChange);\r\n        amplify.subscribe(e.dataEditorRowDeleted, this, this.updateValidationOnChange);\r\n\r\n        this.$dataEditor.find('#btnAddRow').on('click', function (args) { me.dataEditor.newRow(); });\r\n\r\n        if (callB)\r\n            callB();\r\n    }\r\n    //Validation\r\n    DataEdit.prototype.updateValidation = function (data) {\r\n        this.changed = true;\r\n        var val = new Data_Validator();\r\n        var valRes = val.validate(this.cols, this.codelists, data);\r\n        this.updateValRes(valRes);\r\n        this.dataEditor.showValidationResults(valRes);\r\n    };\r\n    DataEdit.prototype.updateValidationOnChange = function (evt) { this.updateValidation(evt.allData); };\r\n    DataEdit.prototype.updateValRes = function (valRes) {\r\n        if (!valRes)\r\n            this.$valResView.hide();\r\n        else if (valRes.length == 0)\r\n            this.$valResView.hide();\r\n        else {\r\n            this.$valResView.show();\r\n            this.valResView.setValidationResults(valRes);\r\n        }\r\n    };    \r\n\r\n    DataEdit.prototype.getValidationResults = function () {\r\n        var val = new Data_Validator();\r\n        return val.validate(this.cols, this.codelists, this.dataEditor.getData());\r\n    };\r\n    //END Validation\r\n\r\n    //Set columns and codelists\r\n    DataEdit.prototype.setColumns = function (columns, codelists, callB) {\r\n        this.cols = columns;\r\n        this.codelists = codelists;\r\n        if (!this.cols || this.cols.length == 0)\r\n            throw new Error(\"At least one column must be defined\");\r\n\r\n        this.uiEnabled(false);\r\n        checkCodeColumnsAndCodelists(this.cols, this.codelists);\r\n        this.dataEditor.setColumns(this.cols, this.codelists, callB);\r\n        this.uiEnabled(true);\r\n    };\r\n    DataEdit.prototype.getColumns = function () { return this.cols; };\r\n    DataEdit.prototype.getCodelists = function () { return this.codelists; };\r\n\r\n    DataEdit.prototype.uiEnabled = function (enabled) {\r\n        if (enabled) {\r\n            this.$dataEditor.find('#btnAddRow').removeAttr('disabled');\r\n            this.$dataEditor.removeAttr('disabled');\r\n        }\r\n        else {\r\n            this.$dataEditor.find('#btnAddRow').attr('disabled', 'disabled');\r\n            this.$dataEditor.attr('disabled', 'disabled');\r\n        }\r\n    };\r\n\r\n    var checkCodeColumnsAndCodelists = function (cols, cLists) {\r\n        //console.log(\"cLists\",cLists);\r\n        if (!cols) return;\r\n        for (var i = 0; i < cols.length; i++)\r\n            if (cols[i].dataType == 'code') {\r\n                if (!cLists)\r\n                    throw new Error(\"Codelist for the column \" + cols[i].id + \" missing\");\r\n                //TODO: extend to multiple codelists\r\n                var cListId = cols[i].domain.codes[0].idCodeList;\r\n\r\n                if (cols[i].domain.codes[0].version)\r\n                    cListId = cListId + \"|\" + cols[i].domain.codes[0].version;\r\n\r\n                if (!(cListId in cLists))\r\n                    throw new Error(\"Codelist '\"+cListId+\"' for the column '\"+cols[i].id+\"' missing\");\r\n            }\r\n    };\r\n\r\n    DataEdit.prototype.getData = function () {\r\n        var valRes = this.getValidationResults();\r\n\r\n        if (valRes == null || valRes.length == 0)\r\n            return this.dataEditor.getData();\r\n        else\r\n            return false;\r\n    };\r\n    DataEdit.prototype.getDataWithoutValidation = function () {\r\n        return this.dataEditor.getData();\r\n    };\r\n    DataEdit.prototype.setData = function (data) {\r\n        if (this.cols)\r\n            this.dataEditor.setData(data);\r\n        this.updateValidation(data);\r\n        this.changed = false;\r\n    };\r\n    /*DataEdit.prototype.appendData = function (data) {\r\n        if (this.cols)\r\n            this.dataEditor.appendData(data);\r\n        this.changed = true;\r\n        this.updateValidation(this.dataEditor.getData());\r\n    };*/\r\n    DataEdit.prototype.removeAllData = function () {\r\n        this.dataEditor.removeAllData();\r\n    };\r\n    DataEdit.prototype.hasChanged = function () {\r\n        return this.changed;\r\n    };\r\n\r\n    //Column Distincts\r\n    DataEdit.prototype.getColumnsWithDistincts = function () {\r\n        var data = this.dataEditor.getData();\r\n        for (var i = 0; i < this.cols.length; i++) {\r\n            var col = this.cols[i];\r\n            switch (col.dataType) {\r\n                case 'code':\r\n                case 'customCode':\r\n                    var dist = getColumnDistinct(data, i);\r\n                    if (dist) {\r\n                        //TODO: Allow multiple codelists\r\n                        col.values = { codes: [] };\r\n                        col.values.codes[0] = { idCodeList: col.domain.codes[0].idCodeList };\r\n                        if (col.domain.codes[0].version)\r\n                            col.values.codes[0].version = col.domain.codes[0].version;\r\n                        col.values.codes[0].codes = [];\r\n                        for (var d = 0; d < dist.length; d++) {\r\n                            col.values.codes[0].codes.push({ code: dist[d] });\r\n                        }\r\n                    }\r\n                    else col.values = null;\r\n                    break;\r\n                case 'date':\r\n                case 'month':\r\n                case 'year':\r\n                    var dist = getColumnDistinct(data, i);\r\n                    if (dist)\r\n                        col.values = { timeList: dist };\r\n                    else\r\n                        col.values = null;\r\n                    break;\r\n            }\r\n        }\r\n        return this.cols;\r\n    };\r\n\r\n    var getColumnDistinct = function (data, idx) {\r\n        var toRet = [];\r\n        if (!data)\r\n            return null;\r\n        for (var i = 0; i < data.length; i++)\r\n            if ($.inArray(data[i][idx], toRet) == -1)\r\n                toRet.push(data[i][idx]);\r\n        return toRet;\r\n    };\r\n    //End column Distincts\r\n\r\n    DataEdit.prototype.isEditable = function (editable) {\r\n        if (typeof (editable) != 'undefined') {\r\n            if (editable)\r\n                this.$dataEditor.find('#btnAddRow').show();\r\n            else\r\n                this.$dataEditor.find('#btnAddRow').hide();\r\n            this.editEnabled = editable;\r\n            this.dataEditor.isEditable(editable);\r\n        }\r\n        else\r\n            return this.editEnabled;\r\n    };\r\n    DataEdit.prototype.destroy = function () {\r\n        amplify.unsubscribe(e.dataEditorValueChanged, this.updateValidation);\r\n        amplify.unsubscribe(e.dataEditorRowAdded, this.updateValidation);\r\n        amplify.unsubscribe(e.dataEditorRowDeleted, this.updateValidation);\r\n        this.$dataEditor.find('#btnAddRow').off('click');\r\n        this.dataEditor.destroy();\r\n    };\r\n\r\n    //MultiLang\r\n    DataEdit.prototype.doML = function () {\r\n        this.$dataEditor.find('#btnAddRow').html(mlRes['add']);\r\n    };\r\n    //END Multilang\r\n\r\n    return DataEdit;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/DataEdit.js\n ** module id = 3\n ** module chunks = 0\n **/","if (typeof define !== 'function') {\r\n    var define = require('amdefine')(module);\r\n}\r\ndefine([\r\n        \"./en/labels\",\r\n        \"./fr/labels\"\r\n    ],\r\n    function (i18nEn,i18nFr) {\r\n\r\n        'use strict';\r\n\r\n        return {\r\n\r\n            en: i18nEn,\r\n            fr: i18nFr\r\n\r\n        }\r\n    });\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/nls/labels.js\n ** module id = 4\n ** module chunks = 0\n **/","/*global define*/\r\ndefine(function () {\r\n\r\n    'use strict';\r\n\r\n    return  {\r\n        //\"ok\": \"Ok\",\r\n        //\"cancel\": \"Cancel\",\r\n        \"confirmDelete\": \"Delete?\",\r\n        \"unsavedData\": \"Some changes are unsaved, cancel anyway?\",\r\n        //\"yearInterval\": \"Year must be a number \",\r\n        //\"monthInterval\": \"Month must be a number (1..12)\",\r\n\r\n        \"nullKey\": \"Key fields cannot be empty\",\r\n        \"sameKeyVals\": \"Key fields cannot be duplicated\",\r\n        \"unknownCode\": \"Unknown code\",\r\n        \"invalidYear\": \"Year is not valid\",\r\n        \"invalidMonth\": \"Month is not valid\",\r\n        \"invalidDate\": \"Date is not valid\",\r\n        \"invalidNumber\": \"Number is not valid\",\r\n        \"invalidBool\": \"Boolean is not valid\",\r\n\r\n        \"NAN\": \"Value is not a number\",\r\n        \"OutOfRange\": \"Value is out of the allowed range\",\r\n        \"Null\": \"Value cannot be blank\"\r\n    }\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/nls/en/labels.js\n ** module id = 5\n ** module chunks = 0\n **/","/*global define*/\r\ndefine(function () {\r\n\r\n    'use strict';\r\n\r\n    return {\r\n\r\n        //\"ok\": \"Ok\",\r\n        //\"cancel\": \"Annuler\",\r\n        \"confirmDelete\": \"Supprimer?\",\r\n        \"unsavedData\": \"Certains changements n'ont pas été enregistrés, annuler quand même?\",\r\n        //\"yearInterval\": \"L'année doit être numérique\",\r\n        //\"monthInterval\": \"Le mois doit être numérique (1..12)\",\r\n\r\n        \"nullKey\": \"Les champs clés ne peuvent pas être vides\",\r\n        \"sameKeyVals\": \"Les champs clés ne peuvent pas être dupliqués\",\r\n        \"unknownCode\": \"Code inconnu\",\r\n        \"invalidYear\": \"L'année n'est pas valable\",\r\n        \"invalidMonth\": \"Le mois n'est pas valable\",\r\n        \"invalidDate\": \"La date n'est pas valable\",\r\n        \"invalidNumber\": \"Le nombre n'est pas valable\",\r\n        \"invalidBool\": \"Booléen n'est pas valable\",\r\n\r\n        \"NAN\": \"La valeur n'est pas numérique\",\r\n        \"OutOfRange\": \"La valeur est hors de la plage autorisée\",\r\n        \"Null\": \"La valeur ne peut pas être vide\"\r\n\r\n    }\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/nls/fr/labels.js\n ** module id = 6\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        'loglevel',\r\n        './RowEditorPopup',\r\n        '../../../html/DataEditor/simpleEditors/DataEditor.html',\r\n        '../../../nls/labels',\r\n        '../helpers/MLUtils',\r\n        'amplify-pubsub',\r\n        'bootstrap'\r\n],\r\n    function ($, log, RowEditorPopup, DataEditorHTML, mlRes, MLUtils, amplify) {\r\n        var widgetName = \"DataEditor\";\r\n\r\n        var defConfig = {\r\n            thButtons: \"<th>E</th><th>D</th>\"\r\n        };\r\n        var e = {\r\n            EVT_VALUE_CHANGED: 'valueChanged.' + widgetName + '.fenix',\r\n            EVT_ROW_ADDED: 'rowAdded.' + widgetName + '.fenix',\r\n            EVT_ROW_DELETED: 'rowDeleted.' + widgetName + '.fenix'\r\n        };\r\n        var h = {\r\n            divDataGrid: '#divDataGrid',\r\n            divRowEditorPopup: '#divRowEditorPopup',\r\n            btnEditRowCanc: '#btnEditRowCanc',\r\n            btnEditRowOk: '#btnEditRowOk',\r\n            tblDataBody: '#tblDataBody',\r\n            tblDataHead: '#tblDataHead',\r\n            editButtonsClass: 'bE',\r\n            delButtonsClass: 'bD'\r\n        };\r\n        var html = {\r\n            btnEdit: '<button type=\"button\" class=\"btn btn-default bE\" data-rid=%idx%><span class=\"glyphicon glyphicon-pencil\"></span></button>',\r\n            btnDel: '<button type=\"button\" class=\"btn btn-default bD\"data-rid=%idx%><span class=\"glyphicon glyphicon-trash\"></span></button>'\r\n        };\r\n\r\n        var COLOR_ERROR = \"error\";\r\n        var COLOR_DEFAULT = \"default\";\r\n\r\n        var DataEditor = function (config) {\r\n            this.config = {};\r\n            $.extend(true, this.config, config, defConfig);\r\n\r\n            this.rowEditor = new RowEditorPopup();\r\n\r\n            this.$cnt;\r\n            this.$editWindow;\r\n            this.$dataGrid;\r\n            this.cols;\r\n            this.codelists;\r\n            this.data = [];\r\n            this.$tBody;\r\n            this.editEnabled = true;\r\n\r\n            this.lang = 'EN';\r\n            this.lang = this.lang.toLowerCase();\r\n        };\r\n\r\n        //Render - creation\r\n        DataEditor.prototype.render = function (container, config, callB) {\r\n            $.extend(true, this.config, config);\r\n\r\n            this.$cnt = container;\r\n            this.$cnt.html(DataEditorHTML);\r\n            this.$dataGrid = this.$cnt.find(h.divDataGrid);\r\n\r\n            this.$editWindow = this.$cnt.find(h.divRowEditorPopup);\r\n            this.rowEditor.render(this.$editWindow);\r\n\r\n            if (localStorage.getItem('locale'))\r\n                this.lang = localStorage.getItem('locale');\r\n\r\n            /*\r\n            var me = this;\r\n            this.$cnt.find(h.btnEditRowCanc).on('click', function () {\r\n                me.$editWindow.modal('hide');\r\n            });\r\n            this.$cnt.find(h.btnEditRowOk).on('click', function () { me.rowEditOk(); });\r\n            this.$editWindow.on('hidden.bs.modal', function (e) {\r\n                me.rowEditor.reset();\r\n                me.$editWindow.off(\"keyup\");\r\n            });\r\n            */\r\n            this._bindEvents();\r\n            this.$tBody = this.$cnt.find(h.tblDataBody);\r\n\r\n            this._doML();\r\n            if (callB) callB();\r\n\r\n            log.info(\"DataEditor rendered\", this.config);\r\n        }\r\n\r\n        DataEditor.prototype.setColumns = function (cols, codelists, callB) {\r\n            this.cols = cols;\r\n            this.codelists = convertCodelists(codelists, this.lang);\r\n            if (!cols) {\r\n                return;\r\n            }\r\n            //The table\r\n            this.updateTableHeader();\r\n\r\n            //The row editor\r\n            this.rowEditor.setColumns(this.cols, this.codelists);\r\n            if (callB) callB();\r\n        };\r\n        var createTH = function (label) {\r\n            return '<th>' + label + '</th>';\r\n        };\r\n\r\n        DataEditor.prototype._showEditWindow = function (row) {\r\n            log.info(\"_showEditWindow\", row);\r\n            this.$editWindow.modal('show');\r\n            this.rowEditor.reset();\r\n            if (row)\r\n                this.rowEditor.setRow(row);\r\n\r\n            var me = this;\r\n            this.$editWindow.on(\"keyup\", function (evt) {\r\n                if (evt.keyCode == 13) {\r\n                    me.rowEditOk();\r\n                }\r\n            });\r\n        };\r\n\r\n        DataEditor.prototype._bindEvents = function () {\r\n            log.info(\"Data Editor - _bindEvents\");\r\n            var me = this;\r\n            this.$cnt.find(h.btnEditRowCanc).on('click', function () {\r\n                if (me.rowEditor.changed()) {\r\n                    if (!confirm(mlRes[me.lang]['unsavedData']))\r\n                        return;\r\n                }\r\n                me.$editWindow.modal('hide');\r\n            });\r\n            this.$cnt.find(h.btnEditRowOk).on('click', function () { me.rowEditOk(); });\r\n            this.$editWindow.on('hidden.bs.modal', function (e) {\r\n                me.rowEditor.reset();\r\n                me.$editWindow.off(\"keyup\");\r\n            });\r\n        };\r\n\r\n        DataEditor.prototype._unbindEvents = function () {\r\n            this.$cnt.find(h.btnEditRowCanc).off('click');\r\n            this.$cnt.find(h.btnEditRowOk).off('click');\r\n            this.$editWindow.off('hidden.bs.modal');\r\n            this.$tBody.find('.' + h.editButtonsClass).off('click');\r\n            this.$tBody.find('.' + h.delButtonsClass).off('click');\r\n        };\r\n\r\n        DataEditor.prototype.destroy = function () {\r\n            this._unbindEvents();\r\n            this.rowEditor.destroy();\r\n            this.$tBody.html('');\r\n        };\r\n\r\n        DataEditor.prototype.rowEditOk = function () {\r\n            if (!this.rowEditor.isValid()) {\r\n                this.rowEditor.updateValidationHelp();\r\n                return;\r\n            }\r\n            var row = this.rowEditor.getRow();\r\n            if (row.uid != -1) {//Edit\r\n                this.data[row.uid] = row.data;\r\n                var evtArgs = {};\r\n                evtArgs.newData = row.data;\r\n                evtArgs.allData = this.data;\r\n                amplify.publish(e.EVT_VALUE_CHANGED, evtArgs);\r\n            }\r\n            else {//New\r\n                this.data.push(row.data);\r\n\r\n                var evtArgs = {};\r\n                evtArgs.allData = this.data;\r\n                amplify.publish(e.EVT_ROW_ADDED, evtArgs);\r\n            }\r\n\r\n            //DO NOT UPDATE ALL THE TABLE!!!\r\n            this.updateTable();\r\n            this.$editWindow.modal('hide');\r\n        }\r\n\r\n        DataEditor.prototype.newRow = function () {\r\n            this._showEditWindow(null);\r\n        }\r\n\r\n        DataEditor.prototype.isEditable = function (editable) {\r\n            console.log(\"isEditable\",editable)\r\n            this.editEnabled = editable;\r\n            if (!this.cols)\r\n                return;\r\n            if (typeof (editable) == 'undefined')\r\n                return this.editEnabled;\r\n            this.updateTableHeader();\r\n            this.updateTable();\r\n        }\r\n\r\n        //DATA\r\n        DataEditor.prototype.setData = function (data) {\r\n            if (!this.cols)\r\n                throw new Error(\"Cannot set data without table structure, use setColumns before setData\");\r\n            if (!data)\r\n                return;\r\n            this.data = data;\r\n            this.updateTable();\r\n        };\r\n\r\n        DataEditor.prototype.removeAllData = function () {\r\n            this.data = [];\r\n            this.updateTable();\r\n        };\r\n        DataEditor.prototype.updateTableHeader = function () {\r\n\r\n            var tHead = this.$cnt.find(h.tblDataHead);\r\n            tHead.html('');\r\n            //tHead.append('<th style=\"display:none;\"></th>');\r\n            tHead.append('<th>#</th>');\r\n            for (var i = 0; i < this.cols.length; i++) {\r\n                //MLUtils get multilanguage string\r\n                tHead.append(createTH(this.cols[i].title[this.lang.toUpperCase()]));\r\n            }\r\n            if (this.editEnabled) tHead.append(this.config.thButtons);\r\n\r\n        };\r\n        DataEditor.prototype.updateTable = function () {\r\n            this.$tBody.html('');\r\n            if (!this.data)\r\n                return;\r\n            for (var i = 0; i < this.data.length; i++) {\r\n                this.$tBody.append(createTblRow(i, this.cols, this.codelists, this.data[i], this.editEnabled));\r\n            }\r\n            //Attach all the events\r\n            if (this.editEnabled) {\r\n                var me = this;\r\n                this.$tBody.find('.' + h.editButtonsClass).on('click', function () {\r\n                    var rowId = $(this).data('rid');\r\n                    me._showEditWindow({ uid: rowId, data: me.data[rowId] });\r\n                });\r\n                this.$tBody.find('.' + h.delButtonsClass).on('click', function () {\r\n                    var res = confirm(mlRes[this.lang]['confirmDelete']);\r\n                    if (!res)\r\n                        return;\r\n                    me.deleteRow($(this).data('rid'));\r\n                });\r\n            }\r\n        };\r\n        DataEditor.prototype.deleteRow = function (index) {\r\n            this.data.splice(index, 1);\r\n            this.updateTable();\r\n            amplify.publish(e.EVT_ROW_DELETED, this.data);\r\n        };\r\n        DataEditor.prototype.getRowByRowId = function (rowId) {\r\n            //Test which one is faster\r\n            /*return this.$tBody.find('tr td:first-child').filter(function () {\r\n                console.log($(this).html()==rowId);\r\n                return ($(this).html() == rowId);\r\n            }).closest('tr');*/\r\n\r\n            var rows = this.$tBody.find('tr');\r\n            for (var i = 0; i < rows.length; i++) {\r\n                if (rowId == $(rows[i]).find('td:first').html())\r\n                    return $(rows[i]);\r\n            };\r\n            return null;\r\n        };\r\n\r\n        function createTblRow(idx, cols, codelists, row, editControls) {\r\n\r\n            var toRet = '<tr>';\r\n            //toRet += '<td style=\"display:none;\">' + idx + '</td>'\r\n            toRet += '<td>' + idx + '</td>'\r\n            for (var i = 0; i < cols.length; i++) { //was row.lenght\r\n                toRet += '<td>';\r\n                if (row[i] === null)\r\n                    toRet += '';\r\n                else if (cols[i].dataType == 'code')\r\n                    toRet += addLabelToData(cols[i], codelists, row[i], this.lang);\r\n                else {\r\n                    toRet += row[i];\r\n                }\r\n                toRet += '</td>';\r\n            }\r\n            if (editControls) {\r\n                toRet += '<td>' + html.btnEdit.replace('%idx%', idx) + '</td>';\r\n                toRet += '<td>' + html.btnDel.replace('%idx%', idx) + '</td>';\r\n            }\r\n            toRet += '</tr>';\r\n            return toRet;\r\n        };\r\n        var getCodelistUid = function (domain) {\r\n            //Make it handle multiple codelsits\r\n            var cListUid = domain.codes[0].idCodeList;\r\n            if (domain.codes[0].version) cListUid += \"|\" + domain.codes[0].version;\r\n            return cListUid;\r\n        };\r\n        function addLabelToData(col, codelists, data) {\r\n            //TODO Make it handle multiple Codelists\r\n        //    console.log(\"addLabelToData\",col, codelists, data);\r\n            var cListUID = getCodelistUid(col.domain);\r\n        //    console.log(cListUID);\r\n            var lbl = getCodeLabel(codelists[cListUID].data, data);\r\n            if (lbl === null) return '';\r\n            return lbl;\r\n        };\r\n        var getCodeLabel = function (codes, code) {\r\n            if (!codes)\r\n                return null;\r\n            for (var i = 0; i < codes.length; i++)\r\n                if (codes[i].code == code)\r\n                    //return codes[i].title + \" [\" + code + \"]\";\r\n                    return codes[i].title;\r\n            return null;\r\n        };\r\n\r\n        DataEditor.prototype.getData = function () {\r\n            log.info(\"getData \", this.data)\r\n            return this.data;\r\n        }\r\n        //END Data\r\n\r\n\r\n        //Validation results\r\n        DataEditor.prototype.showValidationResults = function (valRes) {\r\n\r\n            /* this.resetValidationResults();\r\n             if (!valRes)\r\n                 return;\r\n             for (var i = 0; i < valRes.length; i++) {\r\n                 if (valRes[i].colId)\r\n                     this.setCellError(valRes[i].dataIndex, valRes[i].colId);\r\n                 else\r\n                     this.setRowError(valRes[i].dataIndex, valRes[i].colId);\r\n             }*/\r\n\r\n\r\n            /* this.resetValidationResults();\r\n        \r\n             if (!valRes)\r\n                 return;\r\n             for (var i = 0; i < valRes.length; i++) {\r\n                 if (valRes[i].colId)\r\n                     this.setCellColor(valRes[i].dataIndex, valRes[i].colId, COLOR_ERROR);\r\n                 else\r\n                     this.setRowColor(valRes[i].dataIndex, COLOR_ERROR);\r\n             }*/\r\n        }\r\n\r\n        DataEditor.prototype.resetValidationResults = function () {\r\n            /*var rowCount = this.$dataGrid.jqxGrid('getrows').length;\r\n            for (var i = 0; i < rowCount; i++)\r\n                this.setRowColor(i, COLOR_DEFAULT);*/\r\n        }\r\n\r\n        DataEditor.prototype.setRowColor = function (rowIdx, color) {\r\n            /*var cols = this.$dataGrid.jqxGrid('columns');\r\n        \r\n            for (var i = 0; i < cols.records.length; i++)\r\n                this.setCellColor(rowIdx, cols.records[i].datafield, color);*/\r\n        }\r\n\r\n        DataEditor.prototype.setCellColor = function (rowIdx, colId, color) {\r\n            /*var htmlRows = this.$dataGrid.find(\"div[role='row']\");\r\n            var htmlRow = htmlRows[rowIdx];\r\n            var colIdx = this.$dataGrid.jqxGrid('getcolumnindex', colId);\r\n            var tds = $(htmlRow).find(\"div[role='gridcell']\");\r\n            this.changeCellBackgroundColor(tds[colIdx], color);*/\r\n        }\r\n        DataEditor.prototype.setCellError = function (rowIdx, colId) {\r\n            /*var colIndex = -1;\r\n            for (var i = 0; i < this.cols.length; i++) {\r\n                if (colId == this.cols[i]) {\r\n                    colIndex = i;\r\n                }\r\n            }\r\n            var row = $tBody.find('td:first');\r\n            console.log(row);*/\r\n\r\n\r\n        };\r\n\r\n        DataEditor.prototype.changeCellBackgroundColor = function (htmlCell, color) {\r\n            /*if (color == COLOR_ERROR)\r\n                $(htmlCell).addClass(\"fx-red-cell\");\r\n            else if (color == COLOR_DEFAULT)\r\n                $(htmlCell).removeClass(\"fx-red-cell\");*/\r\n        }\r\n\r\n        //END Validation results\r\n\r\n        //Codelists helpers\r\n        function convertCodelists(codelists, lang) {\r\n            var toRet = {};\r\n            for (var cl in codelists) {\r\n                toRet[cl] = { metadata: {} };\r\n                toRet[cl].data = convertCodes(codelists[cl].data, lang);\r\n            }\r\n            return toRet;\r\n        }\r\n        //number of levels for a codelist is not always available.\r\n        //Always call the recursive flatten\r\n        function convertCodes(codes, lang) {\r\n            if (!codes)\r\n                return null;\r\n            var toRet = [];\r\n            recFlatten(codes, toRet, lang)\r\n            return toRet;\r\n        }\r\n        /*function convertCodes(levels, codes, lang) {\r\n            if (!codes)\r\n                return null;\r\n            var toRet = [];\r\n            if (levels == 1) {\r\n                for (var i = 0; i < codes.length; i++)\r\n                    toRet.push(convertCode(codes[i], lang));\r\n            }\r\n            else {\r\n                recFlatten(codes, toRet, lang)\r\n            }\r\n            return toRet;\r\n        }*/\r\n        function recFlatten(node, list, lang) {\r\n            if (!node)\r\n                return;\r\n            for (var i = 0; i < node.length; i++) {\r\n                list.push(convertCode(node[i], lang));\r\n                if (node[i].children)\r\n                    recFlatten(node[i].children, list);\r\n            }\r\n        }\r\n        function convertCode(code, lang) {\r\n\r\n            var MLUtils_getAvailableLang = function (ml, lang) {\r\n                if (!ml)\r\n                    return \"\";\r\n                if (!lang)\r\n                    lang = 'EN';\r\n                lang = lang.toUpperCase();\r\n                if (lang in ml)\r\n                    return lang;\r\n                if ('EN' in ml)\r\n                    return 'EN';\r\n                for (var langs in ml)\r\n                    return langs;\r\n            }\r\n\r\n            return {\r\n                level: code.level,\r\n                title: code.title[MLUtils_getAvailableLang(code.title,lang)] + \" [\" + code.code + \"]\",\r\n                code: code.code\r\n            };\r\n        }\r\n        //End Codelists helpers\r\n\r\n        DataEditor.prototype._doML = function () {\r\n        }\r\n\r\n        return DataEditor;\r\n    });\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/DataEditor.js\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"loglevel\"\n ** module id = 8\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        'loglevel',\r\n        '../../../nls/labels',\r\n        './rE/RowEditorFactory'\r\n],\r\nfunction ($, log, MLRes, reFactory) {\r\n    var widgetName = \"DataEditorPopup\";\r\n    var yMax = 3000;\r\n    var yMin = 0;\r\n\r\n    var defConfig = { YMin: 0, YMax: 3000, decimalDigits: 5 };\r\n    var reFactory = new reFactory();\r\n\r\n    var RowEditorPopup = function (config) {\r\n        this.config = {};\r\n        $.extend(true, this.config, defConfig, config);\r\n\r\n        this.$window;\r\n        this.cols;\r\n        this.codelists;\r\n\r\n        this.lang = 'EN';\r\n        if (localStorage.getItem('locale'))\r\n            this.lang = localStorage.getItem('locale');\r\n\r\n        this.lang = this.lang.toLowerCase();\r\n\r\n        this.editors = [];\r\n        this.uidInEdit = -1;\r\n\r\n        this.oldVal = null;\r\n    };\r\n\r\n    RowEditorPopup.prototype.render = function (container, config) {\r\n        $.extend(true, this.config, config);\r\n        this.$window = container;\r\n\r\n    }\r\n    RowEditorPopup.prototype.setColumns = function (cols, codelists) {\r\n        this.cols = cols;\r\n        this.codelists = codelists;\r\n        if (!cols) {\r\n            return;\r\n        }\r\n        this.createStrucure();\r\n    }\r\n\r\n    RowEditorPopup.prototype.createStrucure = function () {\r\n        this.editors = [];\r\n\r\n        var $tbl = this.$window.find('#tblRowEditor');\r\n        var tBody = $tbl.find('tbody');\r\n        var toAppend;\r\n        for (var i = 0; i < this.cols.length; i++) {\r\n            toAppend = '<tr>';\r\n            toAppend += '<td>' + this.cols[i].title[this.lang.toUpperCase()] + '</td>';\r\n            toAppend += '<td><div id=\"' + generateEditFiledId(this.cols[i].id) + '\"></div></td>';\r\n            toAppend += '</tr>';\r\n            tBody.append(toAppend);\r\n        }\r\n        for (var i = 0; i < this.cols.length; i++) {\r\n            var col = this.cols[i];\r\n            var cnt = tBody.find('#' + generateEditFiledId(col.id));\r\n            var cfg = null;\r\n            this.editors[i] = reFactory.create(col.dataType, cfg);\r\n\r\n            switch (col.dataType) {\r\n                case 'code':\r\n                    var codelistUid = col.domain.codes[0].idCodeList;\r\n                    if (col.domain.codes[0].version)\r\n                        codelistUid += \"|\" + col.domain.codes[0].version;\r\n                    this.editors[i].render(cnt, null, [this.codelists[codelistUid]]);\r\n                    break;\r\n                case 'customCode':\r\n                    //ADD custom code edit\r\n                    break;\r\n                case 'year':\r\n                    var yMin = this.config.YMin;\r\n                    var yMax = this.config.YMax;\r\n                    if (col.domain && col.domain.period) {\r\n                        yMin = col.domain.period.from;\r\n                        yMax = col.domain.period.to;\r\n                    }\r\n                    this.editors[i].render(cnt, { yMin: yMin, yMax: yMax });\r\n                    break;\r\n                case 'number':\r\n                case 'percentage':\r\n                    this.editors[i].render(cnt, { decimalDigits: this.config.decimalDigits });\r\n                    break;\r\n                case 'month':\r\n                case 'date':\r\n                case 'text':\r\n                case 'bool':\r\n                    this.editors[i].render(cnt, null);\r\n                    break;\r\n            }\r\n            if (col.key)\r\n                this.editors[i].isMandatory(true);\r\n        }\r\n    }\r\n\r\n    function generateEditFiledId(id) {\r\n        return 'trRowEdit_' + id;\r\n    }\r\n    RowEditorPopup.prototype.reset = function (row) {\r\n        log.info(\"RowEditorPopup - reset\", this.editors, this.cols.length)\r\n        this.uidInEdit = -1;\r\n        if (!this.cols) return;\r\n        for (var i = 0; i < this.cols.length; i++) {\r\n            this.editors[i].reset();\r\n        }\r\n        this.oldVal = null;\r\n    }\r\n\r\n    RowEditorPopup.prototype.updateValidationHelp = function () {\r\n        if (!this.cols)\r\n            return;\r\n        for (var i = 0; i < this.cols.length; i++) {\r\n            if (this.editors[i].updateValidationHelp)\r\n                this.editors[i].updateValidationHelp();\r\n        }\r\n    }\r\n\r\n    RowEditorPopup.prototype.isValid = function () {\r\n        for (var i = 0; i < this.cols.length; i++)\r\n            if (!this.editors[i].isValid())\r\n                return false;\r\n        return true;\r\n    }\r\n\r\n    RowEditorPopup.prototype.setRow = function (row) {\r\n        log.info(\"setRow\", row)\r\n        this.reset();\r\n        if (!this.cols)\r\n            throw new Error('cannot set row when columns are null');\r\n        this.oldVal = row;\r\n        if (row.uid != 'undefined')\r\n            this.uidInEdit = row.uid;\r\n        else\r\n            this.uidInEdit = -1;\r\n        for (var i = 0; i < this.cols.length; i++)\r\n            if (this.editors[i]) {\r\n                this.editors[i].setValue(row.data[i]);\r\n            }\r\n            else\r\n                throw new Error('Editor cannot be null for dataType ' + this.cols[i].dataType);\r\n    }\r\n    RowEditorPopup.prototype.getRow = function (row) {\r\n        if (!this.cols)\r\n            throw new Error('cannot get row when columns are null');\r\n        var toRet = { uid: this.uidInEdit, data: [] };\r\n        for (var i = 0; i < this.cols.length; i++) {\r\n            var val = this.editors[i].getValue();\r\n            if (!val)\r\n                toRet.data[i] = null;\r\n            else if (this.cols[i].dataType == 'number' || this.cols[i].dataType == 'percentage')\r\n                toRet.data[i] = parseFloat(val);\r\n            else\r\n                toRet.data[i] = val;\r\n        }\r\n        return toRet;\r\n    };\r\n\r\n    RowEditorPopup.prototype.changed = function () {\r\n        var newVal = this.getRow();\r\n\r\n        if (this.oldVal == null) {\r\n            for (var i = 0; i < this.cols.length; i++) {\r\n                if (newVal.data[i] != '')\r\n                    return true;\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < this.cols.length; i++) {\r\n                if (newVal.data[i] != this.oldVal.data[i])\r\n                    return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    RowEditorPopup.prototype.destroy = function () {\r\n        if (!this.cols)\r\n            return;\r\n        for (var i = 0; i < this.cols.length; i++)\r\n            this.editors[i].destroy();\r\n    }\r\n\r\n    return RowEditorPopup;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/RowEditorPopup.js\n ** module id = 9\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        './RowEditor_bool',\r\n        './RowEditor_code',\r\n        './RowEditor_date',\r\n        './RowEditor_month',\r\n        './RowEditor_number',\r\n        './RowEditor_string',\r\n        './RowEditor_year'\r\n],\r\nfunction ($, reBool, reCode, reDate, reMonth, reNumber, reString, reYear) {\r\n    var defConfig = {};\r\n\r\n    var RowEditorFactory = function (config) {\r\n        this.config = {};\r\n        $.extend(true, this.config, defConfig, config);\r\n    };\r\n\r\n    RowEditorFactory.prototype.create = function (id, config) {\r\n        switch (id) {\r\n            case 'code':\r\n                return new reCode(config);\r\n                break;\r\n            case 'customCode':\r\n                //return new reCustomCode();\r\n                break;\r\n            case 'year':\r\n                return new reYear(config);\r\n                break;\r\n            case 'month':\r\n                return new reMonth(config);\r\n                break;\r\n            case 'date':\r\n                return new reDate(config);\r\n                break;\r\n            case 'number':\r\n            case 'percentage':\r\n                return new reNumber(config);\r\n                break;\r\n            case 'text':\r\n                return new reString(config);\r\n                break;\r\n            case 'bool':\r\n                return new reBool(config);\r\n                break;\r\n        }\r\n    }\r\n\r\n    return RowEditorFactory;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/rE/RowEditorFactory.js\n ** module id = 10\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        '../../../../nls/labels',\r\n        './RowEditor_base',\r\n        'bootstrap'\r\n],\r\nfunction ($, mlRes, rowEditorBase) {\r\n    var defConfig = {};\r\n\r\n    var RowEditor_bool = function (config) {\r\n        this.parent.constructor.call(this, config);\r\n    };\r\n    RowEditor_bool.prototype = Object.create(rowEditorBase.prototype);\r\n    RowEditor_bool.prototype.constructor = RowEditor_bool;\r\n    RowEditor_bool.prototype.parent = rowEditorBase.prototype;\r\n\r\n    RowEditor_bool.prototype.render = function (container, config) {\r\n        $.extend(true, this.config, config);\r\n        this.$cnt = container;\r\n        var html = '<input type=\"checkbox\" />';\r\n        this.$cnt.html(html);\r\n        var me = this;\r\n        var $chk = this.$cnt.find('input');\r\n\r\n\r\n\r\n\r\n        //WAIT for the CSS to be fixed and remove this\r\n        $chk.show();\r\n\r\n\r\n\r\n        $chk.on('click', function () { me.updateValidationHelp(); });\r\n    }\r\n    RowEditor_bool.prototype.destroy = function () { this.$cnt.find('input').off('click'); }\r\n\r\n    RowEditor_bool.prototype.updateValidationHelp = function () {\r\n        var error = this.validate();\r\n        this.parent.updateValidationHelp.call(this, error);\r\n    }\r\n    RowEditor_bool.prototype.reset = function () {\r\n        this.$cnt.find('input').prop('checked', false);\r\n        this.$cnt.popover('destroy');\r\n    }\r\n    RowEditor_bool.prototype.setValue = function (val) {\r\n        this.reset();\r\n        this.$cnt.find('input').prop('checked', val);\r\n    }\r\n    RowEditor_bool.prototype.getValue = function () {\r\n        return this.$cnt.find('input').prop('checked');\r\n    }\r\n    RowEditor_bool.prototype.isMandatory = function (m) {\r\n        if (m == 'undefined')\r\n            return this.mandatory;\r\n        this.mandatory = m;\r\n    }\r\n    RowEditor_bool.prototype.validate = function () {\r\n        /*var val = this.getValue();\r\n        var toRet = [];\r\n        if (this.mandatory && !val)\r\n            return this.ERROR_NULL;*/\r\n        return null;\r\n    }\r\n    RowEditor_bool.prototype.isValid = function () {\r\n        if (this.validate() == null)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    return RowEditor_bool;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/rE/RowEditor_bool.js\n ** module id = 11\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        '../../../../nls/labels',\r\n        'bootstrap'\r\n],\r\nfunction ($, mlRes) {\r\n    var defConfig = {};\r\n\r\n    var RowEditor_base = function (config) {\r\n        this.config = {};\r\n        $.extend(true, this.config, defConfig, config);\r\n        this.$cnt;\r\n        this.mandatory = false;\r\n\r\n        this.ERROR_NAN = \"NAN\";\r\n        this.ERROR_OUT_OF_RANGE = \"OutOfRange\";\r\n        this.ERROR_NULL = \"Null\";\r\n    };\r\n    RowEditor_base.prototype.updateValidationHelp = function () {\r\n        var error = this.validate();\r\n        if (error == null) {\r\n            this.$cnt.popover('destroy');\r\n        }\r\n        else {\r\n            var errMSG = mlRes[error];\r\n            this.$cnt.popover({ container: this.$cnt, content: errMSG, html: true });\r\n            this.$cnt.popover('show');\r\n        }\r\n        /*if (error == null) {\r\n            this.$cnt.popover('destroy');\r\n        }\r\n        else {\r\n            var errMSG = mlRes[error];\r\n            this.$cnt.popover({ container: this.$cnt, content: errMSG, html: true });\r\n            this.$cnt.popover('show');\r\n        }*/\r\n    };\r\n    RowEditor_base.prototype.isMandatory = function (m) {\r\n        if (m == 'undefined')\r\n            return this.mandatory;\r\n        this.mandatory = m;\r\n    };\r\n    RowEditor_base.prototype.isValid = function () {\r\n        if (this.validate() == null)\r\n            return true;\r\n        return false;\r\n    }\r\n    return RowEditor_base;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/rE/RowEditor_base.js\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bootstrap\"\n ** module id = 13\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        '../../../../nls/labels',\r\n        './RowEditor_base',\r\n        'bootstrap'\r\n],\r\nfunction ($, mlRes, rowEditorBase) {\r\n    var defConfig = {\r\n        elemCode: '<select class=\"%class%\"></select>',\r\n        elemClass: \"form-control\",\r\n        optionCode: '<span class=\"cl_lev%lev%\">%label%</span>',\r\n        emptyEntryValue: \"-\",\r\n        emptyEntryLabel: \"-\"\r\n    };\r\n\r\n    var RowEditor_code = function (config) {\r\n        this.parent.constructor.call(this, config);\r\n        $.extend(true, this.config, defConfig);\r\n        this.codelists;\r\n        this.$ddl;\r\n    }\r\n    RowEditor_code.prototype = Object.create(rowEditorBase.prototype);\r\n    RowEditor_code.prototype.constructor = RowEditor_code;\r\n    RowEditor_code.prototype.parent = rowEditorBase.prototype;\r\n\r\n    RowEditor_code.prototype.render = function (container, config, codelists) {\r\n        $.extend(true, this.config, config);\r\n        this.$cnt = container;\r\n        this.codelists = codelists;\r\n        this.createEditor();\r\n    }\r\n\r\n    RowEditor_code.prototype.createEditor = function () {\r\n        var e = defConfig.elemCode.replace('%class%', defConfig.elemClass);\r\n        this.$ddl = $(e);\r\n        //Err?\r\n        if (!this.codelists || !this.codelists[0] || !this.codelists[0].data)\r\n            return;\r\n        var toApp = $('<option></option>');\r\n        toApp.val(this.config.emptyEntryValue);\r\n        toApp.html(this.config.emptyEntryLabel);\r\n        this.$ddl.append(toApp);\r\n\r\n        for (var i = 0; i < this.codelists[0].data.length; i++) {\r\n            toApp = $('<option></option>').val(this.codelists[0].data[i].code);\r\n            toApp.html(_getTitle(this.codelists[0].metadata.levels, this.codelists[0].data[i].level, this.codelists[0].data[i].title));\r\n            this.$ddl.append(toApp);\r\n        }\r\n        this.$cnt.append(this.$ddl);\r\n        this._bindEvents();\r\n    };\r\n\r\n    function _getTitle(levels, level, label) {\r\n        if (levels == 0)\r\n            return title;\r\n        var toRet = defConfig.optionCode;\r\n        toRet = toRet.replace('%lev%', level);\r\n        var blanks = \"\";\r\n        switch (level) {\r\n            case 2:\r\n                blanks = \"&nbsp;\";\r\n                break;\r\n            case 3:\r\n                blanks = \"&nbsp;&nbsp;\";\r\n                break;\r\n            case 4:\r\n                blanks = \"&nbsp;&nbsp;&nbsp;\";\r\n                break;\r\n            default:\r\n                blanks = \"&nbsp;&nbsp;&nbsp;&nbsp;\";\r\n                break;\r\n        }\r\n        return toRet.replace('%label%', blanks + \"\" + label);\r\n    };\r\n\r\n    RowEditor_code.prototype._bindEvents = function () {\r\n        var me = this;\r\n        this.$cnt.on('select', function () { me.updateValidationHelp(); });\r\n    };\r\n    RowEditor_code.prototype._unbindEvents = function () {\r\n        this.$cnt.off('select');\r\n    };\r\n\r\n    RowEditor_code.prototype.destroy = function () {\r\n        this._unbindEvents();\r\n        //Is this needed???//this.$cnt.html('');\r\n        //this.$cnt.jqxComboBox('destroy');\r\n    }\r\n    RowEditor_code.prototype.updateValidationHelp = function () {\r\n        var error = this.validate();\r\n        this.parent.updateValidationHelp.call(this, error);\r\n    }\r\n    RowEditor_code.prototype.reset = function () {\r\n        this.$ddl.val(this.config.emptyEntryValue);\r\n        //this.$cnt.jqxComboBox('selectIndex', 0)\r\n        //this.$cnt.popover('destroy');\r\n    }\r\n    RowEditor_code.prototype.setValue = function (val) {\r\n        this.reset();\r\n        this.$ddl.val(val);\r\n        this.updateValidationHelp();\r\n    }\r\n    RowEditor_code.prototype.getValue = function () {\r\n        var toRet = this.$ddl.val();\r\n        if (toRet == this.config.emptyEntryValue)\r\n            return '';\r\n        return toRet;\r\n    }\r\n    /*RowEditor_code.prototype.getSelectedItem = function () {\r\n         //var item = this.$cnt.jqxComboBox('getSelectedItem');\r\n         //if (!item)\r\n         //    return null;\r\n         //return item;\r\n    }*/\r\n    RowEditor_code.prototype.isMandatory = function (m) {\r\n        if (m == 'undefined')\r\n            return this.mandatory;\r\n        this.mandatory = m;\r\n    }\r\n    RowEditor_code.prototype.validate = function () {\r\n        var val = this.getValue();\r\n        if (this.mandatory && !val)\r\n            return this.ERROR_NULL;\r\n        return null;\r\n    }\r\n    RowEditor_code.prototype.isValid = function () {\r\n        if (this.validate() == null)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    return RowEditor_code;\r\n});\r\n\r\n\r\n/*\r\ndefine([\r\n        'jquery',\r\n        'jqxall',\r\n        'i18n!fx-DataEditor/multiLang/DataEditor/nls/ML_DataEdit',\r\n        'fx-DataEditor/js/DataEditor/simpleEditors/rE/RowEditor_base',\r\n        'bootstrap'\r\n],\r\nfunction ($, jqx, mlRes, rowEditorBase) {\r\n    var defConfig = {};\r\n    var emptyEntryValue = \"-\";\r\n    var emptyEntryLabel = \"-\";\r\n\r\n    var RowEditor_code = function (config) {\r\n        this.parent.constructor.call(this, config);\r\n        this.codelists;\r\n    }\r\n    RowEditor_code.prototype = Object.create(rowEditorBase.prototype);\r\n    RowEditor_code.prototype.constructor = RowEditor_code;\r\n    RowEditor_code.prototype.parent = rowEditorBase.prototype;\r\n\r\n    RowEditor_code.prototype.render = function (container, config, codelists) {\r\n        $.extend(true, this.config, config);\r\n        this.$cnt = container;\r\n        this.codelists = codelists;\r\n        this.createEditor();\r\n    }\r\n    RowEditor_code.prototype.createEditor = function () {\r\n        //TODO make it handle multiple codelists\r\n        var codesSrc = {\r\n            localdata: this.codelists[0].data, datatype: 'array', datafields: [\r\n                { name: 'code', type: 'string' },\r\n                { name: 'title', type: 'string' },\r\n                { name: 'level', type: 'string' }\r\n            ]\r\n        };\r\n        var codesTextDataAdapter = new $.jqx.dataAdapter(codesSrc);\r\n\r\n        var me = this;\r\n        this.$cnt.jqxComboBox({\r\n            source: codesTextDataAdapter,\r\n            displayMember: 'title',\r\n            valueMember: 'code',\r\n            promptText: '',\r\n            autoComplete: true,\r\n            searchMode: 'containsignorecase',\r\n            renderer: function (index, label, value) {\r\n                if (me.codelists[0].metadata.levels == 1)\r\n                    return label;\r\n                if (me.codelists[0].data[index]) {\r\n                    switch (me.codelists[0].data[index].level) {\r\n                        case 1:\r\n                            return '<span class=\"cl_lev1\">' + label + '</span>';\r\n                            break;\r\n                        case 2:\r\n                            return '<span class=\"cl_lev2\">&nbsp;' + label + '</span>';\r\n                            break;\r\n                        case 3:\r\n                            return '<span class=\"cl_lev3\">&nbsp;&nbsp;' + label + '</span>';\r\n                            break;\r\n                        case 4:\r\n                            return '<span class=\"cl_lev4\">&nbsp;&nbsp;&nbsp;' + label + '</span>';\r\n                            break;\r\n                        default:\r\n                            return '<span class=\"cl_lev5\">&nbsp;&nbsp;&nbsp;&nbsp;' + label + '</span>';\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        this.$cnt.jqxComboBox('insertAt', { label: emptyEntryLabel, value: emptyEntryValue }, 0);\r\n        this.$cnt.on('select', function () { me.updateValidationHelp(); });\r\n    }\r\n    RowEditor_code.prototype.destroy = function () {\r\n        this.$cnt.jqxComboBox('destroy');\r\n        this.$cnt.off('select');\r\n    }\r\n    RowEditor_code.prototype.updateValidationHelp = function () {\r\n        var error = this.validate();\r\n        this.parent.updateValidationHelp.call(this, error);\r\n    }\r\n    RowEditor_code.prototype.reset = function () {\r\n        this.$cnt.jqxComboBox('selectIndex', 0)\r\n        this.$cnt.popover('destroy');\r\n    }\r\n    RowEditor_code.prototype.setValue = function (val) {\r\n        this.reset();\r\n        if (!val)\r\n            val = emptyEntryValue;\r\n        var items = this.$cnt.jqxComboBox('getItems');\r\n        for (var i = 0; i < items.length; i++)\r\n            if (items[i].value == val) {\r\n                this.$cnt.jqxComboBox('selectIndex', i);\r\n            }\r\n        this.updateValidationHelp();\r\n    }\r\n    RowEditor_code.prototype.getValue = function () {\r\n        var item = this.$cnt.jqxComboBox('getSelectedItem');\r\n        if (!item)\r\n            return null;\r\n        if (item.value == emptyEntryValue)\r\n            return null;\r\n        return item.value;\r\n    }\r\n    RowEditor_code.prototype.getSelectedItem = function () {\r\n        var item = this.$cnt.jqxComboBox('getSelectedItem');\r\n        if (!item)\r\n            return null;\r\n        return item;\r\n    }\r\n    RowEditor_code.prototype.isMandatory = function (m) {\r\n        if (m == 'undefined')\r\n            return this.mandatory;\r\n        this.mandatory = m;\r\n    }\r\n    RowEditor_code.prototype.validate = function () {\r\n        var val = this.getValue();\r\n        if (this.mandatory && !val)\r\n            return this.ERROR_NULL;\r\n        return null;\r\n    }\r\n    RowEditor_code.prototype.isValid = function () {\r\n        if (this.validate() == null)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    return RowEditor_code;\r\n});*/\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/rE/RowEditor_code.js\n ** module id = 14\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        'eonasdan-bootstrap-datetimepicker',\r\n        '../../../../nls/labels',\r\n        './RowEditor_base',\r\n        '../../../../html/DataEditor/simpleEditors/RowEditorTime.html',\r\n        'moment',\r\n        'bootstrap'\r\n],\r\nfunction ($, datetimepicker, mlRes, rowEditorBase, RowEditorTimeHTML) {\r\n    var defConfig = { yMin: 0, yMax: 3000 };\r\n    var h = {\r\n        inputTime: '#inputTime'\r\n    };\r\n\r\n    var RowEditor_date = function (config) {\r\n        this.parent.constructor.call(this, config);\r\n        $.extend(true, this.config, defConfig);\r\n        this.$datePicker;\r\n    };\r\n    RowEditor_date.prototype = Object.create(rowEditorBase.prototype);\r\n    RowEditor_date.prototype.constructor = rowEditorBase;\r\n    RowEditor_date.prototype.parent = rowEditorBase.prototype;\r\n\r\n    RowEditor_date.prototype.render = function (container, config) {\r\n        $.extend(true, this.config, config);\r\n        this.$cnt = container;\r\n        this.$cnt.html(RowEditorTimeHTML);\r\n\r\n        this.$datePicker = this.$cnt.find('#inputTime');\r\n        this.$datePicker.datetimepicker({ viewMode: 'days', locale: 'en', format: \"DD/MM/YYYY\" });\r\n        var me = this;\r\n        this.$cnt.on('change', function () { me.updateValidationHelp(); });\r\n    };\r\n    RowEditor_date.prototype.destroy = function () {\r\n        this.$datePicker.data(\"DateTimePicker\").destroy();\r\n        this.$datePicker.off('change');\r\n    };\r\n    /*RowEditor_date.prototype.updateValidationHelp = function () {\r\n        var error = this.validate();\r\n        this.parent.updateValidationHelp.call(this, error);\r\n    };*/\r\n\r\n    RowEditor_date.prototype.reset = function () {\r\n        this.$datePicker.data(\"DateTimePicker\").clear();\r\n        //this.$cnt.popover('destroy');\r\n    };\r\n    RowEditor_date.prototype.setValue = function (val) {\r\n        this.reset();\r\n        if (val) {\r\n            val = \"\" + val;\r\n            var d = val.substring(6, 8);\r\n            var m = val.substring(4, 6);\r\n            m = m - 1;\r\n            var y = val.substring(0, 4);\r\n            this.$datePicker.data('DateTimePicker').date(new Date(y, m, d));\r\n        }\r\n    };\r\n    RowEditor_date.prototype.getValue = function () {\r\n        var dt = this.$datePicker.data('DateTimePicker').date();\r\n        if (!dt)\r\n            return '';\r\n        var d = \"\" + dt.date();\r\n        var m = \"\" + (dt.month() + 1);\r\n        var y = \"\" + dt.year();\r\n        if (d.length == 1)\r\n            d = \"0\" + d;\r\n        if (m.length == 1)\r\n            m = \"0\" + m;\r\n        while (y.length < 4)\r\n            y = \"0\" + y;\r\n        return y + m + d;\r\n    };\r\n    /*RowEditor_date.prototype.isMandatory = function (m) {\r\n        if (m == 'undefined')\r\n            return this.mandatory;\r\n        this.mandatory = m;\r\n    }*/\r\n\r\n    RowEditor_date.prototype.validate = function () {\r\n        var val = this.getValue();\r\n        if (this.mandatory && !val)\r\n            return this.ERROR_NULL;\r\n        var y = val.substring(4, 8);\r\n        if (y < this.config.yMin) return this.ERROR_OUT_OF_RANGE;\r\n        if (y > this.config.yMax) return this.ERROR_OUT_OF_RANGE;\r\n        return null;\r\n    };\r\n    /*RowEditor_date.prototype.isValid = function () {\r\n        if (this.validate() == null)\r\n            return true;\r\n        return false;\r\n    }*/\r\n\r\n    return RowEditor_date;\r\n});\r\n\r\n\r\n/*\r\ndefine([\r\n        'jquery',\r\n        'jqxall',\r\n        'i18n!fx-DataEditor/multiLang/DataEditor/nls/ML_DataEdit',\r\n        'fx-DataEditor/js/DataEditor/simpleEditors/rE/RowEditor_base',\r\n        'bootstrap'\r\n],\r\nfunction ($, jqx, mlRes, rowEditorBase) {\r\n    var defConfig = { yMin: 0, yMax: 3000 };\r\n\r\n    var RowEditor_date = function (config) {\r\n        this.parent.constructor.call(this, config);\r\n    };\r\n    RowEditor_date.prototype = Object.create(rowEditorBase.prototype);\r\n    RowEditor_date.prototype.constructor = RowEditor_date;\r\n    RowEditor_date.prototype.parent = rowEditorBase.prototype;\r\n\r\n    RowEditor_date.prototype.render = function (container, config) {\r\n        $.extend(true, this.config, config);\r\n        this.$cnt = container;\r\n\r\n        this.$cnt.jqxCalendar();\r\n        var me = this;\r\n        this.$cnt.on('change', function () { me.updateValidationHelp(); });\r\n    }\r\n    RowEditor_date.prototype.destroy = function () {\r\n        this.$cnt.jqxCalendar('destroy');\r\n        this.$cnt.off('change');\r\n    }\r\n    RowEditor_date.prototype.updateValidationHelp = function () {\r\n        var error = this.validate();\r\n        this.parent.updateValidationHelp.call(this, error);\r\n    }\r\n\r\n    RowEditor_date.prototype.reset = function () {\r\n        this.$cnt.jqxCalendar('clear');\r\n        this.$cnt.popover('destroy');\r\n    }\r\n    RowEditor_date.prototype.setValue = function (val) {\r\n        this.reset();\r\n        if (val) {\r\n            val = \"\" + val;\r\n            var d = val.substring(6, 8);\r\n            var m = val.substring(4, 6);\r\n            m = m - 1;\r\n            var y = val.substring(0, 4);\r\n            this.$cnt.jqxCalendar('setDate', new Date(y, m, d));\r\n        }\r\n\r\n    }\r\n    RowEditor_date.prototype.getValue = function () {\r\n        var dt = this.$cnt.jqxCalendar('getDate');\r\n        if (!dt)\r\n            return null;\r\n        var d = \"\" + dt.getDate();\r\n        var m = \"\" + (dt.getMonth() + 1);\r\n        var y = \"\" + dt.getFullYear();\r\n        if (d.length == 1)\r\n            d = \"0\" + d;\r\n        if (m.length == 1)\r\n            m = \"0\" + m;\r\n        while (y.length < 4)\r\n            y = \"0\" + y;\r\n        return y + m + d;\r\n    }\r\n    RowEditor_date.prototype.isMandatory = function (m) {\r\n        if (m == 'undefined')\r\n            return this.mandatory;\r\n        this.mandatory = m;\r\n    }\r\n\r\n    RowEditor_date.prototype.validate = function () {\r\n        var val = this.getValue();\r\n        if (this.mandatory && !val)\r\n            return this.ERROR_NULL;\r\n        var y = val.substring(4, 8);\r\n        if (y < this.config.yMin) return this.ERROR_OUT_OF_RANGE;\r\n        if (y > this.config.yMax) return this.ERROR_OUT_OF_RANGE;\r\n        return null;\r\n    }\r\n    RowEditor_date.prototype.isValid = function () {\r\n        if (this.validate() == null)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    return RowEditor_date;\r\n});\r\n*/\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/rE/RowEditor_date.js\n ** module id = 15\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"eonasdan-bootstrap-datetimepicker\"\n ** module id = 16\n ** module chunks = 0\n **/","module.exports = \"<div class=\\\"input-group date\\\" id=inputTime> <input type=text class=form-control /> <span class=input-group-addon> <span class=\\\"glyphicon glyphicon-calendar\\\"></span> </span> </div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/html/DataEditor/simpleEditors/RowEditorTime.html\n ** module id = 17\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"moment\"\n ** module id = 18\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        '../../../../nls/labels',\r\n        './RowEditor_date',\r\n        'bootstrap'\r\n],\r\nfunction ($, mlRes, rowEditorDate) {\r\n    var defConfig = { yMin: 0, yMax: 3000 };\r\n\r\n    var RowEditor_month = function (config) {\r\n        this.parent.constructor.call(this, config);\r\n    };\r\n    RowEditor_month.prototype = Object.create(rowEditorDate.prototype);\r\n    RowEditor_month.prototype.constructor = rowEditorDate;\r\n    RowEditor_month.prototype.parent = rowEditorDate.prototype;\r\n\r\n    RowEditor_month.prototype.render = function (container, config) {\r\n        $.extend(true, this.config, config);\r\n        this.parent.render.call(this, container, config);\r\n        this.$datePicker.data(\"DateTimePicker\").format(\"MM/YYYY\");\r\n        this.$datePicker.data(\"DateTimePicker\").viewMode(\"months\");\r\n    };\r\n    RowEditor_month.prototype.setValue = function (val) {\r\n        this.reset();\r\n        if (val) {\r\n            var y = val.substring(0, 4) + \"\";\r\n            var m = val.substring(4, 6) + \"\";\r\n            m = m - 1;\r\n            this.$datePicker.data('DateTimePicker').date(new Date(y, m, 1));\r\n        }\r\n    };\r\n    RowEditor_month.prototype.getValue = function () {\r\n        var dt = this.$datePicker.data('DateTimePicker').date();\r\n        if (!dt)\r\n            return '';\r\n        var m = \"\" + (dt.month() + 1);\r\n        var y = \"\" + dt.year();\r\n        if (m.length == 1)\r\n            m = \"0\" + m;\r\n        while (y.length < 4)\r\n            y = \"0\" + y;\r\n        return y + m;\r\n    };\r\n    RowEditor_month.prototype.validate = function () {\r\n        var val = this.getValue();\r\n        if (this.mandatory && !val)\r\n            return this.ERROR_NULL;\r\n        if (!val)\r\n            return null;\r\n        var y = val.substring(0, 4);\r\n        var m = val.substring(4, 6);\r\n        if (this.mandatory && (m == '' || y == ''))\r\n            return this.ERROR_NULL;\r\n        if (y < this.config.yMin || y > this.config.yMax)\r\n            return this.ERROR_OUT_OF_RANGE;\r\n        if (m == '' && y == '') {\r\n            return null;\r\n        }\r\n    };\r\n    return RowEditor_month;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/rE/RowEditor_month.js\n ** module id = 19\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        '../../../../nls/labels',\r\n        './RowEditor_base',\r\n        'bootstrap'\r\n],\r\nfunction ($, mlRes, rowEditorBase) {\r\n    var defConfig = {\r\n        decimalDigits: 5,\r\n        html: '<input type=\"input\" class=\"form-control\">'\r\n    };\r\n\r\n    var RowEditor_number = function (config) {\r\n        this.parent.constructor.call(this, config);\r\n        $.extend(true, this.config, defConfig);\r\n        this.$cnt;\r\n        this.$txt;\r\n    };\r\n    RowEditor_number.prototype = Object.create(rowEditorBase.prototype);\r\n    RowEditor_number.prototype.constructor = RowEditor_number;\r\n    RowEditor_number.prototype.parent = rowEditorBase.prototype;\r\n\r\n    RowEditor_number.prototype.render = function (container, config) {\r\n        $.extend(true, this.config, config);\r\n        this.$cnt = container;\r\n        this.$cnt.html(this.config.html);\r\n        this.$txt = this.$cnt.find('input');\r\n        var me = this;\r\n        this.$cnt.on('valueChanged', function () { me.updateValidationHelp(); });\r\n    }\r\n    RowEditor_number.prototype.destroy = function () {\r\n        this.$cnt.off('valueChanged');\r\n    }\r\n    RowEditor_number.prototype.updateValidationHelp = function () {\r\n        var error = this.validate();\r\n        this.parent.updateValidationHelp.call(this, error);\r\n    }\r\n    RowEditor_number.prototype.reset = function () {\r\n        this.$txt.val('');\r\n        this.$cnt.popover('destroy');\r\n    }\r\n    RowEditor_number.prototype.setValue = function (val) {\r\n        this.reset();\r\n        this.$txt.val(val);\r\n    }\r\n    RowEditor_number.prototype.getValue = function () {\r\n        var toRet = this.$txt.val().trim();\r\n        return toRet;\r\n    }\r\n    RowEditor_number.prototype.isMandatory = function (m) {\r\n        if (m == 'undefined')\r\n            return this.mandatory;\r\n        this.mandatory = m;\r\n    }\r\n\r\n    RowEditor_number.prototype.validate = function () {\r\n        var val = this.getValue();\r\n        if (val != '') {\r\n            if (isNaN(val))\r\n                return this.ERROR_NAN;\r\n        }\r\n        else {\r\n            if (this.mandatory)\r\n                return this.ERROR_NULL;\r\n        }\r\n        return null;\r\n    }\r\n    RowEditor_number.prototype.isValid = function () {\r\n        if (this.validate() == null)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    return RowEditor_number;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/rE/RowEditor_number.js\n ** module id = 20\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        '../../../../nls/labels',\r\n        './RowEditor_base',\r\n        'bootstrap'\r\n],\r\nfunction ($, mlRes, rowEditorBase) {\r\n    var defConfig = {\r\n        html: '<input type=\"text\" class=\"form-control\">'\r\n    };\r\n    var ERROR_NULL = \"Null\";\r\n\r\n    var RowEditor_string = function (config) {\r\n        this.parent.constructor.call(this, config, defConfig);\r\n        $.extend(true, this.config, defConfig);\r\n        this.$cnt;\r\n        this.txt;\r\n        //this.$cnt;\r\n    };\r\n    RowEditor_string.prototype = Object.create(rowEditorBase.prototype);\r\n    RowEditor_string.prototype.constructor = RowEditor_string;\r\n    RowEditor_string.prototype.parent = rowEditorBase.prototype;\r\n\r\n    RowEditor_string.prototype.render = function (container, config) {\r\n        $.extend(true, this.config, config);\r\n        this.$cnt = container;\r\n        this.$cnt.html(this.config.html);\r\n        this.txt = this.$cnt.find('input');\r\n        var me = this;\r\n        this.$cnt.on('valueChanged', function () { me.updateValidationHelp(); });\r\n    };\r\n    RowEditor_string.prototype.destroy = function () {\r\n        this.$cnt.off('valuechanged');\r\n    };\r\n    RowEditor_string.prototype.updateValidationHelp = function () {\r\n        var error = this.validate();\r\n        this.parent.updateValidationHelp.call(this, error);\r\n    };\r\n    RowEditor_string.prototype.reset = function () {\r\n        this.txt.val('');\r\n        this.$cnt.popover('destroy');\r\n    };\r\n    RowEditor_string.prototype.setValue = function (val) {\r\n        this.reset();\r\n        this.txt.val(val);\r\n    };\r\n    RowEditor_string.prototype.getValue = function () {\r\n        return this.txt.val().trim();\r\n    };\r\n    RowEditor_string.prototype.isMandatory = function (m) {\r\n        if (m == 'undefined')\r\n            return this.mandatory;\r\n        this.mandatory = m;\r\n    };\r\n    RowEditor_string.prototype.validate = function () {\r\n        var val = this.getValue();\r\n        if (this.mandatory && val.trim() == '')\r\n            return this.ERROR_NULL;\r\n        return null;\r\n    };\r\n    RowEditor_string.prototype.isValid = function () {\r\n        if (this.validate() == null)\r\n            return true;\r\n        return false;\r\n    };\r\n\r\n    return RowEditor_string;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/rE/RowEditor_string.js\n ** module id = 21\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        '../../../../nls/labels',\r\n        './RowEditor_date',\r\n        'bootstrap'\r\n],\r\nfunction ($, mlRes, rowEditorDate) {\r\n    var defConfig = { yMin: 0, yMax: 3000 };\r\n\r\n    var RowEditor_year = function (config) {\r\n        this.parent.constructor.call(this, config);\r\n    };\r\n    RowEditor_year.prototype = Object.create(rowEditorDate.prototype);\r\n    RowEditor_year.prototype.constructor = rowEditorDate;\r\n    RowEditor_year.prototype.parent = rowEditorDate.prototype;\r\n\r\n    RowEditor_year.prototype.render = function (container, config) {\r\n        $.extend(true, this.config, config);\r\n        this.parent.render.call(this, container, config);\r\n        this.$datePicker.data(\"DateTimePicker\").format(\"YYYY\");\r\n        this.$datePicker.data(\"DateTimePicker\").viewMode(\"years\");\r\n    };\r\n    RowEditor_year.prototype.setValue = function (val) {\r\n        this.reset();\r\n        if (val) {\r\n            this.$datePicker.data('DateTimePicker').date(new Date(val, 0, 1));\r\n        }\r\n    };\r\n    RowEditor_year.prototype.getValue = function () {\r\n        var dt = this.$datePicker.data('DateTimePicker').date();\r\n        if (!dt)\r\n            return '';\r\n        return \"\" + dt.year();\r\n    };\r\n    RowEditor_year.prototype.validate = function () {\r\n        var val = this.getValue();\r\n        if (this.mandatory && !val) \r\n            return this.ERROR_NULL;\r\n        if (!val)\r\n            return null;\r\n        if (val < this.config.yMin)\r\n            return this.ERROR_OUT_OF_RANGE;\r\n        if (val > this.config.yMax)\r\n            return this.ERROR_OUT_OF_RANGE;\r\n    };\r\n\r\n    return RowEditor_year;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/rE/RowEditor_year.js\n ** module id = 22\n ** module chunks = 0\n **/","module.exports = \"<div id=divRowEditorPopup class=modal data-backdrop=false> <div class=\\\"modal-dialog modal-lg\\\"> <div class=modal-content> <div class=modal-body> <table id=tblRowEditor> <tbody></tbody> </table> </div> <div class=modal-footer> <button id=btnEditRowCanc type=button class=\\\"btn btn-default\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></button> <button id=btnEditRowOk type=button class=\\\"btn btn-primary\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span></button> </div> </div> </div> </div> <div id=divDataGrid> <table id=tblData class=\\\"table table-bordered table-condensed\\\"> <thead> <tr id=tblDataHead></tr> </thead> <tbody id=tblDataBody></tbody> </table> </div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/html/DataEditor/simpleEditors/DataEditor.html\n ** module id = 23\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_25__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"amplify-pubsub\"\n ** module id = 25\n ** module chunks = 0\n **/","define([\r\n'jquery',\r\n '../../../nls/labels'\r\n],\r\nfunction ($, mlRes) {\r\n\r\n\r\n    var ValidationResultsViewer = function () {\r\n        this.$valResGrid;\r\n    };\r\n\r\n    //Render - creation\r\n    ValidationResultsViewer.prototype.render = function (container) {\r\n        this.$valResGrid = container;\r\n        console.log(\"ValidationResultsViewer redered\");\r\n    }\r\n\r\n    ValidationResultsViewer.prototype.setValidationResults = function (valRes) {\r\n        this.$valResGrid.html();\r\n        if (!valRes)\r\n            return;\r\n        var toAdd = \"\";\r\n\r\n        toAdd = '<table><tbody>';\r\n\r\n        for (var i = 0; i < valRes.length; i++) {\r\n            toAdd += '<tr><td>';\r\n            toAdd += mlRes[valRes[i].error];\r\n            if (valRes[i].dataIndex)\r\n                toAdd += \" line: \" + valRes[i].dataIndex;\r\n            toAdd += '</tr></td>';\r\n            //toAdd += \"</br>\";\r\n        }\r\n        toAdd += '</table></tbody>';\r\n\r\n        this.$valResGrid.html(toAdd);\r\n    }\r\n\r\n    return ValidationResultsViewer;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/simpleEditors/ValidationResultsViewer.js\n ** module id = 26\n ** module chunks = 0\n **/","define(['jquery',\r\n    './CodelistUtils'\r\n],\r\n    function ($, clUtils) {\r\n\r\n        var MSG_NULL_KEY = 'nullKey';\r\n        var MSG_SAME_KEY_VALS = 'sameKeyVals';\r\n        var MSG_UNKNOWN_CODE = 'unknownCode';\r\n        var MSG_INVALID_YEAR = 'invalidYear';\r\n        var MSG_INVALID_MONTH = 'invalidMonth';\r\n        var MSG_INVALID_DATE = 'invalidDate';\r\n        var MSG_INVALID_NUMBER = 'invalidNumber';\r\n        var MSG_INVALID_BOOL = 'invalidBool';\r\n\r\n        //Columns/headers validation\r\n        function Data_Validator() { };\r\n\r\n        Data_Validator.prototype.validate = function (cols, codelists, data) {\r\n            var toRet = [];\r\n\r\n            var emptyKeyVals = this.checkEmptyKeyVals(cols, data);\r\n            var duplicateKeyVals = this.checkDuplicateKeyVals(cols, data);\r\n            var wrongDataTypes = this.checkWrongDataTypes(cols, codelists, data);\r\n            var valueFlags = this.checkValueFlags();\r\n\r\n            if (emptyKeyVals && emptyKeyVals.length > 0)\r\n                arrConcat(toRet, emptyKeyVals);\r\n            if (duplicateKeyVals && duplicateKeyVals.length > 0)\r\n                arrConcat(toRet, duplicateKeyVals);\r\n            if (wrongDataTypes && wrongDataTypes.length > 0)\r\n                arrConcat(toRet, wrongDataTypes);\r\n            if (valueFlags && valueFlags.length > 0)\r\n                arrConcat(toRet, valueFlags);\r\n\r\n            return toRet;\r\n        }\r\n\r\n        Data_Validator.prototype.checkEmptyKeyVals = function (cols, data) {\r\n            if (!cols || !data)\r\n                return null;\r\n            var toRet = [];\r\n            for (var i = 0; i < data.length; i++)\r\n                for (var c = 0; c < cols.length; c++) {\r\n                    if (cols[c].key) {\r\n                        if (!data[i][c])\r\n                            toRet.push({ error: MSG_NULL_KEY, colId: cols[c].id, dataIndex: i });\r\n                    }\r\n                }\r\n\r\n            return toRet;\r\n        }\r\n\r\n        Data_Validator.prototype.checkDuplicateKeyVals = function (cols, data) {\r\n            if (!cols || !data)\r\n                return null;\r\n\r\n            var toRet = [];\r\n\r\n            for (var r1 = 0; r1 < data.length - 1; r1++)\r\n                for (var r2 = r1 + 1; r2 < data.length; r2++)\r\n                    if (sameDimVals(data[r1], data[r2], cols)) {\r\n                        toRet.push({ error: MSG_SAME_KEY_VALS, dataIndex: r1 });\r\n                        toRet.push({ error: MSG_SAME_KEY_VALS, dataIndex: r2 });\r\n                    }\r\n\r\n            return toRet;\r\n        }\r\n\r\n        var sameDimVals = function (row1, row2, cols) {\r\n            for (var d = 0; d < cols.length; d++) {\r\n                if (cols[d].key)\r\n                    if (row1[d] != row2[d]) {\r\n                        return false;\r\n                    }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        Data_Validator.prototype.checkWrongDataTypes = function (cols, codelists, data) {\r\n            if (!cols || !data)\r\n                return null;\r\n\r\n            var toRet = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                arrConcat(toRet, checkRowDataTypes(cols, codelists, data[i], i));\r\n            }\r\n            return toRet;\r\n\r\n            /*var colInfo = {};\r\n            for (var c = 0; c < cols.length; c++) \r\n\r\n                if (cols[c].dataType)\r\n                    colInfo[cols[c].id] = { dataType: cols[c].dataType, domain: cols[c].domain, codes: cols[c].codes };\r\n            }\r\n            var toRet = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                arrConcat(toRet, checkRowDataTypes(colInfo, data[i], i));\r\n            }\r\n            return toRet;*/\r\n        }\r\n\r\n        var checkRowDataTypes = function (cols, codelists, dataRow, rowIdx) {\r\n            var toRet = [];\r\n            for (var d = 0; d < cols.length; d++) {\r\n                switch (cols[d].dataType) {\r\n                    case 'code':\r\n                        var cListUID = cols[d].domain.codes[0].idCodeList;\r\n                        if (cols[d].domain.codes[0].version)\r\n                            cListUID = cListUID + \"|\" + cols[d].domain.codes[0].version;\r\n                        if (!checkCode(dataRow[d], codelists[cListUID]))\r\n                            toRet.push({ error: MSG_UNKNOWN_CODE, dataIndex: rowIdx, colId: cols[d].id });\r\n                        break;\r\n                    case 'year':\r\n                        if (!checkYear(dataRow[d]))\r\n                            toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: cols[d].id });\r\n                        else {\r\n                            if (cols[d].domain && cols[d].domain.period) {\r\n                                if (cols[d].domain.period.from)//Check from\r\n                                    if (dataRow[d] < cols[d].domain.period.from)\r\n                                        toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: cols[d].id, yearLimitFrom: cols[d].domain.period.from, yearValue: dataRow[d] });\r\n                                if (cols[d].domain.period.to) //Check to\r\n                                    if (dataRow[d] > cols[d].domain.period.to)\r\n                                        toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: cols[d].id, yearLimitTo: cols[d].domain.period.to, yearValue: dataRow[d] });\r\n                            }\r\n                        }\r\n                        break;\r\n                    case 'month':\r\n                        if (!checkMonth(dataRow[d]))\r\n                            toRet.push({ error: MSG_INVALID_MONTH, dataIndex: rowIdx, colId: cols[d].id });\r\n                        break;\r\n                    case 'date':\r\n                        if (!checkDate(dataRow[d]))\r\n                            toRet.push({ error: MSG_INVALID_DATE, dataIndex: rowIdx, colId: cols[d].id });\r\n                        break;\r\n                    case 'customCode':\r\n                        //TODO: Check custom code\r\n                        break;\r\n                    case 'number':\r\n                    case 'percentage':\r\n                        if (!checkNumber(dataRow[d]))\r\n                            toRet.push({ error: MSG_INVALID_NUMBER, dataIndex: rowIdx, colId: d });\r\n                        break;\r\n                    case 'bool':\r\n                        if (!checkBool(dataRow[d]))\r\n                            toRet.push({ error: MSG_INVALID_BOOL, dataIndex: rowIdx, colId: d });\r\n                        break;\r\n                }\r\n            }\r\n            return toRet;\r\n        }\r\n\r\n        /*var checkRowDataTypes = function (colInfo, dataRow, rowIdx) {\r\n            var toRet = [];\r\n            //for (var d in data) {\r\n            for (var d = 0; d < dataRow.length; d++) {\r\n                if (!colInfo[d])\r\n                    continue;\r\n\r\n                switch (colInfo[d].dataType) {\r\n                    case 'code':\r\n                        if (!checkCode(data[d], colInfo[d].codes))\r\n                            toRet.push({ error: MSG_UNKNOWN_CODE, dataIndex: rowIdx, colId: d });\r\n                        break;\r\n                    case 'year':\r\n                        if (!checkYear(data[d]))\r\n                            toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: d });\r\n                        else {\r\n                            if (colInfo[d].domain && colInfo[d].domain.period) {\r\n                                if (colInfo[d].domain.period.from)//Check from\r\n                                    if (data[d] < colInfo[d].domain.period.from)\r\n                                        toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: d, yearLimitFrom: colInfo[d].domain.period.from, yearValue: data[d] });\r\n                                if (colInfo[d].domain.period.to) //Check to\r\n                                    if (data[d] > colInfo[d].domain.period.to)\r\n                                        toRet.push({ error: MSG_INVALID_YEAR, dataIndex: rowIdx, colId: d, yearLimitTo: colInfo[d].domain.period.to, yearValue: data[d] });\r\n                            }\r\n                        }\r\n                        break;\r\n                    case 'month':\r\n                        if (!checkMonth(data[d]))\r\n                            toRet.push({ error: MSG_INVALID_MONTH, dataIndex: rowIdx, colId: d });\r\n                        break;\r\n                    case 'date':\r\n                        if (!checkDate(data[d]))\r\n                            toRet.push({ error: MSG_INVALID_DATE, dataIndex: rowIdx, colId: d });\r\n                        break;\r\n                    case 'customCode':\r\n                        //TODO: Check custom code\r\n                        break;\r\n                    case 'number':\r\n                    case 'percentage':\r\n                        if (!checkNumber(data[d]))\r\n                            toRet.push({ error: MSG_INVALID_NUMBER, dataIndex: rowIdx, colId: d });\r\n                        break;\r\n                    case 'bool':\r\n                        if (!checkBool(data[d]))\r\n                            toRet.push({ error: MSG_INVALID_BOOL, dataIndex: rowIdx, colId: d });\r\n                        break;\r\n                }\r\n            }\r\n            return toRet;\r\n        }*/\r\n\r\n        var checkCode = function (code, codelist) {\r\n\r\n            var clU = new clUtils();\r\n            var code = clU.findCodeInCodelist(code, codelist);\r\n            if (code == null)\r\n                return false;\r\n            return true;\r\n\r\n            /*\r\n            if (!code)\r\n                return true;\r\n            if (!codelist)\r\n                return true;\r\n            if (isInCodelist(codelist, code))\r\n            {\r\n                return true;\r\n            }\r\n            for (var i = 0; i < codelist.data.length; i++)\r\n                if (code == codelist.data[i].code)\r\n                    return true;\r\n            return false;*/\r\n        }\r\n\r\n        var checkYear = function (year) {\r\n            if (!year)\r\n                return true;\r\n            if (!$.isNumeric(year))\r\n                return false;\r\n            if (year.toString().length != 4)\r\n                return false;\r\n            return true;\r\n        }\r\n\r\n        var checkMonth = function (month) {\r\n            if (!month)\r\n                return true;\r\n            if (!$.isNumeric(month))\r\n                return false;\r\n            if (month.toString().length != 6)\r\n                return false;\r\n            if (month.substring(4, 6) > 12 || month.substring(4, 6) < 1)\r\n                return false;\r\n            return true;\r\n        }\r\n\r\n        var checkDate = function (date) {\r\n            //ADD a true date format:\r\n            //could be done by creating a date object and then check if it matches the orginal date\r\n            if (!date)\r\n                return true;\r\n            if (!$.isNumeric(date))\r\n                return false;\r\n            if (date.toString().length != 8)\r\n                return false;\r\n            if (date.substring(4, 6) > 12 || date.substring(4, 6) < 1)\r\n                return false;\r\n\r\n            return true;\r\n        }\r\n\r\n\r\n        Data_Validator.prototype.checkValueFlags = function (cols, data) {\r\n            //TODO: Add configuration rulees for value - flags\r\n\r\n            /*var flagColId = \"\";\r\n             var valueColId = \"\";\r\n             for (var i = 0; i < cols.length; i++) {\r\n             if (cols[i].subject && cols[i].subject == 'flag')\r\n             flagColId = cols[i].id;\r\n             if (cols[i].subject && cols[i].subject == 'value')\r\n             valueColId = cols[i].id;\r\n             }\r\n\r\n             CONTINUE...\r\n             */\r\n        }\r\n\r\n        var checkNumber = function (num) {\r\n            if (!num)\r\n                return true;\r\n            if (num == \"\")\r\n                return true;\r\n            if ($.isNumeric(num))\r\n                return true;\r\n            return false;\r\n        }\r\n        var checkBool = function (toCheck) {\r\n            if (typeof (toCheck) == 'boolean')\r\n                return true;\r\n            if (typeof (toCheck) == 'string')\r\n                if (toCheck == 'true' || toCheck == 'false')\r\n                    return true;\r\n            if (typeof (toCheck) == 'number')\r\n                if (toCheck == 1 || toCheck == 0)\r\n                    return true;\r\n            return false;\r\n        }\r\n\r\n        var arrConcat = function (dest, toAdd) {\r\n            if (!dest)\r\n                dest = [];\r\n            if (toAdd)\r\n                for (var i = 0; i < toAdd.length; i++)\r\n                    dest.push(toAdd[i]);\r\n        }\r\n\r\n\r\n        /*Data append validation*/\r\n        Data_Validator.prototype.dataAppendCheck = function (cols, dataOld, dataNew) {\r\n            if (!cols || !dataOld || !dataNew)\r\n                return null;\r\n\r\n            var toRet = [];\r\n            for (var o = 0; o < dataOld.length; o++) {\r\n                for (n = 0; n < dataNew.length; n++) {\r\n                    var dimValsCollision = sameDimVals(dataOld[o], dataNew[n], cols);\r\n                    if (dimValsCollision) {\r\n                        //if (!sameData) {//If the rows have the same data ignore\r\n                        toRet.push({ dataOldIndex: o, dataNewIndex: n });\r\n                        //}\r\n                    }\r\n                }\r\n            }\r\n            return toRet;\r\n        }\r\n        //checks if two rows have the same data fields (ignores the key columns)\r\n        //Enable that after removing the duplicated lines from the newData set\r\n        /*var sameData = function (cols, oldRow, newRow) {\r\n            for (var d = 0; d < cols.length; d++) {\r\n                if (!cols[d].key) {\r\n                    if (oldRow[d] != newRow[d])\r\n                        return false;\r\n                }\r\n            }\r\n            return true;\r\n        }*/\r\n\r\n        Data_Validator.prototype.dataMerge = function (cols, dataOld, dataNew, mode) {\r\n\r\n            var oldLen = dataOld.length; //To avoid the count to increase on push\r\n            for (var n = 0; n < dataNew.length; n++) {\r\n                var found = false;\r\n                for (var o = 0; o < oldLen; o++) {\r\n                    if (sameDimVals(dataOld[o], dataNew[n], cols)) {\r\n                        found = true;\r\n                        if (mode == 'keepOld') {\r\n                            //do nothing, skip the line\r\n                        }\r\n                        else if (mode == 'keepNew') {\r\n                            copyRow(dataNew[n], dataOld[o]);\r\n                        }\r\n                        //break;\r\n                    }\r\n                }\r\n                if (!found) {//Not found, add it.\r\n                    dataOld.push(dataNew[n]);\r\n                }\r\n            }\r\n\r\n            return dataOld;\r\n        }\r\n\r\n        var copyRow = function (src, dst) {\r\n            for (var i = 0; i < src.length; i++)\r\n                dst[i] = src[i];\r\n        }\r\n\r\n        return Data_Validator;\r\n    });\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/helpers/Data_Validator.js\n ** module id = 27\n ** module chunks = 0\n **/","define(['jquery'],\r\n    function ($) {\r\n\r\n        function CodelistUtils() {\r\n        };\r\n\r\n        CodelistUtils.prototype.findCodeInCodelist = function (code, codelist) {\r\n            var found = isInNode(codelist.data, code);\r\n            return found;\r\n        }\r\n\r\n        function isInNode(arr, code) {\r\n            for (var i = 0; i < arr.length; i++) {\r\n                if (arr[i].code == code) {\r\n                    return arr[i];\r\n                }\r\n            }\r\n\r\n            var res = null;\r\n            for (i = 0; i < arr.length; i++) {\r\n                if (res != null)\r\n                    break;\r\n                if (arr[i].children) {\r\n                    res = isInNode(arr[i].children, code);\r\n                }\r\n            }\r\n\r\n            return res;\r\n        };\r\n\r\n        return CodelistUtils;\r\n    });\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/helpers/CodelistUtils.js\n ** module id = 28\n ** module chunks = 0\n **/","module.exports = \"<div id=divValRes style=display:none> </div> <div id=divDataEditor> <div id=divDataEdit> </div> <div id=divDataGridBtns> <button id=btnAddRow type=button class=\\\"btn btn-default\\\"><span class=\\\"glyphicon glyphicon-plus\\\"></span></button> </div> </div> \";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/html/DataEditor/DataEdit.html\n ** module id = 29\n ** module chunks = 0\n **/","define(\r\n    ['jquery'],\r\nfunction ($) {\r\n    this.defConfig = {\r\n        'fSep': ',',\r\n        'rSep': '\\r\\n',\r\n        'quot': '\"',\r\n        'head': false,\r\n        'trim': true\r\n    }\r\n\r\n\r\n    function CSV_To_Dataset(config,separator) {\r\n        this.config = {\r\n            'fSep': separator,\r\n            'rSep': '\\r\\n',\r\n            'quot': '\"',\r\n            'head': false,\r\n            'trim': true\r\n        };\r\n        //defConfig.fSep = separator;\r\n        $.extend(true, this.config,/* defConfig,*/ config);\r\n        this.stringsArr;\r\n    };\r\n\r\n    CSV_To_Dataset.prototype.convert = function (csv) {\r\n        this.stringsArr = toStringArray(csv, this.config);\r\n        _cleanEmptyCols(this.stringsArr);\r\n    };\r\n    //Removes empty columns left by Excel\r\n    function _cleanEmptyCols(data) {\r\n        for (var c = data[0].length - 1; c >= 0 ; c--) {\r\n            if (data[0][c].trim() == \"\") {\r\n                _removeEmptyCol(data, c);\r\n            }\r\n        }\r\n    };\r\n    function _removeEmptyCol(data, colIndex) {\r\n        for (var r = 0; r < data.length; r++) {\r\n            data[r].splice(colIndex, 1);\r\n        }\r\n    };\r\n    CSV_To_Dataset.prototype.getColumns = function () {\r\n        return stringArrToCol(this.stringsArr);\r\n    };\r\n    CSV_To_Dataset.prototype.getData = function () {\r\n        return stringArrToData(this.stringsArr);\r\n    };\r\n    function stringArrToCol(data) {\r\n        if (!data)\r\n            throw new Error(\"Nothing to parse\");\r\n        if (!data[0])\r\n            throw new Error(\"Nothing to parse\");\r\n\r\n        return data[0];\r\n    };\r\n    function stringArrToData(data) {\r\n        var toRet = [];\r\n        for (i = 1; i < data.length; i++)\r\n            toRet.push(data[i]);\r\n        return toRet;\r\n    };\r\n\r\n\r\n    //Convert a CSV to a multidimentional strings array\r\n    function toStringArray(str, o) {\r\n        var a = [['']];\r\n        for (var r = f = p = q = 0; p < str.length; p++) {\r\n            switch (c = str.charAt(p)) {\r\n                case o.quot:\r\n                    if (q && str.charAt(p + 1) == o.quot) {\r\n                        a[r][f] += o.quot;\r\n                        ++p;\r\n                    } else {\r\n                        q ^= 1;\r\n                    }\r\n                    break;\r\n                case o.fSep:\r\n                    if (!q) {\r\n                        if (o.trim) {\r\n                            a[r][f] = a[r][f].replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n                        }\r\n                        a[r][++f] = '';\r\n                    } else {\r\n                        a[r][f] += c;\r\n                    }\r\n                    break;\r\n                case o.rSep.charAt(0):\r\n                    if (!q && (!o.rSep.charAt(1) || (o.rSep.charAt(1) && o.rSep.charAt(1) == str.charAt(p + 1)))) {\r\n                        if (o.trim) {\r\n                            a[r][f] = a[r][f].replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n                        }\r\n                        a[++r] = [''];\r\n                        a[r][f = 0] = '';\r\n                        if (o.rSep.charAt(1)) {\r\n                            ++p;\r\n                        }\r\n                    } else {\r\n                        a[r][f] += c;\r\n                    }\r\n                    break;\r\n                default:\r\n                    a[r][f] += c;\r\n            }\r\n        }\r\n        if (o.head) {\r\n            a.shift()\r\n        }\r\n        if (a[a.length - 1].length < a[0].length) {\r\n            a.pop()\r\n        }\r\n        return a;\r\n    };\r\n\r\n    return CSV_To_Dataset;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/helpers/CSV_To_Dataset.js\n ** module id = 30\n ** module chunks = 0\n **/","define(['jquery',\r\n    './Validator_CSV_Errors',\r\n    './CodelistUtils'\r\n],\r\n    function ($, Err, clUtils) {\r\n\r\n        function Validator_CSV() { };\r\n\r\n        Validator_CSV.prototype.validate = function (dsdCols, codelists, csvCols, csvData) {\r\n            var toRet = [];\r\n\r\n            if (!dsdCols) {\r\n                toRet.push({ type: Err.DSD_COLUMNS_NULL });\r\n                return toRet;\r\n            }\r\n            if (!csvCols) {\r\n                toRet.push({ type: Err.CSV_COLUMNS_NULL });\r\n                return toRet;\r\n            }\r\n            if (dsdCols.length > csvCols.length) {\r\n                toRet.push({ type: Err.WRONG_COLUMN_COUNT });\r\n                return toRet;\r\n            }\r\n            /*for (var i = 0; i < dsdCols.length; i++) {\r\n                if (dsdCols[i].id != csvCols[i]) {\r\n                    toRet.push({ type: Err.WRONG_COLUMN_ID, index: i });\r\n                }\r\n            }*/\r\n\r\n            /*for (i = 0; i < dsdCols.length; i++) {\r\n                if (dsdCols[i].dataType == 'code') {\r\n                    var clId = dsdCols[i].domain.codes[0].idCodeList;\r\n                    if (dsdCols[i].domain.codes[0].version)\r\n                        clId += \"|\" + dsdCols[i].domain.codes[0].version;\r\n                    var unkCodes = this.checkCodes(dsdCols[i], codelists[clId], csvData, i);\r\n                    if (unkCodes.length > 0) {\r\n                        toRet.push({ type: Err.UNKNOWN_CODES, columnId: csvCols[i], codes: unkCodes, codelistId: clId });\r\n                    }\r\n                }\r\n            }*/\r\n\r\n            var row = 0;\r\n            for (i = 0; i < dsdCols.length; i++) {\r\n                if (nullOnEmpty(dsdCols[i].dataType)) {\r\n                    for (row = 0; row < csvData.length; row++) {\r\n                        if (csvData[row][i] == \"\") {\r\n                            csvData[row][i] = null;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return toRet;\r\n        };\r\n\r\n        Validator_CSV.prototype.validateCodes = function (dsdCols, codelists, csvCols, csvData) {\r\n            var toRet = [];\r\n            if (csvData == null || csvData.length == 0)\r\n                return toRet;\r\n            if (csvCols == null || csvCols.length == 0)\r\n                return toRet;\r\n\r\n            for (i = 0; i < dsdCols.length; i++) {\r\n                if (dsdCols[i].dataType == 'code') {\r\n                    var clId = dsdCols[i].domain.codes[0].idCodeList;\r\n                    if (dsdCols[i].domain.codes[0].version)\r\n                        clId += \"|\" + dsdCols[i].domain.codes[0].version;\r\n\r\n                    var unkCodes = this.checkCodes(dsdCols[i], codelists[clId], csvData, i);\r\n                    if (unkCodes.length > 0) {\r\n                        toRet.push({ type: Err.UNKNOWN_CODES, columnId: csvCols[i], codes: unkCodes, codelistId: clId });\r\n                    }\r\n                }\r\n            }\r\n            return toRet;\r\n        };\r\n\r\n        function nullOnEmpty(dataType) {\r\n            if (dataType == 'code')\r\n                return true;\r\n            if (dataType == 'number')\r\n                return true;\r\n            if (dataType == 'pecentage')\r\n                return true;\r\n            return false;\r\n        }\r\n\r\n        Validator_CSV.prototype.checkCodes = function (dsdCol, cl, csvData, index) {\r\n            var unkCodes = [];\r\n            for (var i = 0; i < csvData.length; i++) {\r\n                if (csvData[i][index]) {\r\n                    var isIn = isInCodelist(cl, csvData[i][index]);\r\n                    if (!isIn) {\r\n                        var uCode = csvData[i][index];\r\n                        if ($.inArray(uCode, unkCodes) == -1)\r\n                            unkCodes.push(uCode);\r\n                    }\r\n                }\r\n            }\r\n            return unkCodes;\r\n        };\r\n\r\n        function isInCodelist(cl, code) {\r\n            var clU = new clUtils();\r\n            var found = clU.findCodeInCodelist(code, cl);\r\n            if (found == null)\r\n                return false;\r\n            return true;\r\n            /*var isIn = isInNode(cl.data, code);\r\n            return isIn;*/\r\n        };\r\n        \r\n        /*function isInNode(arr, code) {\r\n            for (var i = 0; i < arr.length; i++) {\r\n                if (arr[i].code == code) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            var res = false;\r\n            for (i = 0; i < arr.length; i++)\r\n                if (arr[i].children)\r\n                    res = res || isInNode(arr[i].children, code);\r\n\r\n            return res;\r\n        };*/\r\n\r\n\r\n        return new Validator_CSV();\r\n    })\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/helpers/Validator_CSV.js\n ** module id = 31\n ** module chunks = 0\n **/","define([],\r\n    function () {\r\n        'use strict';\r\n        var e = {\r\n            //Col errors\r\n            DSD_COLUMNS_NULL: 'nullDSDCols',\r\n            CSV_COLUMNS_NULL: 'nullCsvCols',\r\n            WRONG_COLUMN_COUNT: 'wrongColumnCount',\r\n            //WRONG_COLUMN_ID: 'wrongColumnId',\r\n            UNKNOWN_CODES:'unknownCodes'\r\n        };\r\n        return e;\r\n    })\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/helpers/Validator_CSV_Errors.js\n ** module id = 32\n ** module chunks = 0\n **/","define([\r\n        'jquery',\r\n        '../../../html/DataEditor/ColumnsMatch/ColumnsMatch.html',\r\n        '../helpers/MLUtils'\r\n],\r\n    function ($, colsMatchHTML, MLUtils) {\r\n        var widgetName = \"ColumnsMatch\";\r\n\r\n        var defConfig = {\r\n            maxRows: 5\r\n        };\r\n        var e = {\r\n            /*EVT_VALUE_CHANGED: 'valueChanged.' + widgetName + '.fenix',\r\n            EVT_ROW_ADDED: 'rowAdded.' + widgetName + '.fenix',\r\n            EVT_ROW_DELETED: 'rowDeleted.' + widgetName + '.fenix'*/\r\n        };\r\n        var h = {\r\n            trDSD: \"#trDSD\",\r\n            trCSV: \"#trCSV\",\r\n            tblColMatch: \"#tblColMatch\"\r\n        };\r\n        var html = {\r\n            rowDSD: '<td>%title%<br/>type: %type%</td>',\r\n            //rowCSV: '<td id=\"csvHead\" ondrop=\"this.drop(event)\" ondragover=\"this.allowDrop(event)\"><span id=\"%colId%\" draggable=\"true\" ondragstart=\"this.drag(event)\">%colId%</span></td>'\r\n            rowCSV: '<td class=\"csvHead\" style=\"cursor:move;\" draggable=\"true\"><div id=\"%colId%\" draggable=\"true\">%colId%</div></td>'\r\n        };\r\n\r\n        var ColumnsMatch = function (config) {\r\n            this.config = {};\r\n            $.extend(true, this.config, defConfig, config);\r\n            this.$cnt;\r\n\r\n            this.$tblColMatch;\r\n            this.$trDsd;\r\n            this.$trCsv;\r\n\r\n            this.dsd;\r\n            this.csvCols;\r\n            this.csvData;\r\n\r\n            this.lang = 'EN';\r\n        };\r\n\r\n        //Render - creation\r\n        ColumnsMatch.prototype.render = function (container, config, callB) {\r\n            $.extend(true, this.config, config);\r\n\r\n            this.$cnt = container;\r\n            this.$cnt.html(colsMatchHTML);\r\n\r\n            this.$tblColMatch = this.$cnt.find(h.tblColMatch);\r\n            this.$trDsd = this.$cnt.find(h.trDSD);\r\n            this.$trCsv = this.$cnt.find(h.trCSV);\r\n\r\n            this._bindEvents();\r\n\r\n            this._doML();\r\n            if (callB) callB();\r\n        }\r\n\r\n        ColumnsMatch.prototype.setData = function (dsd, csvCols, csvData) {\r\n            this.dsd = dsd;\r\n            this.csvCols = csvCols;\r\n            this.csvData = csvData;\r\n            var cols = dsd.columns;\r\n            this.$trDsd.html('');\r\n            this.$trCsv.html('');\r\n            if (!cols) return;\r\n            for (var i = 0; i < cols.length; i++) {\r\n                var title = MLUtils_getAvailableString(cols[i].title, this.lang);\r\n                var toSet = html.rowDSD.replace('%title%', title);\r\n                toSet = toSet.replace('%type%', cols[i].dataType);\r\n\r\n                this.$trDsd.append(toSet);\r\n            }\r\n\r\n            for (i = 0; i < csvCols.length; i++) {\r\n                toSet = html.rowCSV.replace('%colId%', csvCols[i]);\r\n                toSet = toSet.replace('%colId%', csvCols[i]);\r\n                this.$trCsv.append(toSet);\r\n                this.bindCsvHeadEvents();\r\n            }\r\n            this._updateView(this.csvCols, this.csvData);\r\n        }\r\n        ColumnsMatch.prototype.getCsvCols = function () {\r\n            var newOrder = this._getColIndexes(this.csvCols);\r\n            var toRet = [];\r\n            for (var i = 0; i < this.dsd.columns.length; i++) {\r\n                toRet[i] = this.csvCols[newOrder[i]];\r\n            }\r\n            return toRet;\r\n        }\r\n        ColumnsMatch.prototype.getCsvData = function () {\r\n            var newOrder = this._getColIndexes(this.csvCols);\r\n            var toRet = [];\r\n            for (var i = 0; i < this.csvData.length; i++) {\r\n                var row = [];\r\n                for (var j = 0; j < this.dsd.columns.length; j++) {\r\n                    row[j] = this.csvData[i][newOrder[j]];\r\n                }\r\n                toRet[i] = row;\r\n            }\r\n            return toRet;\r\n        }\r\n\r\n        ColumnsMatch.prototype._updateView = function (csvCols, csvData) {\r\n            var maxRCount = this.config.maxRows;\r\n            if (csvData.length < maxRCount) {\r\n                maxRCount = csvData.length\r\n            }\r\n            this._removeDataRows();\r\n            var idx = this._getColIndexes(csvCols);\r\n            var toAdd = \"\";\r\n            for (i = 0; i < maxRCount; i++) {\r\n                toAdd += \"<tr>\" + csvRowToRow(csvData[i], idx) + \"</tr>\";\r\n            }\r\n            toAdd += \"<tr>\";\r\n            for (i = 0; i < idx.length; i++) {\r\n                toAdd += \"<td>...</td>\";\r\n            }\r\n            toAdd += \"</tr>\";\r\n            this.$tblColMatch.append(toAdd);\r\n        }\r\n        ColumnsMatch.prototype._getColIndexes = function (csvCols) {\r\n            var $tdCsv = this.$trCsv.find('td');\r\n            var toRet = [];\r\n            for (var i = 0; i < $tdCsv.length; i++) {\r\n                var colId = $($tdCsv[i]).find('div')[0].id;\r\n                toRet[i] = findIndex(colId, csvCols);\r\n            }\r\n            return toRet;\r\n        }\r\n        ColumnsMatch.prototype._removeDataRows = function () {\r\n            var rows = this.$tblColMatch.find(\"tr\");\r\n            if (rows.length > 2) {\r\n                for (var i = 2; i < rows.length; i++) {\r\n                    rows[i].remove();\r\n                }\r\n            }\r\n        }\r\n        function findIndex(colId, cols) {\r\n            for (var i = 0; i < cols.length; i++) {\r\n                if (cols[i] == colId)\r\n                    return i;\r\n            }\r\n            return -1;\r\n        }\r\n        function csvRowToRow(csvRow, csvOrder) {\r\n            var toRet = \"\";\r\n            for (var i = 0; i < csvOrder.length; i++) {\r\n                toRet += \"<td>\";\r\n                toRet += csvRow[csvOrder[i]];\r\n                toRet += \"</td>\";\r\n            }\r\n            return toRet;\r\n        }\r\n\r\n        ColumnsMatch.prototype._bindEvents = function () { }\r\n\r\n        ColumnsMatch.prototype.bindCsvHeadEvents = function () {\r\n            var tds = this.$trCsv.find('.csvHead');\r\n            var me = this;\r\n            for (var i = 0; i < tds.length; i++) {\r\n                $(tds[i]).on('drop', function (event) { me.drop(event); });\r\n                $(tds[i]).on('dragover', me.allowDrop);\r\n                $(tds[i]).find('div').on('dragover', me.allowDrop);\r\n                $(tds[i]).find('div').on('dragstart', me.drag);\r\n            }\r\n        }\r\n        ColumnsMatch.prototype._doML = function () { }\r\n\r\n        ColumnsMatch.prototype.drag = function (ev) {\r\n            ev.originalEvent.dataTransfer.setData(\"text\", ev.target.id);\r\n        }\r\n        ColumnsMatch.prototype.allowDrop = function (ev) {\r\n            ev.preventDefault();\r\n        }\r\n        ColumnsMatch.prototype.drop = function (ev) {\r\n            ev.preventDefault();\r\n            var data = ev.originalEvent.dataTransfer.getData(\"text\");\r\n            /*\r\n            console.log($('#' + data));\r\n            console.log($(data));\r\n            console.log(data);\r\n            */\r\n            var $toMoveSrc = $('div#' + data);\r\n            var $cntSrc = $toMoveSrc.parent();\r\n\r\n            var $toMoveDest;\r\n            var $cntDest;\r\n            if ($(ev.target).is('div')) {\r\n                $toMoveDest = $(ev.target);\r\n                $cntDest = $toMoveDest.parent();\r\n            } else {\r\n                $cntDest = $(ev.target);\r\n                $toMoveDest = $cntDest.find('div');\r\n            }\r\n\r\n            $toMoveDest.remove();\r\n            $toMoveSrc.remove();\r\n            $cntDest.append($toMoveSrc);\r\n            $cntSrc.append($toMoveDest);\r\n\r\n            this._updateView(this.csvCols, this.csvData);\r\n            this.bindCsvHeadEvents();\r\n        }\r\n\r\n        return ColumnsMatch;\r\n    });\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/DataEditor/ColumnsMatch/ColumnsMatch.js\n ** module id = 33\n ** module chunks = 0\n **/","module.exports = \"<table id=tblColMatch class=\\\"table table-bordered\\\"> <tbody> <tr id=trDSD></tr> <tr id=trCSV></tr> </tbody> </table>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/html/DataEditor/ColumnsMatch/ColumnsMatch.html\n ** module id = 34\n ** module chunks = 0\n **/"],"sourceRoot":""}